"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1143],{5553:(j,x,o)=>{o.d(x,{h:()=>v});var a=o(177),m=o(7863),n=o(4438);let v=(()=>{var g;class e{}return(g=e).\u0275fac=function(M){return new(M||g)},g.\u0275mod=n.$C({type:g}),g.\u0275inj=n.G2t({imports:[a.MD,m.bv]}),e})()},3241:(j,x,o)=>{o.d(x,{p:()=>v});var a=o(4438),m=o(177),n=o(7863);let v=(()=>{var g;class e{constructor(M){this.location=M,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(g=e).\u0275fac=function(M){return new(M||g)(a.rXU(m.aZ))},g.\u0275cmp=a.VBU({type:g,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(M,r){1&M&&(a.j41(0,"ion-header",0)(1,"ion-toolbar"),a.nrm(2,"ion-menu-button",1),a.j41(3,"ion-icon",2),a.bIt("click",function(){return r.goBack()}),a.k0s(),a.j41(4,"ion-title"),a.EFF(5),a.k0s()()()),2&M&&(a.Y8G("translucent",!0),a.R7$(5),a.JRh(r.title))},dependencies:[n.eU,n.iq,n.MC,n.BC,n.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},8453:(j,x,o)=>{o.d(x,{W:()=>n});var a=o(4438),m=o(7863);let n=(()=>{var v;class g{constructor(){this.title="Title"}ngOnInit(){}}return(v=g).\u0275fac=function(y){return new(y||v)},v.\u0275cmp=a.VBU({type:v,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(y,M){1&y&&(a.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),a.EFF(3),a.k0s()()()),2&y&&(a.R7$(3),a.JRh(M.title))},dependencies:[m.hU,m.ln]}),g})()},1143:(j,x,o)=>{o.r(x),o.d(x,{CreateSystemTestPageModule:()=>U});var a=o(177),m=o(4341),n=o(7863),v=o(7650),g=o(467),e=o(4438),y=o(9032),M=o(147),r=o(5092),l=o(7473),i=o(8453),h=o(3241),p=o(9549);function T(c,E){return this.testStepTitle}function S(c,E){return this.aiSteps}function b(c,E){if(1&c){const _=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h1"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"ion-icon",28),e.bIt("click",function(){const s=e.eBV(_).$implicit,d=e.XpG();return e.Njj(d.delete(s.stepTitle))}),e.k0s()()}if(2&c){const _=E.$implicit;e.R7$(3),e.JRh(_.stepTitle),e.R7$(2),e.JRh(_.expectedResults)}}function P(c,E){if(1&c&&(e.j41(0,"ion-select-option",22),e.EFF(1),e.k0s()),2&c){const _=E.$implicit;e.FS9("value",_.name),e.R7$(),e.JRh(_.name)}}function C(c,E){1&c&&(e.j41(0,"ion-card-content",36)(1,"div",38),e.nrm(2,"ion-icon",39),e.k0s()())}function O(c,E){if(1&c){const _=e.RV6();e.j41(0,"ion-card-content",13)(1,"div",40),e.bIt("click",function(){e.eBV(_);const s=e.XpG(2);return e.Njj(s.askAIForHelp("step"))}),e.nrm(2,"ion-icon",41),e.k0s()()}}function A(c,E){if(1&c&&(e.j41(0,"markdown",37),e.EFF(1),e.k0s()),2&c){const _=E.$implicit;e.R7$(),e.JRh(_.message)}}function R(c,E){if(1&c){const _=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",29)(3,"ion-button",30),e.bIt("click",function(){e.eBV(_);const s=e.XpG();return e.Njj(s.cancel())}),e.EFF(4,"Cancel"),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Add Test Step"),e.k0s(),e.j41(7,"ion-buttons",31)(8,"ion-button",30),e.bIt("click",function(){e.eBV(_);const s=e.XpG();return e.Njj(s.save())}),e.EFF(9,"Save"),e.k0s()()()(),e.j41(10,"ion-content",32)(11,"ion-card",33)(12,"ion-label"),e.EFF(13,"Step"),e.k0s(),e.j41(14,"div",34)(15,"div",8)(16,"ion-input",35),e.mxI("ngModelChange",function(s){e.eBV(_);const d=e.XpG();return e.DH7(d.testStepTitle,s)||(d.testStepTitle=s),e.Njj(s)}),e.k0s()()(),e.nrm(17,"br"),e.j41(18,"ion-label"),e.EFF(19,"Expected"),e.k0s(),e.j41(20,"div",34)(21,"div",8)(22,"ion-input",35),e.mxI("ngModelChange",function(s){e.eBV(_);const d=e.XpG();return e.DH7(d.testExpectedResults,s)||(d.testExpectedResults=s),e.Njj(s)}),e.k0s()()()(),e.j41(23,"ion-card"),e.DNE(24,C,3,0,"ion-card-content",36)(25,O,3,0,"ion-card-content",13),e.j41(26,"ion-card-content")(27,"ion-label"),e.EFF(28,"DevProbe AI Answer"),e.k0s()(),e.j41(29,"ion-card-content"),e.Z7z(30,A,2,1,"markdown",37,S,!0),e.k0s()()()}if(2&c){const _=e.XpG();e.R7$(16),e.R50("ngModel",_.testStepTitle),e.R7$(6),e.R50("ngModel",_.testExpectedResults),e.R7$(2),e.vxM(24,_.disableAI?24:-1),e.R7$(),e.vxM(25,_.disableAI?-1:25),e.R7$(5),e.Dyx(_.aiSteps)}}const B=[{path:"",component:(()=>{var c;class E{constructor(t,s,d,f,I,D){this.activatedRoute=t,this.alertCtrl=s,this.systemTestService=d,this.loadingCtrl=f,this.teamService=I,this.notificationService=D,this.productObjective="",this.productStep="",this.systemTest={title:"",description:"",steps:[],type:"system-test",state:!1,assigned_to:""},this.testStepTitle="",this.testExpectedResults="",this.assignedTester="",this.teamMembers=[],this.user={},this.orgName="",this.vertexAI=(0,e.WQX)(y.L9),this.model=(0,y.oc)(this.vertexAI,{model:"gemini-1.5-flash"}),this.aiSteps=[],this.extraData="",this.disableAI=!1,this.showContext=!1}ngOnInit(){this.getProductFromParams(),this.getTeamMembers()}ionViewWillEnter(){var t=this;return(0,g.A)(function*(){t.getProductFromParams(),yield t.getTeamMembers()})()}getProductFromParams(){this.activatedRoute.params.subscribe(s=>{this.productObjective=s.productObjective,this.productStep=s.step});const t=JSON.parse(localStorage.getItem("user"));this.orgName=t.orgName,console.log(this.productObjective),console.log(this.productStep)}getTeamMembers(){var t=this;return(0,g.A)(function*(){t.teamMembers=yield t.teamService.getTeamByOrganization(t.orgName)})()}onWillDismiss(t){}cancel(){var t;null===(t=this.modal)||void 0===t||t.dismiss()}save(){var t;this.testStepTitle&&this.testExpectedResults?(this.systemTest.steps.push({stepTitle:this.testStepTitle,expectedResults:this.testExpectedResults,isComplete:!1}),this.testStepTitle="",this.testExpectedResults="",null===(t=this.modal)||void 0===t||t.dismiss()):this.showAlert("Please fill out the Step Title and the Expected Result fields.","Error").then(s=>console.log("Alert shown"))}delete(t){this.systemTest.steps=this.systemTest.steps.filter(s=>s.stepTitle!==t)}showAlert(t,s){var d=this;return(0,g.A)(function*(){yield(yield d.alertCtrl.create({header:s,message:t,buttons:["OK"]})).present()})()}createSystemTest(){var t=this;return(0,g.A)(function*(){if(yield t.showLoading(),console.log(t.systemTest),!t.systemTest.title||!t.systemTest.description||0===t.systemTest.steps.length||!t.systemTest.assigned_to)return yield t.hideLoading(),void t.showAlert("Please fill out the title, description, tester and at least one step.","Error").then(f=>console.log("Alert shown"));const s=localStorage.getItem("user");if(!s)return;t.user=JSON.parse(s),t.orgName=t.user.orgName,console.log(t.orgName),yield t.systemTestService.addSystemTest(t.orgName,t.productObjective,t.productStep,t.systemTest);let d={member:t.systemTest.assigned_to,role:"tester"};yield t.notificationService.notifyTestToUser(d,t.orgName,"https://devprobe-89481.web.app/software-testing"),t.systemTest={title:"",description:"",steps:[],type:"system-test",state:!1,assigned_to:""},yield t.hideLoading(),window.history.back()})()}showLoading(){var t=this;return(0,g.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,g.A)(function*(){yield t.loadingCtrl.dismiss()})()}doRefresh(t){}aiGenerate(t){var s=this;return(0,g.A)(function*(){yield s.showLoading();const d={history:[{role:"user",parts:[{text:"Hey, I need help to create a system test case description"}]},{role:"model",parts:[{text:"Sure, I can help you with that. What do you need help with?"}]}],generationConfig:{maxOutputTokens:100}},f={history:[{role:"user",parts:[{text:"Hey, I need help to create a system test case steps, dont give me more information about the test, JUST LIST THE STEPS"}]},{role:"model",parts:[{text:"Sure, I can help you with that."}]}],generationConfig:{maxOutputTokens:250}};if("description"===t){if(!s.systemTest.title||""===s.systemTest.title)return yield s.hideLoading(),void(yield s.showAlert("Please fill out the title of the test before asking for help with the description.","Error").then(u=>console.log("Alert shown")));let I=s.model.startChat(d),D="Given this test title:"+s.systemTest.title+". Here is more information about the test: "+s.extraData+"I need help to create the description of the test, just give me the test main objective";console.log(D),yield I.sendMessage(D).then(u=>{s.systemTest.description=u.response.text()})}if("step"===t){if(!s.systemTest.title||""===s.systemTest.title||!s.systemTest.description||""===s.systemTest.description)return yield s.hideLoading(),void(yield s.showAlert("Please fill out the title and description of the test before asking for help with the steps.","Error").then(u=>console.log("Alert shown")));let I=s.model.startChat(f),D="Given this test title:"+s.systemTest.title+"and this test description:"+s.systemTest.description+". Here is more information about the test: "+s.extraData+"I need help to create the steps of the test, just list the steps";console.log(D),yield I.sendMessage(D).then(u=>{s.aiSteps.push({message:u.response.text(),from:"AI",id:"1"}),console.log(u.response.text())}),s.disableAI=!0}yield s.hideLoading()})()}askAIForHelp(t){var s=this;return(0,g.A)(function*(){yield s.aiGenerate(t).then(f=>console.log("AI generated"));const d=document.getElementById("mk-1");console.log(d),s.chatStyle()})()}chatStyle(){const t=document.getElementById("mk-1");if(console.log(t),!t)return;let s=t.getElementsByTagName("h1"),d=t.getElementsByTagName("h2"),f=t.getElementsByTagName("li"),I=t.getElementsByTagName("strong"),D=t.getElementsByTagName("ul");for(var u=0;u<s.length;u++)s[u].style.fontSize="2.5em",s[u].style.fontWeight="bold";for(u=0;u<d.length;u++)d[u].style.fontSize="2em",d[u].style.fontWeight="bold";for(u=0;u<f.length;u++)f[u].style.fontSize="1.5em",f[u].innerHTML="- "+f[u].innerHTML,console.log(f[u].innerHTML);for(u=0;u<I.length;u++)console.log(I[u].innerHTML);for(u=0;u<D.length;u++){let k=D[u].getElementsByTagName("li");for(var N=0;N<k.length;N++)k[N].style.fontSize="0.5em",k[N].innerHTML="- "+k[N].innerHTML,console.log(k[N].innerHTML)}}giveContext(){this.showAlertWithInputs("Give Global Test Context","Please provide the AI with some context, provide code, HTML, or instructions.",["Give Context","Cancel"],[{name:"context",type:"text",placeholder:"Give AI Context"}]).then(d=>console.log("Alert shown"))}showAlertWithInputs(t,s,d,f){var I=this;return(0,g.A)(function*(){const D=yield I.alertCtrl.create({header:t,message:s,buttons:d,inputs:f});yield D.present();const{data:u}=yield D.onDidDismiss();console.log(u),u.values&&(I.extraData=u.values.context,I.showContext=!0),console.log(I.extraData)})()}onAssignedTester(t){this.assignedTester=t.target.value,this.systemTest.assigned_to=this.assignedTester}}return(c=E).\u0275fac=function(t){return new(t||c)(e.rXU(v.nX),e.rXU(n.hG),e.rXU(M.h),e.rXU(n.Xi),e.rXU(r.O),e.rXU(l.J))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-create-system-test"]],viewQuery:function(t,s){if(1&t&&e.GBs(n.Sb,5),2&t){let d;e.mGM(d=e.lsd())&&(s.modal=d.first)}},decls:51,vars:5,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4",1,""],["size","12","size-md","12","size-lg","12",1,""],[1,"min-h-full","flex","flex-col","p-8"],[1,"bg-gray-600","p-2"],[1,"flex","flex-row","items-center","w-full"],[1,"w-full","m-2"],["placeholder","Test Title","type","text",1,"text-3xl",3,"ngModelChange","ngModel"],["placeholder","Test Description","type","text",1,"text-sm",3,"ngModelChange","ngModel"],[1,"rounded-full","p-3","bg-purple-800"],["name","color-wand-outline",3,"click"],[1,""],[1,"flex","flex-row","items-center"],[1,"text-4xl"],["id","open-modal",1,"flex","flex-row","items-center","bg-cyan-800","m-4","p-1",3,"click"],["name","add"],[1,"bg-gray-600"],[1,"flex-row"],[1,"text-3xl","flex","flex-row"],["label","Assign Tester","placeholder","Select an Tester","interface","popover",3,"ionChange"],[3,"value"],["color","primary","expand","block","fill","outline",3,"click"],["trigger","open-modal",3,"willPresent","willDismiss"],["vertical","bottom","horizontal","end","slot","fixed",1,"m-2","z-10",3,"click"],[1,"bg-purple-300","p-4"],["name","chatbubble-outline",1,"w-full","h-full"],["aria-hidden","true","name","trash","slot","end",3,"click"],["slot","start"],[3,"click"],["slot","end"],[1,"flex","flex-col","justify-center","items-center"],[1,"m-2","p-2"],[1,"flex-row","flex","justify-center","items-center","w-full"],["type","text",3,"ngModelChange","ngModel"],[1,"hidden"],["id","mk-1",1,"text-white"],[1,"rounded-full","p-3","bg-gray-400","flex","flex-row","justify-center","items-center","hidden"],["name","color-wand-outline",1,"hidden"],[1,"rounded-full","p-3","bg-purple-800","flex","flex-row","justify-center","items-center",3,"click"],["name","color-wand-outline"]],template:function(t,s){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2)(5,"ion-col",3)(6,"p"),e.EFF(7,"Fill the test from to create a system test."),e.k0s(),e.nrm(8,"p"),e.k0s()(),e.j41(9,"ion-row",2)(10,"ion-col",4)(11,"ion-card",5)(12,"ion-card-title",6)(13,"div",7)(14,"div",8)(15,"ion-input",9),e.mxI("ngModelChange",function(f){return e.DH7(s.systemTest.title,f)||(s.systemTest.title=f),f}),e.k0s()()()(),e.nrm(16,"br"),e.j41(17,"ion-card-title",6)(18,"div",7)(19,"div",8)(20,"ion-textarea",10),e.mxI("ngModelChange",function(f){return e.DH7(s.systemTest.description,f)||(s.systemTest.description=f),f}),e.k0s()(),e.j41(21,"div",11)(22,"ion-icon",12),e.bIt("click",function(){return s.askAIForHelp("description")}),e.k0s()()()(),e.nrm(23,"br"),e.j41(24,"ion-card-title",13)(25,"div",14)(26,"h1",15),e.EFF(27,"Test Steps..."),e.k0s(),e.j41(28,"div",16),e.bIt("click",function(){return s.chatStyle()}),e.nrm(29,"ion-icon",17),e.k0s()()(),e.j41(30,"ion-card-content",18)(31,"ion-list"),e.Z7z(32,b,7,2,"ion-item",null,T,!0),e.k0s()(),e.nrm(34,"br"),e.j41(35,"ion-card-content",19)(36,"ion-card-title",20),e.EFF(37," Assign the test"),e.k0s()(),e.j41(38,"ion-card-content")(39,"ion-card")(40,"ion-select",21),e.bIt("ionChange",function(f){return s.onAssignedTester(f)}),e.Z7z(41,P,2,2,"ion-select-option",22,e.fX1),e.k0s()()(),e.nrm(43,"br"),e.j41(44,"ion-button",23),e.bIt("click",function(){return s.createSystemTest()}),e.EFF(45,"Create System Test"),e.k0s()()()()(),e.j41(46,"ion-modal",24),e.bIt("willPresent",function(){return s.chatStyle()})("willDismiss",function(f){return s.onWillDismiss(f)}),e.DNE(47,R,32,4,"ng-template"),e.k0s(),e.j41(48,"ion-fab",25),e.bIt("click",function(){return s.giveContext()}),e.j41(49,"ion-avatar",26),e.nrm(50,"ion-icon",27),e.k0s()()()),2&t&&(e.Y8G("title","Create System Test"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Create System Test"),e.R7$(12),e.R50("ngModel",s.systemTest.title),e.R7$(5),e.R50("ngModel",s.systemTest.description),e.R7$(12),e.Dyx(s.systemTest.steps),e.R7$(9),e.Dyx(s.teamMembers))},dependencies:[m.BC,m.vS,n.mC,n.Jm,n.QW,n.b_,n.I9,n.tN,n.hU,n.W9,n.Q8,n.lO,n.eU,n.iq,n.$w,n.uz,n.he,n.nf,n.ln,n.Nm,n.Ip,n.nc,n.BC,n.ai,n.Sb,n.Je,n.Gw,i.W,h.p,p.NN]}),E})()}];let w=(()=>{var c;class E{}return(c=E).\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.$C({type:c}),c.\u0275inj=e.G2t({imports:[v.iI.forChild(B),v.iI]}),E})();var F=o(5553);let U=(()=>{var c;class E{}return(c=E).\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.$C({type:c}),c.\u0275inj=e.G2t({imports:[a.MD,m.YN,n.bv,w,F.h,p.NN]}),E})()},4796:(j,x,o)=>{o.d(x,{u:()=>g});var a=o(467),m=o(8737),n=o(4262),v=o(4438);let g=(()=>{var e;class y{constructor(r,l){this.auth=r,this.firestore=l}registerUser(r){var l=this;return(0,a.A)(function*(){try{const i=yield(0,m.eJ)(l.auth,r.email,r.password);return i.user?(yield(0,n.BN)((0,n.H9)(l.firestore,"users",i.user.uid),{email:r.email,name:r.name,orgName:r.orgName,uid:i.user.uid}),yield(0,n.BN)((0,n.H9)(l.firestore,"teams",`${r.orgName}`),{name:r.orgName,members:[i.user.uid]}),i):null}catch{return null}})()}loginUser(r){var l=this;return(0,a.A)(function*(){try{var i;const h=yield(0,m.x9)(l.auth,r.email,r.password);if(null!==(i=h.user)&&void 0!==i&&i.uid){const p=yield(0,n.x7)((0,n.H9)(l.firestore,"users",h.user.uid));if(p.exists())return localStorage.setItem("user",JSON.stringify(p.data())),h}}catch(h){console.error(h)}return null})()}logoutUser(){var r=this;return(0,a.A)(function*(){yield r.auth.signOut()})()}addMember(r){var l=this;return(0,a.A)(function*(){try{const i=yield(0,m.eJ)(l.auth,r.email,r.password);if(!i.user)return!1;const h={email:r.email,name:r.name,orgName:r.orgName,uid:i.user.uid};return yield(0,n.BN)((0,n.H9)(l.firestore,"users",i.user.uid),h),h}catch{return!1}})()}}return(e=y).\u0275fac=function(r){return new(r||e)(v.KVO(m.Nj),v.KVO(n._7))},e.\u0275prov=v.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),y})()},7473:(j,x,o)=>{o.d(x,{J:()=>e});var a=o(467),m=o(4262),n=o(4438),v=o(1626),g=o(5092);let e=(()=>{var y;class M{constructor(l,i,h){this.firestore=l,this.http=i,this.teamService=h}saveNotificationID(l,i){var h=this;return(0,a.A)(function*(){const p=(0,m.H9)(h.firestore,"users",l.uid),T=yield(0,m.x7)(p);if(T.exists()){const S=T.data();return S.notificationID=i,yield(0,m.BN)(p,S),!0}return console.log("No such document!"),!1})()}getNotificationUser(l){var i=this;return(0,a.A)(function*(){const h=(0,m.H9)(i.firestore,"users",l.uid),p=yield(0,m.x7)(h);if(p.exists()){const T=p.data();return T.notificationID?T.notificationID:""}return console.log("No such document!"),null})()}notifyIncidentToUser(l,i){var h=this;return(0,a.A)(function*(){try{const p=yield h.teamService.getTeamByOrganization(i),T=l.map(P=>P.member),S=p.filter(P=>T.includes(P.name));console.log("team",S);const b="https://devprobeapi.onrender.com/sendNotification";for(let P of S){let C=yield h.getNotificationUser(P);if(console.log("sid",C),""!==C){const A={sid:C,title:"New Incident",type:"new_incident",message:`Hey ${P.name}, you have been assigned a new incident your incident role is ${l.find(R=>R.member===P.name).role}`,target:"https://devprobe-89481.web.app/incident-manager-chooser"};yield h.http.post(b,A).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(p){console.log(p)}})()}notifyIncidentUpdateToTeam(l,i,h){var p=this;return(0,a.A)(function*(){try{const T=yield p.teamService.getTeamByOrganization(i),S=l.map(C=>C.member),b=T.filter(C=>S.includes(C.name));console.log("team",b);const P="https://devprobeapi.onrender.com/sendNotification";for(let C of b){let O=yield p.getNotificationUser(C);if(console.log("sid",O),""!==O){const R={sid:O,title:"Incident Update",type:"update_incident",message:`Hey ${C.name}, there are updates to your incident`,target:h};yield p.http.post(P,R).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(T){console.log(T)}})()}notifyTestToUser(l,i,h){var p=this;return(0,a.A)(function*(){try{console.log("Notify test to user");const T=yield p.teamService.getTeamByOrganization(i),S=l.member,b=T.filter(C=>C.name===S);console.log("team",b);const P="https://devprobeapi.onrender.com/sendNotification";for(let C of b){let O=yield p.getNotificationUser(C);if(console.log("sid",O),""!==O){const R={sid:O,title:"New Unit Test",type:"test",message:`Hey ${C.name}, you have been assigned a new test`,target:h};yield p.http.post(P,R).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(T){console.log(T)}})()}}return(y=M).\u0275fac=function(l){return new(l||y)(n.KVO(m._7),n.KVO(v.Qq),n.KVO(g.O))},y.\u0275prov=n.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),M})()},5092:(j,x,o)=>{o.d(x,{O:()=>g});var a=o(467),m=o(4262),n=o(4438),v=o(4796);let g=(()=>{var e;class y{constructor(r,l){this.firestore=r,this.authService=l}getTeamByOrganization(r){var l=this;return(0,a.A)(function*(){let i=(0,m.H9)(l.firestore,"teams",r);const T=(yield(0,m.x7)(i)).data();let S=[];for(let b=0;b<T.members.length;b++){i=(0,m.H9)(l.firestore,"users",T.members[b]);const C=(yield(0,m.x7)(i)).data();S.push(C)}return S})()}removeMember(r,l){var i=this;return(0,a.A)(function*(){try{let h=(0,m.H9)(i.firestore,"teams",r);const S=(yield(0,m.x7)(h)).data();let b=S.members.filter(C=>C!==l);return yield(0,m.BN)(h,{name:S.name,members:b}),h=(0,m.H9)(i.firestore,"users",l),yield(0,m.BN)(h,{}),yield i.authService,!0}catch{return!1}})()}addMember(r){var l=this;return(0,a.A)(function*(){try{const i=yield l.authService.addMember(r);if(!i)return!1;const h=(0,m.H9)(l.firestore,"teams",r.orgName),T=(yield(0,m.x7)(h)).data();console.log(T);const S=T;let b=S.members;return b.push(i.uid),console.log(b),yield(0,m.mZ)(h,{name:S.name,members:b}),i.uid}catch{return!1}})()}}return(e=y).\u0275fac=function(r){return new(r||e)(n.KVO(m._7),n.KVO(v.u))},e.\u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),y})()}}]);