"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7907],{5553:(F,m,l)=>{l.d(m,{h:()=>h});var s=l(177),y=l(7863),i=l(4438);let h=(()=>{var d;class e{}return(d=e).\u0275fac=function(f){return new(f||d)},d.\u0275mod=i.$C({type:d}),d.\u0275inj=i.G2t({imports:[s.MD,y.bv]}),e})()},3241:(F,m,l)=>{l.d(m,{p:()=>h});var s=l(4438),y=l(177),i=l(7863);let h=(()=>{var d;class e{constructor(f){this.location=f,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(d=e).\u0275fac=function(f){return new(f||d)(s.rXU(y.aZ))},d.\u0275cmp=s.VBU({type:d,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(f,P){1&f&&(s.j41(0,"ion-header",0)(1,"ion-toolbar"),s.nrm(2,"ion-menu-button",1),s.j41(3,"ion-icon",2),s.bIt("click",function(){return P.goBack()}),s.k0s(),s.j41(4,"ion-title"),s.EFF(5),s.k0s()()()),2&f&&(s.Y8G("translucent",!0),s.R7$(5),s.JRh(P.title))},dependencies:[i.eU,i.iq,i.MC,i.BC,i.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},7907:(F,m,l)=>{l.r(m),l.d(m,{GraphTracePageModule:()=>D});var s=l(177),y=l(4341),i=l(7863),h=l(305),d=l(467),e=l(4438),j=l(2588),f=l(3241),P=l(4688);function M(r,g){if(1&r&&(e.j41(0,"ion-content",36),e.EFF(1),e.k0s()),2&r){const u=e.XpG().$implicit;e.R7$(),e.SpI("Ask DevProbe AI to analyze the traceroute data for ",u,".")}}function C(r,g){if(1&r){const u=e.RV6();e.j41(0,"ion-col",27)(1,"div",28)(2,"ion-avatar",29)(3,"ion-icon",30),e.bIt("click",function(){const o=e.eBV(u).$implicit,a=e.XpG();return e.Njj(a.ai(o))}),e.k0s()()(),e.j41(4,"ion-popover",31),e.DNE(5,M,2,1,"ng-template"),e.k0s(),e.j41(6,"ion-card",32)(7,"ion-card-title",33)(8,"h1",34),e.EFF(9),e.k0s()(),e.nrm(10,"br")(11,"div",35),e.k0s()()}if(2&r){const u=g.$implicit,t=e.XpG();e.R7$(2),e.Mz_("id","hover-trigger-",u,""),e.R7$(2),e.Mz_("trigger","hover-trigger-",u,""),e.R7$(5),e.JRh(u),e.R7$(2),e.Y8G("options",t.countryOptions[u])}}const T=[{path:"",component:(()=>{var r;class g{constructor(t,o){this.ripeService=t,this.route=o,this.orgName="",this.productObjective="",this.user={},this.data=[],this.countries=[],this.countryOptions={},this.aiModal=!1}ionViewWillEnter(){var t=this;return(0,d.A)(function*(){t.route.queryParams.subscribe(a=>{t.productObjective=a.product});const o=localStorage.getItem("user");o&&(t.user=JSON.parse(o),t.orgName=t.user.orgName,t.data=[],t.getResultsHistoryforRtt().then(()=>{t.groupByDate().then(()=>{t.groupByCountry().then(()=>{t.populateCountries(),t.generateCountryOptions()})})}))})()}getResultsHistoryforRtt(){var t=this;return(0,d.A)(function*(){yield t.ripeService.getHistoryResults(t.orgName,t.productObjective).then(o=>{for(let a=0;a<o.length;a++){let c=o[a].id.split("-");t.data.push({id:c[1],date:c[3]+"/"+c[2]+"/"+c[4],time:c[5],data:o[a].data.data})}console.log(t.data)})})()}groupByDate(){var t=this;return(0,d.A)(function*(){let o={};for(let n=0;n<t.data.length;n++){let p=t.data[n].date;o[p]||(o[p]=[]),o[p].push(...t.data[n].data)}const a=Object.keys(o).sort((n,p)=>new Date(n).getTime()-new Date(p).getTime());let c={};for(let n of a)c[n]=o[n];t.data=c,console.log(t.data)})()}groupByCountry(){var t=this;return(0,d.A)(function*(){let o={};for(let a in t.data){let c=t.data[a];o[a]||(o[a]={});for(let n=0;n<c.length;n++){let p=c[n].src_country;"No country found"!==p&&(o[a][p]||(o[a][p]=[]),o[a][p].push(c[n]))}}t.data=o,console.log(t.data)})()}populateCountries(){var t=this;return(0,d.A)(function*(){const o=new Set;for(let a in t.data)for(let c in t.data[a])o.add(c);t.countries=Array.from(o),console.log(t.countries)})()}getRandomColor(){let o="#";for(let a=0;a<6;a++)o+="0123456789ABCDEF"[Math.floor(16*Math.random())];return o}generateCountryOptions(){for(let t of this.countries){const o=[],a=[];for(let n in this.data){let p=0,_=0;if(this.data[n][t]){for(let x=0;x<this.data[n][t].length;x++){let b=this.data[n][t][x];for(let v=0;v<b.result.length;v++)"number"==typeof b.result[v].result[0].rtt&&(p+=b.result[v].result[0].rtt,_++)}_>0&&(o.push(n),a.push(p/_))}}const c=this.getRandomColor();this.countryOptions[t]={legend:{data:[t],align:"left",backgroundColor:"rgba(255, 255, 255, 0.9)"},tooltip:{},xAxis:{data:o,silent:!1,splitLine:{show:!1}},yAxis:{},series:[{name:t,type:"bar",data:a,itemStyle:{color:c},animationDelay:n=>10*n}],animationEasing:"elasticOut",animationDelayUpdate:n=>5*n}}}refresh(){window.location.reload()}ngOnInit(){}ai(t){console.log(t)}toggleAiModal(){this.aiModal=!this.aiModal}}return(r=g).\u0275fac=function(t){return new(t||r)(e.rXU(j.N),e.rXU(h.nX))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-graph-trace"]],decls:66,vars:5,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10"],["size","6","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"],["size","6","size-md","6","size-lg","6",1,"text-right"],["name","refresh",1,"text-4xl","lg:text-6xl","font-bold","onreloadhover",3,"click"],[1,"lg:m-10","md:m-10"],["size","12","size-md","6","size-lg","6","class","flex flex-row justify-center relative",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",1,"m-2","z-10",3,"click"],[1,"bg-purple-300","p-4"],["name","chatbubble-outline",1,"w-full","h-full"],["id","ai-modal",1,"fixed","bottom-0","right-0","h-full","w-full","bg-black","bg-opacity-50","z-10","r"],[1,"h-2/3","md:h-1/2","lg:h-1/2","w-full","md:w-1/3","lg:w-1/3","bg-purple-300","p-4","absolute","right-0","bottom-0","z-50","flex","flex-col","rounded-tl-2xl","rounded-tr-2xl"],[1,"w-full","bg-purple-400","flex","flex-row","justify-center","items-center","p-2","mb-2","rounded-3xl"],[1,"flex","flex-row","justify-center","items-center","bg-purple-300","w-full","rounded-3xl"],[1,"text-white"],[1,"m-1"],[1,"flex","flex-row","justify-center","items-center","bg-purple-300","w-1/6","h-full","rounded-3xl",3,"click"],["name","close-outline"],[1,"flex-grow","overflow-y-auto","bg-purple-200","p-2","rounded-3xl"],[1,"rounded-3xl","bg-purple-400","w-2/3","m-1"],[1,"text-white","p-4"],[1,"rounded-3xl","bg-purple-600","w-2/3","m-1","ml-auto"],[1,"flex","flex-row","mt-2","p-2"],["placeholder","Ask...",1,"flex-grow","bg-purple-600","rounded-2xl"],[1,"w-1/3","bg-purple-800","rounded-3xl","flex","flex-row","justify-center","items-center","hover:bg-purple-400"],["size","12","size-md","6","size-lg","6",1,"flex","flex-row","justify-center","relative"],[1,"absolute","z-10","w-full","flex","flex-row","justify-end"],[1,"h-12","w-12","bg-purple-400","p-2",3,"id"],["name","color-wand-outline",1,"w-full","h-full",3,"click"],["triggerAction","hover",1,"w-96",3,"trigger"],[1,"w-full","h-96","p-6","flex","flex-col","justify-center","items-center"],[1,""],[1,"text-6xl","font-bold","text-white"],["echarts","",1,"demo-chart","h-full","w-full","min-w-full",3,"options"],[1,"ion-padding"]],template:function(t,o){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid")(3,"ion-row",2)(4,"ion-col",3)(5,"h1",4),e.EFF(6,"Traceroute Graph"),e.k0s()(),e.j41(7,"ion-col",5)(8,"ion-icon",6),e.bIt("click",function(){return o.refresh()}),e.k0s()()(),e.j41(9,"ion-row",7),e.DNE(10,C,12,6,"ion-col",8),e.k0s()(),e.j41(11,"ion-fab",9),e.bIt("click",function(){return o.toggleAiModal()}),e.j41(12,"ion-avatar",10),e.nrm(13,"ion-icon",11),e.k0s()()(),e.j41(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"ion-title",16),e.EFF(19,"DevProbe AI"),e.k0s()(),e.nrm(20,"div",17),e.j41(21,"div",18),e.bIt("click",function(){return o.toggleAiModal()}),e.nrm(22,"ion-icon",19),e.k0s()(),e.j41(23,"div",20)(24,"div",21)(25,"p",22),e.EFF(26,"DevProbe AI"),e.k0s()(),e.j41(27,"div",23)(28,"p",22),e.EFF(29,"my chat ajsjsajd jasjdjsad jas djasdnasjdjsa"),e.k0s()(),e.j41(30,"div",21)(31,"p",22),e.EFF(32,"DevProbe AI"),e.k0s()(),e.j41(33,"div",23)(34,"p",22),e.EFF(35,"my chat ajsjsajd jasjdjsad jas djasdnasjdjsa"),e.k0s()(),e.j41(36,"div",21)(37,"p",22),e.EFF(38,"DevProbe AI"),e.k0s()(),e.j41(39,"div",23)(40,"p",22),e.EFF(41,"my chat ajsjsajd jasjdjsad jas djasdnasjdjsa"),e.k0s()(),e.j41(42,"div",21)(43,"p",22),e.EFF(44,"DevProbe AI"),e.k0s()(),e.j41(45,"div",23)(46,"p",22),e.EFF(47,"my chat ajsjsajd jasjdjsad jas djasdnasjdjsa"),e.k0s()(),e.j41(48,"div",21)(49,"p",22),e.EFF(50,"DevProbe AI"),e.k0s()(),e.j41(51,"div",23)(52,"p",22),e.EFF(53,"my chat ajsjsajd jasjdjsad jas djasdnasjdjsa"),e.k0s()(),e.j41(54,"div",21)(55,"p",22),e.EFF(56,"DevProbe AI"),e.k0s()(),e.j41(57,"div",23)(58,"p",22),e.EFF(59,"my chat ajsjsajd jasjdjsad jas djasdnasjdjsa"),e.k0s()()(),e.j41(60,"div",24),e.nrm(61,"ion-textarea",25)(62,"div",17),e.j41(63,"div",26)(64,"span",16),e.EFF(65,"Send"),e.k0s()()()()()),2&t&&(e.Y8G("title","Traceroute Graph"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(9),e.Y8G("ngForOf",o.countries),e.R7$(4),e.AVh("hidden",!o.aiModal))},dependencies:[s.Sq,i.mC,i.b_,i.tN,i.hU,i.W9,i.Q8,i.lO,i.iq,i.ln,i.nc,i.BC,i.CF,i.Gw,f.p,P.$P],styles:["@keyframes _ngcontent-%COMP%_rotate90deg{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.onreloadhover[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_rotate90deg .9s linear infinite}"]}),g})()}];let E=(()=>{var r;class g{}return(r=g).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[h.iI.forChild(T),h.iI]}),g})();var k=l(5553);let D=(()=>{var r;class g{}return(r=g).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[s.MD,y.YN,i.bv,E,k.h]}),g})()}}]);