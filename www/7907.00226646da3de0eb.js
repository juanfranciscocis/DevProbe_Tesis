"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7907],{5553:(F,R,r)=>{r.d(R,{h:()=>p});var c=r(177),m=r(7863),a=r(4438);let p=(()=>{var _;class e{}return(_=e).\u0275fac=function(v){return new(v||_)},_.\u0275mod=a.$C({type:_}),_.\u0275inj=a.G2t({imports:[c.MD,m.bv]}),e})()},3241:(F,R,r)=>{r.d(R,{p:()=>p});var c=r(4438),m=r(177),a=r(7863);let p=(()=>{var _;class e{constructor(v){this.location=v,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(_=e).\u0275fac=function(v){return new(v||_)(c.rXU(m.aZ))},_.\u0275cmp=c.VBU({type:_,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(v,s){1&v&&(c.j41(0,"ion-header",0)(1,"ion-toolbar"),c.nrm(2,"ion-menu-button",1),c.j41(3,"ion-icon",2),c.bIt("click",function(){return s.goBack()}),c.k0s(),c.j41(4,"ion-title"),c.EFF(5),c.k0s()()()),2&v&&(c.Y8G("translucent",!0),c.R7$(5),c.JRh(s.title))},dependencies:[a.eU,a.iq,a.MC,a.BC,a.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},8453:(F,R,r)=>{r.d(R,{W:()=>a});var c=r(4438),m=r(7863);let a=(()=>{var p;class _{constructor(){this.title="Title"}ngOnInit(){}}return(p=_).\u0275fac=function(f){return new(f||p)},p.\u0275cmp=c.VBU({type:p,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(f,v){1&f&&(c.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),c.EFF(3),c.k0s()()()),2&f&&(c.R7$(3),c.JRh(v.title))},dependencies:[m.hU,m.ln]}),_})()},7907:(F,R,r)=>{r.r(R),r.d(R,{IncidentDetailsPageModule:()=>J});var c=r(177),m=r(4341),a=r(7863),p=r(7650),_=r(467),e=r(4438),f=r(2107),v=r(4624),s=r(7473),d=r(8453),l=r(3241);function u(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",25),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.state.toUpperCase())}}function h(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",26),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.state.toLocaleUpperCase())}}function C(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",26),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.urgency.toUpperCase())}}function I(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",27),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.urgency.toUpperCase())}}function E(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",28),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.urgency.toUpperCase())}}function D(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",25),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.urgency.toUpperCase())}}function b(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",26),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.org_impact.toUpperCase())}}function T(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",27),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.org_impact.toUpperCase())}}function j(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",28),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.org_impact.toUpperCase())}}function O(t,g){if(1&t&&(e.j41(0,"ion-card-content")(1,"ion-label",25),e.EFF(2),e.k0s()()),2&t){const o=e.XpG();e.R7$(2),e.JRh(o.incident.org_impact.toUpperCase())}}function k(t,g){if(1&t&&(e.j41(0,"div",12),e.nrm(1,"ion-icon",13),e.j41(2,"ion-label",8),e.EFF(3),e.k0s()()),2&t){const o=g.$implicit;e.R7$(3),e.JRh(o)}}function N(t,g){if(1&t&&(e.j41(0,"a",30),e.nrm(1,"img",33),e.k0s()),2&t){const o=e.XpG().$implicit;e.FS9("href",o.comment,e.B4B),e.R7$(),e.FS9("src",o.comment,e.B4B)}}function $(t,g){if(1&t&&e.nrm(0,"p",34),2&t){const o=e.XpG().$implicit;e.Y8G("innerHTML",o.comment,e.npT)}}function B(t,g){if(1&t&&(e.qex(0),e.j41(1,"ion-card",29)(2,"ion-card-content"),e.DNE(3,N,2,2,"a",30)(4,$,1,1),e.k0s(),e.j41(5,"ion-card-content",31)(6,"div",32),e.nrm(7,"ion-icon",13),e.j41(8,"ion-label",8),e.EFF(9),e.k0s()()()(),e.bVm()),2&t){const o=g.$implicit,i=e.XpG();e.R7$(),e.AVh("self-end",o.from===i.currentUser)("bg-gray-600",o.from===i.currentUser)("self-start",o.from!==i.currentUser)("bg-gray-800",o.from!==i.currentUser),e.R7$(2),e.vxM(3,"https:"===o.comment.split("/")[0]||"http:"===o.comment.split("/")[0]?3:4),e.R7$(6),e.JRh(o.from)}}function A(t,g){if(1&t){const o=e.RV6();e.j41(0,"ion-button",35),e.bIt("click",function(){e.eBV(o);const n=e.XpG(),y=e.sdS(82);return e.Njj(n.uploadFile(y))}),e.EFF(1,"Save Image"),e.k0s()}}function L(t,g){if(1&t){const o=e.RV6();e.j41(0,"ion-button",36),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.closeIncident())}),e.EFF(1,"Close Incident"),e.k0s()}}function S(t,g){if(1&t){const o=e.RV6();e.j41(0,"ion-button",37),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.closeIncident())}),e.EFF(1,"Close Incident"),e.k0s()}2&t&&e.Y8G("disabled",!0)}function w(t,g){if(1&t){const o=e.RV6();e.j41(0,"ion-col",5)(1,"ion-card",6)(2,"ion-card-title",7),e.EFF(3,"Go to Incident Postmortem"),e.k0s(),e.j41(4,"ion-card-content")(5,"p"),e.EFF(6,"Postmortem Culture: Learning from Failure. The postmortem is a retrospective of the incident, focusing on what went wrong, what can be learned, and how to prevent similar incidents in the future."),e.k0s()(),e.j41(7,"ion-card-content",22)(8,"ion-button",38),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.closeIncident())}),e.EFF(9,"Incident Postmortem"),e.k0s()()()()}}const G=[{path:"",component:(()=>{var t;class g{constructor(i,n,y,M,P){this.router=i,this.activatedRoute=n,this.loadingCtrl=y,this.incidentService=M,this.notificationService=P,this.productStep="",this.productObjective="",this.orgName="",this.currentUser="",this.incident={},this.newComment="",this.storage=(0,e.WQX)(f.wc),this.isImageLoaded=!1}ngOnInit(){}ionViewWillEnter(){this.getParams()}getParams(){this.activatedRoute.params.subscribe(n=>{this.productObjective=n.productObjective,this.productStep=n.step,this.incident=JSON.parse(n.incident)});const i=JSON.parse(localStorage.getItem("user"));this.orgName=i.orgName,this.currentUser=i.name,console.log(this.orgName),console.log(this.productObjective),console.log(this.productStep),console.log(this.incident.title)}addComment(){var i=this;return(0,_.A)(function*(){if(yield i.showLoading(),console.log("add comment"),console.log(i.currentUser),console.log(i.newComment),""===i.newComment)return;i.incident.report?i.incident.report.push({comment:i.newComment.replace(/\n/g,"<br>"),from:i.currentUser}):i.incident.report=[{comment:i.newComment.replace(/\n/g,"<br>"),from:i.currentUser}],yield i.incidentService.updateIncident(i.orgName,i.productObjective,i.productStep,i.incident);let n=[];n.push({role:"Incident Commander",member:i.incident.incidentCommander}),n.push({role:"Communications Lead",member:i.incident.communications_lead}),n.push({role:"Operations Lead",member:i.incident.operations_lead});for(let y=0;y<i.incident.operation_team.length;y++)n.push({role:"Operations Team Member",member:i.incident.operation_team[y]});console.log(n),yield i.notificationService.notifyIncidentUpdateToTeam(n,i.orgName),i.newComment="",i.hideLoading()})()}onImageLoad(){this.isImageLoaded=!0}uploadFile(i){var n=this;return(0,_.A)(function*(){if(!i.files)return;const y=i.files;for(let M=0;M<y.length;M++){const P=y.item(M);if(P){const X=(0,f.KR)(n.storage,`incident/${n.orgName}/${n.productObjective}/${n.productStep}/${P.name}`);yield(0,f.bp)(X,P).then(U=>{console.log("Uploaded a blob or file!",U.ref.fullPath),n.downloadFile(U.ref.fullPath).then(function(){var V=(0,_.A)(function*(x){n.newComment=x,yield n.addComment(),n.isImageLoaded=!1});return function(x){return V.apply(this,arguments)}}())})}}})()}downloadFile(i){var n=this;return(0,_.A)(function*(){let y="";return yield(0,f.qk)((0,f.KR)(n.storage,i)).then(M=>{console.log("File available at",M),y=M}),y})()}closeIncident(){}saveChanges(){}showLoading(){var i=this;return(0,_.A)(function*(){yield(yield i.loadingCtrl.create({})).present()})()}hideLoading(){var i=this;return(0,_.A)(function*(){yield i.loadingCtrl.dismiss()})()}}return(t=g).\u0275fac=function(i){return new(i||t)(e.rXU(p.Ix),e.rXU(p.nX),e.rXU(a.Xi),e.rXU(v.I),e.rXU(s.J))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-incident-details"]],decls:98,vars:27,consts:[["upload",""],["title","Incident Details"],[3,"fullscreen"],[3,"title"],[1,"lg:m-10","md:m-10"],["size","12","size-md","12","size-lg","12",1,""],[1,"p-5","flex","flex-col","justify-center","items-center"],[1,"text-2xl"],[1,""],["size","6","size-md","4","size-lg","4",1,""],["size","12","size-md","4","size-lg","4",1,""],["size","6","size-md","6","size-lg","6",1,""],[1,"flex","flex-row","justify-center","items-center"],["name","person-circle",1,"text-2xl"],[1,"p-5","flex","flex-col","justify-center","items-start"],[4,"ngFor","ngForOf"],[1,"flex","flex-row","justify-center","w-full"],["placeholder","Add a comment","type","text",1,"w-2/3",3,"ngModelChange","autoGrow","ngModel"],[3,"click","disabled"],["type","file",2,"display","none",3,"change"],["class","ion-margin","color","success","expand","block",3,"click",4,"ngIf"],["color","success",1,"w-1/3","m-5",3,"click"],[1,"flex","flex-row","justify-center","items-center","w-full"],["color","danger",1,"w-full"],["color","danger",1,"w-full",3,"disabled"],[1,"text-green-800"],[1,"text-red-800"],[1,"text-yellow-800"],[1,"text-yellow-600"],[1,"text-white"],["target","_blank",3,"href"],[1,"text-right"],[1,"flex","flex-row","justify-end","items-center"],["alt","image",1,"w-1/2",3,"src"],[1,"",3,"innerHTML"],["color","success","expand","block",1,"ion-margin",3,"click"],["color","danger",1,"w-full",3,"click"],["color","danger",1,"w-full",3,"click","disabled"],["color","primary",1,"w-full",3,"click"]],template:function(i,n){if(1&i){const y=e.RV6();e.nrm(0,"app-header-return",1),e.j41(1,"ion-content",2)(2,"ion-grid"),e.nrm(3,"app-title",3),e.j41(4,"ion-row",4)(5,"ion-col",5)(6,"ion-card",6)(7,"ion-card-title",7),e.EFF(8),e.k0s(),e.j41(9,"ion-card-content")(10,"p",8),e.EFF(11),e.k0s()()()()(),e.j41(12,"ion-row",4)(13,"ion-col",9)(14,"ion-card",6)(15,"ion-card-title",7),e.EFF(16,"Current Status"),e.k0s(),e.DNE(17,u,3,1,"ion-card-content")(18,h,3,1,"ion-card-content"),e.k0s()(),e.j41(19,"ion-col",9)(20,"ion-card",6)(21,"ion-card-title",7),e.EFF(22,"Urgency"),e.k0s(),e.DNE(23,C,3,1,"ion-card-content")(24,I,3,1,"ion-card-content")(25,E,3,1,"ion-card-content")(26,D,3,1,"ion-card-content"),e.k0s()(),e.j41(27,"ion-col",10)(28,"ion-card",6)(29,"ion-card-title",7),e.EFF(30," Organization Impact"),e.k0s(),e.DNE(31,b,3,1,"ion-card-content")(32,T,3,1,"ion-card-content")(33,j,3,1,"ion-card-content")(34,O,3,1,"ion-card-content"),e.k0s()()(),e.nrm(35,"app-title",3),e.j41(36,"ion-row",4)(37,"ion-col",11)(38,"ion-card",6)(39,"ion-card-title",7),e.EFF(40,"Incident Commander"),e.k0s(),e.j41(41,"ion-card-content")(42,"div",12),e.nrm(43,"ion-icon",13),e.j41(44,"ion-label",8),e.EFF(45),e.k0s()()()()(),e.j41(46,"ion-col",11)(47,"ion-card",6)(48,"ion-card-title",7),e.EFF(49,"Communications Leader"),e.k0s(),e.j41(50,"ion-card-content")(51,"div",12),e.nrm(52,"ion-icon",13),e.j41(53,"ion-label",8),e.EFF(54),e.k0s()()()()(),e.j41(55,"ion-col",5)(56,"ion-card",6)(57,"ion-card-title",7),e.EFF(58,"Operations Lead"),e.k0s(),e.j41(59,"ion-card-content")(60,"div",12),e.nrm(61,"ion-icon",13),e.j41(62,"ion-label",8),e.EFF(63),e.k0s()()(),e.nrm(64,"br"),e.j41(65,"ion-card-title",7),e.EFF(66,"Operations Team"),e.k0s(),e.j41(67,"ion-card-content"),e.Z7z(68,k,4,1,"div",12,e.fX1),e.k0s()()()(),e.nrm(70,"app-title",3),e.j41(71,"ion-row",4)(72,"ion-col",5)(73,"ion-card",14),e.DNE(74,B,10,10,"ng-container",15),e.k0s()(),e.j41(75,"ion-col",5)(76,"ion-card",6)(77,"div",16)(78,"ion-textarea",17),e.mxI("ngModelChange",function(P){return e.eBV(y),e.DH7(n.newComment,P)||(n.newComment=P),e.Njj(P)}),e.k0s(),e.j41(79,"ion-button",18),e.bIt("click",function(){e.eBV(y);const P=e.sdS(82);return e.Njj(P.click())}),e.EFF(80," Add Data "),e.j41(81,"input",19,0),e.bIt("change",function(){return e.eBV(y),e.Njj(n.onImageLoad())}),e.k0s()(),e.DNE(83,A,2,0,"ion-button",20),e.j41(84,"ion-button",21),e.bIt("click",function(){return e.eBV(y),e.Njj(n.addComment())}),e.EFF(85,"Add Comment"),e.k0s()()()()(),e.j41(86,"ion-row",4)(87,"ion-col",5)(88,"ion-card",6)(89,"ion-card-title",7),e.EFF(90,"Change Incident State"),e.k0s(),e.j41(91,"ion-card-content")(92,"p"),e.EFF(93,"Change the state of the incident to closed or open.Only the incident commander can change the state of the incident."),e.k0s()(),e.j41(94,"ion-card-content",22),e.DNE(95,L,2,0,"ion-button",23)(96,S,2,1,"ion-button",24),e.k0s()()(),e.DNE(97,w,10,0,"ion-col",5),e.k0s()()()}2&i&&(e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Incident Details"),e.R7$(5),e.JRh(n.incident.title),e.R7$(3),e.JRh(n.incident.description),e.R7$(6),e.vxM(17,"open"===n.incident.state?17:-1),e.R7$(),e.vxM(18,"closed"===n.incident.state?18:-1),e.R7$(5),e.vxM(23,"Critical"===n.incident.urgency?23:-1),e.R7$(),e.vxM(24,"High"===n.incident.urgency?24:-1),e.R7$(),e.vxM(25,"Medium"===n.incident.urgency?25:-1),e.R7$(),e.vxM(26,"Low"===n.incident.urgency?26:-1),e.R7$(5),e.vxM(31,"Extensive/Widespread"===n.incident.org_impact?31:-1),e.R7$(),e.vxM(32,"Significant/Large"===n.incident.org_impact?32:-1),e.R7$(),e.vxM(33,"Moderate/Limited"===n.incident.org_impact?33:-1),e.R7$(),e.vxM(34,"Minor/Localized"===n.incident.org_impact?34:-1),e.R7$(),e.Y8G("title","Incident Team"),e.R7$(10),e.JRh(n.incident.incidentCommander),e.R7$(9),e.JRh(n.incident.communications_lead),e.R7$(9),e.JRh(n.incident.operations_lead),e.R7$(5),e.Dyx(n.incident.operation_team),e.R7$(2),e.Y8G("title","Incident Progress"),e.R7$(4),e.Y8G("ngForOf",n.incident.report),e.R7$(4),e.Y8G("autoGrow",!0),e.R50("ngModel",n.newComment),e.R7$(),e.Y8G("disabled",n.isImageLoaded),e.R7$(4),e.Y8G("ngIf",n.isImageLoaded),e.R7$(12),e.vxM(95,n.currentUser===n.incident.incidentCommander&&"open"===n.incident.state?95:-1),e.R7$(),e.vxM(96,n.currentUser!==n.incident.incidentCommander||"closed"===n.incident.state?96:-1),e.R7$(),e.vxM(97,"closed"===n.incident.state?97:-1))},dependencies:[c.Sq,c.bT,m.BC,m.vS,a.Jm,a.b_,a.I9,a.tN,a.hU,a.W9,a.lO,a.iq,a.he,a.ln,a.nc,a.Gw,d.W,l.p]}),g})()}];let K=(()=>{var t;class g{}return(t=g).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(G),p.iI]}),g})();var H=r(5553);let J=(()=>{var t;class g{}return(t=g).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[c.MD,m.YN,a.bv,K,H.h]}),g})()},4796:(F,R,r)=>{r.d(R,{u:()=>_});var c=r(467),m=r(8737),a=r(4262),p=r(4438);let _=(()=>{var e;class f{constructor(s,d){this.auth=s,this.firestore=d}registerUser(s){var d=this;return(0,c.A)(function*(){try{const l=yield(0,m.eJ)(d.auth,s.email,s.password);return l.user?(yield(0,a.BN)((0,a.H9)(d.firestore,"users",l.user.uid),{email:s.email,name:s.name,orgName:s.orgName,uid:l.user.uid}),yield(0,a.BN)((0,a.H9)(d.firestore,"teams",`${s.orgName}`),{name:s.orgName,members:[l.user.uid]}),l):null}catch{return null}})()}loginUser(s){var d=this;return(0,c.A)(function*(){try{var l;const u=yield(0,m.x9)(d.auth,s.email,s.password);if(null!==(l=u.user)&&void 0!==l&&l.uid){const h=yield(0,a.x7)((0,a.H9)(d.firestore,"users",u.user.uid));if(h.exists())return localStorage.setItem("user",JSON.stringify(h.data())),u}}catch(u){console.error(u)}return null})()}logoutUser(){var s=this;return(0,c.A)(function*(){yield s.auth.signOut()})()}addMember(s){var d=this;return(0,c.A)(function*(){try{const l=yield(0,m.eJ)(d.auth,s.email,s.password);if(!l.user)return!1;const u={email:s.email,name:s.name,orgName:s.orgName,uid:l.user.uid};return yield(0,a.BN)((0,a.H9)(d.firestore,"users",l.user.uid),u),u}catch{return!1}})()}}return(e=f).\u0275fac=function(s){return new(s||e)(p.KVO(m.Nj),p.KVO(a._7))},e.\u0275prov=p.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),f})()},7473:(F,R,r)=>{r.d(R,{J:()=>e});var c=r(467),m=r(4262),a=r(4438),p=r(1626),_=r(5092);let e=(()=>{var f;class v{constructor(d,l,u){this.firestore=d,this.http=l,this.teamService=u}saveNotificationID(d,l){var u=this;return(0,c.A)(function*(){const h=(0,m.H9)(u.firestore,"users",d.uid),C=yield(0,m.x7)(h);if(C.exists()){const I=C.data();return I.notificationID=l,yield(0,m.BN)(h,I),!0}return console.log("No such document!"),!1})()}getNotificationUser(d){var l=this;return(0,c.A)(function*(){const u=(0,m.H9)(l.firestore,"users",d.uid),h=yield(0,m.x7)(u);if(h.exists()){const C=h.data();return C.notificationID?C.notificationID:""}return console.log("No such document!"),null})()}notifyIncidentToUser(d,l){var u=this;return(0,c.A)(function*(){try{const h=yield u.teamService.getTeamByOrganization(l),C=d.map(D=>D.member),I=h.filter(D=>C.includes(D.name));console.log("team",I);const E="https://devprobeapi.onrender.com/sendNotification";for(let D of I){let b=yield u.getNotificationUser(D);if(console.log("sid",b),""!==b){const j={sid:b,title:"New Incident",type:"new_incident",message:`Hey ${D.name}, you have been assigned a new incident your incident role is ${d.find(O=>O.member===D.name).role}`,target:"https://devprobe-89481.web.app/incident-manager-chooser"};yield u.http.post(E,j).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(h){console.log(h)}})()}notifyIncidentUpdateToTeam(d,l){var u=this;return(0,c.A)(function*(){try{const h=yield u.teamService.getTeamByOrganization(l),C=d.map(D=>D.member),I=h.filter(D=>C.includes(D.name));console.log("team",I);const E="https://devprobeapi.onrender.com/sendNotification";for(let D of I){let b=yield u.getNotificationUser(D);if(console.log("sid",b),""!==b){const j={sid:b,title:"Incident Update",type:"update_incident",message:`Hey ${D.name}, there are updates to your incident`,target:"https://devprobe-89481.web.app/incident-manager-chooser"};yield u.http.post(E,j).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(h){console.log(h)}})()}}return(f=v).\u0275fac=function(d){return new(d||f)(a.KVO(m._7),a.KVO(p.Qq),a.KVO(_.O))},f.\u0275prov=a.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),v})()},5092:(F,R,r)=>{r.d(R,{O:()=>_});var c=r(467),m=r(4262),a=r(4438),p=r(4796);let _=(()=>{var e;class f{constructor(s,d){this.firestore=s,this.authService=d}getTeamByOrganization(s){var d=this;return(0,c.A)(function*(){let l=(0,m.H9)(d.firestore,"teams",s);const C=(yield(0,m.x7)(l)).data();let I=[];for(let E=0;E<C.members.length;E++){l=(0,m.H9)(d.firestore,"users",C.members[E]);const b=(yield(0,m.x7)(l)).data();I.push(b)}return I})()}removeMember(s,d){var l=this;return(0,c.A)(function*(){try{let u=(0,m.H9)(l.firestore,"teams",s);const I=(yield(0,m.x7)(u)).data();let E=I.members.filter(b=>b!==d);return yield(0,m.BN)(u,{name:I.name,members:E}),u=(0,m.H9)(l.firestore,"users",d),yield(0,m.BN)(u,{}),yield l.authService,!0}catch{return!1}})()}addMember(s){var d=this;return(0,c.A)(function*(){try{const l=yield d.authService.addMember(s);if(!l)return!1;const u=(0,m.H9)(d.firestore,"teams",s.orgName),C=(yield(0,m.x7)(u)).data();console.log(C);const I=C;let E=I.members;return E.push(l.uid),console.log(E),yield(0,m.mZ)(u,{name:I.name,members:E}),l.uid}catch{return!1}})()}}return(e=f).\u0275fac=function(s){return new(s||e)(a.KVO(m._7),a.KVO(p.u))},e.\u0275prov=a.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),f})()}}]);