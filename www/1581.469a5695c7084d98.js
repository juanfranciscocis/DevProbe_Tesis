"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1581],{1581:(S,p,c)=>{c.r(p),c.d(p,{TraceResultsPageModule:()=>$});var f=c(177),h=c(4341),l=c(7863),g=c(305),d=c(467),e=c(4438),R=c(2588),T=c(3661),y=c(8453),v=c(3241);function F(r,n){1&r&&(e.j41(0,"ion-card-title"),e.EFF(1,"No city found"),e.k0s(),e.j41(2,"ion-card-subtitle"),e.EFF(3,"No country found"),e.k0s())}function j(r,n){1&r&&(e.j41(0,"ion-card-subtitle"),e.EFF(1,"RTT : Not calculated"),e.k0s())}function P(r,n){if(1&r&&(e.j41(0,"ion-card-subtitle"),e.EFF(1),e.k0s()),2&r){const o=e.XpG().$implicit;e.R7$(),e.SpI("RTT : ",o.result[0].rtt," ms")}}function x(r,n){if(1&r&&(e.j41(0,"ion-col",16)(1,"ion-card",17)(2,"ion-card-subtitle"),e.EFF(3),e.k0s(),e.DNE(4,F,4,0),e.j41(5,"ion-card-title"),e.EFF(6),e.k0s(),e.j41(7,"ion-card-subtitle"),e.EFF(8),e.k0s(),e.DNE(9,j,2,0,"ion-card-subtitle")(10,P,2,1),e.j41(11,"ion-card-subtitle"),e.EFF(12),e.k0s()()()),2&r){const o=n.$implicit;e.R7$(3),e.SpI("Hop",o.hop,""),e.R7$(),e.vxM(4,o.result[0].x?4:-1),e.R7$(2),e.SpI("",o.result[0].form_city," "),e.R7$(2),e.JRh(o.result[0].from_country),e.R7$(),e.vxM(9,o.result[0].rtt?10:9),e.R7$(3),e.Lme("Latitude : ",o.result[0].from_latitude,", Longitude : ",o.result[0].from_longitude,"")}}function E(r,n){if(1&r&&(e.j41(0,"ion-row",13)(1,"ion-col",14)(2,"h1",15),e.EFF(3),e.k0s()()(),e.j41(4,"ion-row",13),e.Z7z(5,x,13,7,"ion-col",16,e.fX1),e.k0s()),2&r){const o=n.$implicit;e.R7$(3),e.Lme("FROM ",o.src_city,", ",o.src_country,""),e.R7$(2),e.Dyx(o.result)}}const M=[{path:"",component:(()=>{var r;class n{constructor(t,s,a,i,u,m){this.ripeTraceService=t,this.route=s,this.router=a,this.locationTraceService=i,this.loadingCtrl=u,this.alertCtrl=m,this.ripeResults=[],this.description="",this.productObjective="",this.orgName="",this.measurementID=""}ngOnInit(){return(0,d.A)(function*(){})()}ionViewWillEnter(){var t=this;return(0,d.A)(function*(){t.route.queryParams.subscribe(i=>{console.log(i),t.description=i.description,t.productObjective=i.productObjective});const s=localStorage.getItem("user");if(!s)return;const a=JSON.parse(s);t.orgName=a.orgName,yield t.ripeTraceService.getHistoryResults(t.orgName,t.productObjective).then(i=>{console.log(i);let u=[];for(let m=0;m<i.length;m++)i[m].id==t.description&&u.push(i[m].data.data);t.ripeResults=u[0],t.measurementID=t.ripeResults[0].id,console.log(t.ripeResults),console.log(t.measurementID)})})()}getMoreResults(){var t=this;return(0,d.A)(function*(){t.ripeResults=[];try{yield t.showLoading();const s=yield t.ripeTraceService.getTraceResults(t.measurementID);if(!s||0===s.length)return yield t.hideLoading(),yield t.showAlert("No trace results found","Error"),void(yield t.getMoreResults());for(let i of s)try{i=yield t.locationTraceService.getLocationDestSrc(i),i=yield t.locationTraceService.getLocationFrom(i),t.ripeResults.push(i)}catch(u){console.log(u)}(yield t.ripeTraceService.saveMeasurementResults(t.orgName,t.productObjective,t.description,t.ripeResults))?(yield t.hideLoading(),yield t.showAlert("Trace results saved successfully","Success")):(yield t.hideLoading(),yield t.showAlert("Error saving trace results","Error"))}catch(s){console.log(s),yield t.hideLoading()}})()}goToMap(){this.router.navigate(["/show-map-trace"],{queryParams:{description:this.description,productObjective:this.productObjective,orgName:this.orgName}})}showLoading(){var t=this;return(0,d.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,d.A)(function*(){yield t.loadingCtrl.dismiss()})()}showAlert(t,s){var a=this;return(0,d.A)(function*(){const i=yield a.alertCtrl.create({header:s,message:t,buttons:["OK"]});return yield i.present(),yield i.onDidDismiss(),!0})()}}return(r=n).\u0275fac=function(t){return new(t||r)(e.rXU(R.N),e.rXU(g.nX),e.rXU(g.Ix),e.rXU(T.e),e.rXU(l.Xi),e.rXU(l.hG))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-trace-results"]],decls:27,vars:5,consts:[[3,"title"],[3,"fullscreen"],[1,"text-xs","m-2","lg:m-10","lg:text-2xl","md:text-2xl","md:m-10"],[3,"translucent"],["size","4",1,"flex","flex-row","justify-start","items-center"],[1,"text-sm","hidden","lg:flex","md:flex"],["size","8",1,"flex","flex-row","justify-end"],["size","small","color","light",3,"click"],["name","refresh",1,"m-2"],["size","small","color","primary",3,"click"],["name","arrow-forward",1,"m-2"],["size","12",1,"flex","lg:hidden","md:hidden","flex-row","justify-center","items-center"],[1,"text-sm"],[1,"lg:m-10","md:m-10"],["size","12"],[1,"text-2xl"],["size","12","size-md","4","size-lg","4",1,"flex","flex-row","justify-center"],[1,"p-10","min-w-full"]],template:function(t,s){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"h2",2),e.EFF(5),e.k0s(),e.nrm(6,"br"),e.Z7z(7,E,7,2,null,null,e.fX1),e.k0s()(),e.j41(9,"ion-footer",3)(10,"ion-toolbar")(11,"ion-grid")(12,"ion-row")(13,"ion-col",4)(14,"h1",5),e.EFF(15,"No city found might be due to host protections!"),e.k0s()(),e.j41(16,"ion-col",6)(17,"ion-button",7),e.bIt("click",function(){return s.getMoreResults()}),e.EFF(18,"GET MORE RESULTS "),e.nrm(19,"ion-icon",8),e.k0s(),e.j41(20,"ion-button",9),e.bIt("click",function(){return s.goToMap()}),e.EFF(21,"GO TO MAP "),e.nrm(22,"ion-icon",10),e.k0s()()(),e.j41(23,"ion-row")(24,"ion-col",11)(25,"h1",12),e.EFF(26,"No city found might be due to host protections!"),e.k0s()()()()()()),2&t&&(e.Y8G("title","Trace Results for "+s.description),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Test Results"),e.R7$(2),e.SpI("Results for ",s.description,""),e.R7$(2),e.Dyx(s.ripeResults),e.R7$(2),e.Y8G("translucent",!0))},dependencies:[l.Jm,l.b_,l.HW,l.tN,l.hU,l.W9,l.M0,l.lO,l.iq,l.ln,l.ai,y.W,v.p]}),n})()}];let b=(()=>{var r;class n{}return(r=n).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[g.iI.forChild(M),g.iI]}),n})();var N=c(5553);let $=(()=>{var r;class n{}return(r=n).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[f.MD,h.YN,l.bv,b,N.h]}),n})()}}]);