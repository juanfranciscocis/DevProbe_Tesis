"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7907],{5553:(C,v,l)=>{l.d(v,{h:()=>h});var d=l(177),f=l(7863),c=l(4438);let h=(()=>{var u;class e{}return(u=e).\u0275fac=function(p){return new(p||u)},u.\u0275mod=c.$C({type:u}),u.\u0275inj=c.G2t({imports:[d.MD,f.bv]}),e})()},3241:(C,v,l)=>{l.d(v,{p:()=>h});var d=l(4438),f=l(177),c=l(7863);let h=(()=>{var u;class e{constructor(p){this.location=p,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(u=e).\u0275fac=function(p){return new(p||u)(d.rXU(f.aZ))},u.\u0275cmp=d.VBU({type:u,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(p,j){1&p&&(d.j41(0,"ion-header",0)(1,"ion-toolbar"),d.nrm(2,"ion-menu-button",1),d.j41(3,"ion-icon",2),d.bIt("click",function(){return j.goBack()}),d.k0s(),d.j41(4,"ion-title"),d.EFF(5),d.k0s()()()),2&p&&(d.Y8G("translucent",!0),d.R7$(5),d.JRh(j.title))},dependencies:[c.eU,c.iq,c.MC,c.BC,c.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},7907:(C,v,l)=>{l.r(v),l.d(v,{GraphTracePageModule:()=>F});var d=l(177),f=l(4341),c=l(7863),h=l(305),u=l(467),e=l(4438),_=l(9032),p=l(2588),j=l(3241),G=l(4688);const b=["messagesContainer"];function P(n,m){if(1&n&&(e.j41(0,"ion-content",38),e.EFF(1),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.SpI("Ask DevProbe AI to analyze the traceroute data for ",i,".")}}function R(n,m){if(1&n&&(e.j41(0,"ion-content",38),e.EFF(1),e.k0s()),2&n){const i=e.XpG().$implicit;e.R7$(),e.SpI("Ask DevProbe AI to analyze the traceroute data for ",i,", is there a problem?")}}function w(n,m){if(1&n){const i=e.RV6();e.j41(0,"ion-col",27)(1,"div",28)(2,"ion-avatar",29)(3,"ion-icon",30),e.bIt("click",function(){const o=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.toggleAiModal(o,!0))}),e.k0s()(),e.nrm(4,"div",25),e.j41(5,"ion-avatar",31)(6,"ion-icon",32),e.bIt("click",function(){const o=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.toggleAiModal(o))}),e.k0s()()(),e.j41(7,"ion-popover",33),e.DNE(8,P,2,1,"ng-template"),e.k0s(),e.j41(9,"ion-popover",33),e.DNE(10,R,2,1,"ng-template"),e.k0s(),e.j41(11,"ion-card",34)(12,"ion-card-title",35)(13,"h1",36),e.EFF(14),e.k0s()(),e.nrm(15,"br")(16,"div",37),e.k0s()()}if(2&n){const i=m.$implicit,t=e.XpG();e.R7$(2),e.Mz_("id","hover-trigger-",i,"-danger"),e.R7$(3),e.Mz_("id","hover-trigger-",i,""),e.R7$(2),e.Mz_("trigger","hover-trigger-",i,""),e.R7$(2),e.Mz_("trigger","hover-trigger-",i,"-danger"),e.R7$(5),e.JRh(i),e.R7$(2),e.Y8G("options",t.countryOptions[i])}}function k(n,m){if(1&n&&(e.j41(0,"div",42)(1,"p",43),e.EFF(2),e.k0s()()),2&n){const i=e.XpG().$implicit;e.R7$(2),e.JRh(i.message)}}function A(n,m){if(1&n&&(e.j41(0,"div",44)(1,"p",43),e.EFF(2),e.k0s()()),2&n){const i=e.XpG().$implicit;e.R7$(2),e.JRh(i.message)}}function E(n,m){if(1&n&&(e.j41(0,"div",39),e.DNE(1,k,3,1,"div",40)(2,A,3,1,"div",41),e.k0s()),2&n){const i=m.$implicit;e.R7$(),e.Y8G("ngIf","User"===i.from),e.R7$(),e.Y8G("ngIf","AI"===i.from)}}const O=[{path:"",component:(()=>{var n;class m{constructor(t,o){this.ripeService=t,this.route=o,this.orgName="",this.productObjective="",this.user={},this.data=[],this.countries=[],this.countryOptions={},this.aiModal=!1,this.message="",this.vertexAI=(0,e.WQX)(_.L9),this.model=(0,_.oc)(this.vertexAI,{model:"gemini-1.5-flash"}),this.chat=this.model.startChat({history:[{role:"user",parts:[{text:"Hola, desde ahora en adelante quiero que seas un modelo experto en Software Quality Assurance y analista de datos"}]},{role:"model",parts:[{text:"Soy un modelo experto en Software Quality Assurance, de igual forma tengo un masterado en anla\xedtica de datos \xbfEn qu\xe9 puedo ayudarte?"}]},{role:"user",parts:[{text:"Gracias, te voy a entregar un json con datos en unos minutos, necesito que lo analices y me des un resumen de los datos, este json contiene datos de varios traceroutes por un pais especifico, imagina que ,tu analisis tiene que ser detallado, si encuentras inconsistencias en los datos, por favor mencionalas, en caso de que creas que puede haber un error de ruteo por favor mencionalo, si encuentras algo interesante, por favor mencionalo, en resumen, necesito un analisis detallado de los datos"}]},{role:"model",parts:[{text:"Claro, env\xedame el json y yo me encargo de analizarlo, desde ahora me voy a llamar DevProbeAI, siempre recordare mi nombre (DevProbeAI) ."}]}]}),this.messages=[]}ionViewWillEnter(){var t=this;return(0,u.A)(function*(){t.route.queryParams.subscribe(r=>{t.productObjective=r.product});const o=localStorage.getItem("user");o&&(t.user=JSON.parse(o),t.orgName=t.user.orgName,t.data=[],t.getResultsHistoryforRtt().then(()=>{t.groupByDate().then(()=>{t.groupByCountry().then(()=>{t.populateCountries(),t.generateCountryOptions()})})}))})()}getResultsHistoryforRtt(){var t=this;return(0,u.A)(function*(){yield t.ripeService.getHistoryResults(t.orgName,t.productObjective).then(o=>{for(let r=0;r<o.length;r++){let s=o[r].id.split("-");t.data.push({id:s[1],date:s[3]+"/"+s[2]+"/"+s[4],time:s[5],data:o[r].data.data})}console.log(t.data)})})()}groupByDate(){var t=this;return(0,u.A)(function*(){let o={};for(let a=0;a<t.data.length;a++){let g=t.data[a].date;o[g]||(o[g]=[]),o[g].push(...t.data[a].data)}const r=Object.keys(o).sort((a,g)=>new Date(a).getTime()-new Date(g).getTime());let s={};for(let a of r)s[a]=o[a];t.data=s,console.log(t.data)})()}groupByCountry(){var t=this;return(0,u.A)(function*(){let o={};for(let r in t.data){let s=t.data[r];o[r]||(o[r]={});for(let a=0;a<s.length;a++){let g=s[a].src_country;"No country found"!==g&&(o[r][g]||(o[r][g]=[]),o[r][g].push(s[a]))}}t.data=o,console.log(t.data)})()}populateCountries(){var t=this;return(0,u.A)(function*(){const o=new Set;for(let r in t.data)for(let s in t.data[r])o.add(s);t.countries=Array.from(o),console.log(t.countries)})()}getRandomColor(){let o="#";for(let r=0;r<6;r++)o+="0123456789ABCDEF"[Math.floor(16*Math.random())];return o}generateCountryOptions(){for(let t of this.countries){const o=[],r=[];for(let a in this.data){let g=0,x=0;if(this.data[a][t]){for(let T=0;T<this.data[a][t].length;T++){let M=this.data[a][t][T];for(let y=0;y<M.result.length;y++)"number"==typeof M.result[y].result[0].rtt&&(g+=M.result[y].result[0].rtt,x++)}x>0&&(o.push(a),r.push(g/x))}}const s=this.getRandomColor();this.countryOptions[t]={legend:{data:[t],align:"left",backgroundColor:"rgba(255, 255, 255, 0.9)"},tooltip:{},xAxis:{data:o,silent:!1,splitLine:{show:!1}},yAxis:{},series:[{name:t,type:"bar",data:r,itemStyle:{color:s},animationDelay:a=>10*a}],animationEasing:"elasticOut",animationDelayUpdate:a=>5*a}}}refresh(){window.location.reload()}ngOnInit(){}toggleAiModal(t,o){var r=this;return(0,u.A)(function*(){if(r.aiModal=!r.aiModal,t){console.log("Country: "+t);const s=r.countryOptions[t].series[0].data,a=r.countryOptions[t].xAxis.data;console.log(s),console.log(a);const g={country:t,data:{date:a,data:s}};yield r.sendMessage(g)}})()}ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){if(this.messagesContainer)try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch(t){console.error("Error al hacer scroll:",t)}}sendMessage(t){var o=this;return(0,u.A)(function*(){if(t){console.log("Country data:",t);const s=JSON.stringify(t),a=yield o.chat.sendMessage(s);return o.messages.push({message:a.response.text(),from:"AI"}),console.log("Message:",o.message),void(o.message="")}if(""===o.message)return void console.log("Message is empty");o.messages.push({message:o.message,from:"User"});const r=yield o.chat.sendMessage(o.message);o.messages.push({message:r.response.text(),from:"AI"}),o.message=""})()}}return(n=m).\u0275fac=function(t){return new(t||n)(e.rXU(p.N),e.rXU(h.nX))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-graph-trace"]],viewQuery:function(t,o){if(1&t&&e.GBs(b,5),2&t){let r;e.mGM(r=e.lsd())&&(o.messagesContainer=r.first)}},decls:32,vars:7,consts:[["messagesContainer",""],[3,"title"],[3,"fullscreen"],[1,"lg:m-10"],["size","6","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"],["size","6","size-md","6","size-lg","6",1,"text-right"],["name","refresh",1,"text-4xl","lg:text-6xl","font-bold","onreloadhover",3,"click"],[1,"lg:m-10","md:m-10"],["size","12","size-md","6","size-lg","6","class","flex flex-row justify-center relative",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",1,"m-2","z-10",3,"click"],[1,"bg-purple-300","p-4"],["name","chatbubble-outline",1,"w-full","h-full"],["id","ai-modal",1,"fixed","bottom-0","right-0","h-full","w-full","bg-black","bg-opacity-50","z-10","r"],[1,"h-2/3","md:h-2/3","lg:h-2/3","w-full","md:w-1/3","lg:w-1/3","bg-purple-300","p-4","absolute","right-0","bottom-0","z-50","flex","flex-col","rounded-tl-2xl","rounded-tr-2xl"],[1,"w-full","bg-purple-400","flex","flex-row","justify-center","items-center","p-2","mb-2","rounded-3xl"],[1,"flex","flex-row","p-2","items-center","bg-purple-300","w-full","rounded-3xl","h-full"],[1,"text-white"],[1,"m-2"],[1,"flex","flex-row","justify-center","items-center","bg-purple-300","w-1/6","h-full","rounded-3xl",3,"click"],["name","close-outline"],[1,"flex-grow","overflow-y-auto","bg-purple-200","p-2","rounded-3xl"],["class","flex flex-col",4,"ngFor","ngForOf"],[1,"flex","flex-row","mt-2","p-2"],["placeholder","Ask...",1,"flex-grow","bg-purple-600","rounded-2xl",3,"ngModelChange","ngModel"],[1,"m-1"],[1,"w-1/3","bg-purple-800","rounded-3xl","flex","flex-row","justify-center","items-center","hover:bg-purple-400",3,"click"],["size","12","size-md","6","size-lg","6",1,"flex","flex-row","justify-center","relative"],[1,"absolute","z-10","w-full","flex","flex-row","justify-end"],[1,"h-12","w-12","bg-red-600","p-2",3,"id"],["name","warning-outline",1,"w-full","h-full",3,"click"],[1,"h-12","w-12","bg-purple-400","p-2",3,"id"],["name","color-wand-outline",1,"w-full","h-full",3,"click"],["triggerAction","hover",1,"w-96",3,"trigger"],[1,"w-full","h-96","p-6","flex","flex-col","justify-center","items-center"],[1,""],[1,"text-6xl","font-bold","text-white"],["echarts","",1,"demo-chart","h-full","w-full","min-w-full",3,"options"],[1,"ion-padding"],[1,"flex","flex-col"],["class","rounded-3xl bg-purple-600 w-2/3 m-1 ml-auto",4,"ngIf"],["class","rounded-3xl bg-purple-400 w-2/3 m-1",4,"ngIf"],[1,"rounded-3xl","bg-purple-600","w-2/3","m-1","ml-auto"],[1,"text-white","p-4"],[1,"rounded-3xl","bg-purple-400","w-2/3","m-1"]],template:function(t,o){if(1&t){const r=e.RV6();e.nrm(0,"app-header-return",1),e.j41(1,"ion-content",2)(2,"ion-grid")(3,"ion-row",3)(4,"ion-col",4)(5,"h1",5),e.EFF(6,"Traceroute Graph"),e.k0s()(),e.j41(7,"ion-col",6)(8,"ion-icon",7),e.bIt("click",function(){return e.eBV(r),e.Njj(o.refresh())}),e.k0s()()(),e.j41(9,"ion-row",8),e.DNE(10,w,17,10,"ion-col",9),e.k0s()(),e.j41(11,"ion-fab",10),e.bIt("click",function(){return e.eBV(r),e.Njj(o.toggleAiModal())}),e.j41(12,"ion-avatar",11),e.nrm(13,"ion-icon",12),e.k0s()()(),e.j41(14,"div",13)(15,"div",14)(16,"div",15)(17,"div",16)(18,"h1",17),e.EFF(19,"DevProbe AI"),e.k0s()(),e.nrm(20,"div",18),e.j41(21,"div",19),e.bIt("click",function(){return e.eBV(r),e.Njj(o.toggleAiModal())}),e.nrm(22,"ion-icon",20),e.k0s()(),e.j41(23,"div",21,0),e.DNE(25,E,3,2,"div",22),e.k0s(),e.j41(26,"div",23)(27,"ion-textarea",24),e.mxI("ngModelChange",function(a){return e.eBV(r),e.DH7(o.message,a)||(o.message=a),e.Njj(a)}),e.k0s(),e.nrm(28,"div",25),e.j41(29,"div",26),e.bIt("click",function(){return e.eBV(r),e.Njj(o.sendMessage())}),e.j41(30,"span",17),e.EFF(31,"Send"),e.k0s()()()()()}2&t&&(e.Y8G("title","Traceroute Graph"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(9),e.Y8G("ngForOf",o.countries),e.R7$(4),e.AVh("hidden",!o.aiModal),e.R7$(11),e.Y8G("ngForOf",o.messages),e.R7$(2),e.R50("ngModel",o.message))},dependencies:[d.Sq,d.bT,f.BC,f.vS,c.mC,c.b_,c.tN,c.hU,c.W9,c.Q8,c.lO,c.iq,c.ln,c.nc,c.CF,c.Gw,j.p,G.$P],styles:["@keyframes _ngcontent-%COMP%_rotate90deg{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.onreloadhover[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_rotate90deg .9s linear infinite}"]}),m})()}];let D=(()=>{var n;class m{}return(n=m).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[h.iI.forChild(O),h.iI]}),m})();var I=l(5553);let F=(()=>{var n;class m{}return(n=m).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.MD,f.YN,c.bv,D,I.h]}),m})()}}]);