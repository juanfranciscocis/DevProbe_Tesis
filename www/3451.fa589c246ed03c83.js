"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3451],{5553:(y,T,r)=>{r.d(T,{h:()=>d});var c=r(177),h=r(7863),l=r(4438);let d=(()=>{var a;class e{}return(a=e).\u0275fac=function(m){return new(m||a)},a.\u0275mod=l.$C({type:a}),a.\u0275inj=l.G2t({imports:[c.MD,h.bv]}),e})()},3241:(y,T,r)=>{r.d(T,{p:()=>d});var c=r(4438),h=r(177),l=r(7863);let d=(()=>{var a;class e{constructor(m){this.location=m,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(a=e).\u0275fac=function(m){return new(m||a)(c.rXU(h.aZ))},a.\u0275cmp=c.VBU({type:a,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(m,f){1&m&&(c.j41(0,"ion-header",0)(1,"ion-toolbar"),c.nrm(2,"ion-menu-button",1),c.j41(3,"ion-icon",2),c.bIt("click",function(){return f.goBack()}),c.k0s(),c.j41(4,"ion-title"),c.EFF(5),c.k0s()()()),2&m&&(c.Y8G("translucent",!0),c.R7$(5),c.JRh(f.title))},dependencies:[l.eU,l.iq,l.MC,l.BC,l.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},8453:(y,T,r)=>{r.d(T,{W:()=>l});var c=r(4438),h=r(7863);let l=(()=>{var d;class a{constructor(){this.title="Title"}ngOnInit(){}}return(d=a).\u0275fac=function(g){return new(g||d)},d.\u0275cmp=c.VBU({type:d,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(g,m){1&g&&(c.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),c.EFF(3),c.k0s()()()),2&g&&(c.R7$(3),c.JRh(m.title))},dependencies:[h.hU,h.ln]}),a})()},3451:(y,T,r)=>{r.r(T),r.d(T,{TraceTestPageModule:()=>P});var c=r(177),h=r(4341),l=r(7863),d=r(7650),a=r(467),e=r(4438),g=r(2588),m=r(3661),f=r(8453),R=r(3241);function v(i,p){if(1&i){const u=e.RV6();e.j41(0,"ion-chip",19),e.bIt("click",function(){const n=e.eBV(u).$implicit,s=e.XpG();return e.Njj(s.selectCountry(n))}),e.EFF(1),e.k0s()}if(2&i){const u=p.$implicit,t=e.XpG();e.Y8G("color",t.isCountrySelected(u)?"primary":""),e.R7$(),e.SpI(" ",u," ")}}function C(i,p){if(1&i&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.k0s()()),2&i){const u=p.$implicit;e.R7$(2),e.Lme("FROM ",u.from,", ",u.src_city,""),e.R7$(2),e.Lme(" TO ",u.dst_addr,", ",u.dst_city,"")}}function A(i,p){if(1&i){const u=e.RV6();e.j41(0,"ion-item",20),e.bIt("click",function(){const n=e.eBV(u).$implicit,s=e.XpG();return e.Njj(s.viewHistory(n))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s(),e.nrm(3,"ion-icon",21),e.k0s()}if(2&i){const u=p.$implicit;e.R7$(2),e.JRh(u)}}const E=[{path:"",component:(()=>{var i;class p{constructor(t,n,s,o,_,O){this.ripeTraceService=t,this.route=n,this.loadingCtrl=s,this.alertCtrl=o,this.locationTraceService=_,this.router=O,this.user={},this.orgName="",this.productObjective="",this.productStep="",this.host="portfoliojuanfranciscocisneros.web.app",this.description="NEW IONIC",this.type="traceroute",this.countries={names:["BRAZIL","AUSTRALIA","USA","RUSSIA","UK","GERMANY","ITALY","SPAIN","FRANCE","JAPAN","ARGENTINA","SOUTH_AFRICA","SAUDI_ARABIA","GUATEMALA","THAILAND","INDIA"],probeIDs:["BR","AU","US","RU","GB","GE","IT","ES","FR","JP","AR","ZA","SA","GT","TH","IN"]},this.selectedCountries=[],this.ripeResults=[],this.ripeHistoryResultsID=[]}ngOnInit(){}ionViewWillEnter(){var t=this;return(0,a.A)(function*(){yield t.showLoading(),t.route.params.subscribe(s=>{t.productObjective=s.productObjective,t.productStep=s.step;const o=new Date,_=o.getDate()+"-"+(o.getMonth()+1)+"-"+o.getFullYear()+"-"+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds();t.description=s.productObjective+"-"+s.step+"-"+_});const n=localStorage.getItem("user");n&&(t.user=JSON.parse(n),t.orgName=t.user.orgName,yield t.getResultsHistory(),yield t.hideLoading())})()}sendTraceRequest(){var t=this;return(0,a.A)(function*(){yield t.showLoading(),yield t.ripeTraceService.sendTraceRequest(t.host,t.description,t.type,t.selectedCountries.join(",")+",").then(function(){var n=(0,a.A)(function*(s){s?(yield t.hideLoading(),yield t.showAlert("Trace request sent successfully","Success"),yield t.getMeasurementResults()):(yield t.hideLoading(),yield t.showAlert("Error sending trace request","Error"))});return function(s){return n.apply(this,arguments)}}())})()}getMeasurementResults(){var t=this;return(0,a.A)(function*(){t.ripeResults=[];try{yield t.showLoading();const n=yield t.ripeTraceService.getTraceResults();if(!n||0===n.length)return yield t.hideLoading(),yield t.showAlert("No trace results found","Error"),void(yield t.getMeasurementResults());for(let o of n)try{o=yield t.locationTraceService.getLocationDestSrc(o),o=yield t.locationTraceService.getLocationFrom(o),t.ripeResults.push(o)}catch(_){console.log(_)}(yield t.ripeTraceService.saveMeasurementResults(t.orgName,t.productObjective,t.description,t.ripeResults))?(yield t.hideLoading(),yield t.getResultsHistory(),yield t.showAlert("Trace results saved successfully","Success")):(yield t.hideLoading(),yield t.showAlert("Error saving trace results","Error"))}catch(n){console.log(n),yield t.hideLoading()}})()}getResultsHistory(){var t=this;return(0,a.A)(function*(){t.ripeHistoryResultsID=[],t.ripeTraceService.getHistoryResults(t.orgName,t.productObjective).then(n=>{for(let s of n)t.ripeHistoryResultsID.push(s.id)})})()}viewHistory(t){var n=this;return(0,a.A)(function*(){yield n.router.navigate(["/trace-results"],{queryParams:{description:t,productObjective:n.productObjective,step:n.productStep}})})()}selectCountry(t){const n=this.countries.names.indexOf(t),s=this.countries.probeIDs[n],o=this.selectedCountries.indexOf(s);o>-1?this.selectedCountries.splice(o,1):this.selectedCountries.push(s)}isCountrySelected(t){const n=this.countries.names.indexOf(t);return this.selectedCountries.includes(this.countries.probeIDs[n])}showLoading(){var t=this;return(0,a.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,a.A)(function*(){yield t.loadingCtrl.dismiss()})()}showAlert(t,n){var s=this;return(0,a.A)(function*(){const o=yield s.alertCtrl.create({header:n,message:t,buttons:["OK"]});return yield o.present(),yield o.onDidDismiss(),!0})()}}return(i=p).\u0275fac=function(t){return new(t||i)(e.rXU(g.N),e.rXU(d.nX),e.rXU(l.Xi),e.rXU(l.hG),e.rXU(m.e),e.rXU(d.Ix))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-trace-test"]],inputs:{host:"host",description:"description"},decls:39,vars:9,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4",1,""],["label","Host Name","placeholder","Enter a host name","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","4","size-lg","4"],["readonly","true","label","Description","placeholder","Enter a description","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","12","size-lg","12"],[1,"text-xl"],[1,"m-2",3,"color"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end"],["color","primary","size","small",1,"",3,"click"],["name","add"],[4,"ngFor","ngForOf"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end","items-center"],[1,"m-2"],["color","warning","size","small",1,"",3,"click"],["name","refresh"],[3,"click",4,"ngFor","ngForOf"],[1,"m-2",3,"click","color"],[3,"click"],["name","arrow-forward","color","primary"]],template:function(t,n){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2)(5,"ion-col",3)(6,"ion-input",4),e.mxI("ngModelChange",function(o){return e.DH7(n.host,o)||(n.host=o),o}),e.k0s()(),e.j41(7,"ion-col",5)(8,"ion-input",6),e.mxI("ngModelChange",function(o){return e.DH7(n.description,o)||(n.description=o),o}),e.k0s()()(),e.j41(9,"ion-row",2)(10,"ion-col",7)(11,"h3",8),e.EFF(12,"Select Countries to test"),e.k0s()()(),e.j41(13,"ion-row",2)(14,"ion-col",7),e.Z7z(15,v,2,2,"ion-chip",9,e.fX1),e.k0s()(),e.j41(17,"ion-row",2)(18,"ion-col",10)(19,"ion-button",11),e.bIt("click",function(){return n.sendTraceRequest()}),e.EFF(20,"Add Test "),e.nrm(21,"ion-icon",12),e.k0s()()(),e.nrm(22,"app-title",0),e.j41(23,"ion-row",2)(24,"ion-col",7)(25,"ion-list"),e.DNE(26,C,5,4,"ion-item",13),e.k0s()()(),e.j41(27,"ion-row",2)(28,"ion-col",14)(29,"ion-label",15),e.EFF(30,"Not all results are shown? "),e.k0s(),e.j41(31,"ion-button",16),e.bIt("click",function(){return n.getMeasurementResults()}),e.EFF(32,"GET MORE RESULTS "),e.nrm(33,"ion-icon",17),e.k0s()()(),e.nrm(34,"app-title",0),e.j41(35,"ion-row",2)(36,"ion-col",7)(37,"ion-list"),e.DNE(38,A,4,1,"ion-item",18),e.k0s()()()()()),2&t&&(e.Y8G("title","Traceroute Test"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","New Traceroute Test"),e.R7$(3),e.R50("ngModel",n.host),e.R7$(2),e.R50("ngModel",n.description),e.R7$(7),e.Dyx(n.countries.names),e.R7$(7),e.Y8G("title","Test Results"),e.R7$(4),e.Y8G("ngForOf",n.ripeResults),e.R7$(8),e.Y8G("title","Test Results History"),e.R7$(4),e.Y8G("ngForOf",n.ripeHistoryResultsID))},dependencies:[c.Sq,h.BC,h.vS,l.Jm,l.ZB,l.hU,l.W9,l.lO,l.iq,l.$w,l.uz,l.he,l.nf,l.ln,l.Gw,f.W,R.p]}),p})()}];let M=(()=>{var i;class p{}return(i=p).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[d.iI.forChild(E),d.iI]}),p})();var I=r(5553);let P=(()=>{var i;class p{}return(i=p).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[c.MD,h.YN,l.bv,M,I.h]}),p})()}}]);