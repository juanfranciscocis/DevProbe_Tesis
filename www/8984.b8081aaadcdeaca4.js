"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8984],{5553:(L,f,n)=>{n.d(f,{h:()=>c});var o=n(177),y=n(7863),i=n(4438);let c=(()=>{var s;class e{}return(s=e).\u0275fac=function(d){return new(d||s)},s.\u0275mod=i.$C({type:s}),s.\u0275inj=i.G2t({imports:[o.MD,y.bv]}),e})()},3241:(L,f,n)=>{n.d(f,{p:()=>c});var o=n(4438),y=n(177),i=n(7863);let c=(()=>{var s;class e{constructor(d){this.location=d,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(s=e).\u0275fac=function(d){return new(d||s)(o.rXU(y.aZ))},s.\u0275cmp=o.VBU({type:s,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(d,v){1&d&&(o.j41(0,"ion-header",0)(1,"ion-toolbar"),o.nrm(2,"ion-menu-button",1),o.j41(3,"ion-icon",2),o.bIt("click",function(){return v.goBack()}),o.k0s(),o.j41(4,"ion-title"),o.EFF(5),o.k0s()()()),2&d&&(o.Y8G("translucent",!0),o.R7$(5),o.JRh(v.title))},dependencies:[i.eU,i.iq,i.MC,i.BC,i.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},8453:(L,f,n)=>{n.d(f,{W:()=>i});var o=n(4438),y=n(7863);let i=(()=>{var c;class s{constructor(){this.title="Title"}ngOnInit(){}}return(c=s).\u0275fac=function(g){return new(g||c)},c.\u0275cmp=o.VBU({type:c,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(g,d){1&g&&(o.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),o.EFF(3),o.k0s()()()),2&g&&(o.R7$(3),o.JRh(d.title))},dependencies:[y.hU,y.ln]}),s})()},8984:(L,f,n)=>{n.r(f),n.d(f,{LatencyResultsPageModule:()=>F});var o=n(177),y=n(4341),i=n(7863),c=n(7650),s=n(467),e=n(4438),g=n(9640),d=n(1681),v=n(8453),E=n(3241);function P(r,p){if(1&r&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.k0s(),e.j41(5,"ion-label"),e.EFF(6),e.k0s()()),2&r){const m=p.$implicit;e.R7$(2),e.Lme("",m.cityFrom,",",m.countryFrom,""),e.R7$(2),e.SpI("",m.latency," ms"),e.R7$(2),e.Lme(" ",m.cityTo,",",m.countryTo,"")}}const _=[{path:"",component:(()=>{var r;class p{constructor(t,l,a,u,h,R){this.route=t,this.ripeService=l,this.router=a,this.loadingCtrl=u,this.locationService=h,this.alertCtrl=R,this.description="",this.orgName="",this.productObjective="",this.user={},this.ripeResults=[],this.testID=""}ngOnInit(){this.route.queryParams.subscribe(a=>{console.log(a),this.description=a.description,this.productObjective=a.productObjective});const t=localStorage.getItem("user");if(!t)return;const l=JSON.parse(t);this.orgName=l.orgName,this.ripeService.getAllResultsByDescription(this.orgName,this.productObjective,this.description).then(a=>{for(let u=0;u<a.data.length;u++)this.ripeResults.push(a.data[u]);this.testID=a.data[0].id,console.log(this.ripeResults),console.log(this.testID)})}goToMap(){this.router.navigate(["/show-map"],{queryParams:{description:this.description,productObjective:this.productObjective,orgName:this.orgName}})}getMoreResults(){var t=this;return(0,s.A)(function*(){yield t.showLoading(),t.ripeResults=[];try{let l=yield t.ripeService.getMeasurementResults(t.testID);if(!l)return yield t.hideLoading(),void(yield t.showAlert("Please send a test first","Error"));l.subscribe(function(){var a=(0,s.A)(function*(u){if(0===u.length)return yield t.hideLoading(),void(yield t.showAlert("No data found yet","Please wait a few minutes and try again"));for(let h=0;h<u.length;h++)t.ripeResults.push({latency:u[h].avg,dst_addr:u[h].dst_addr,from:u[h].from,toLatitude:0,toLongitude:0,fromLatitude:0,fromLongitude:0,cityTo:"",countryTo:"",cityFrom:"",countryFrom:"",id:t.ripeService.measurementID});yield t.ripeService.saveMeasurementResults(t.orgName,t.productObjective,t.description,t.ripeResults).then((0,s.A)(function*(){yield t.locationService.getLocation(t.ripeResults).then(h=>{t.ripeResults=h,t.locationService.saveLocationResults(t.orgName,t.productObjective,t.description,h).then(function(){var R=(0,s.A)(function*(M){M&&(yield t.hideLoading(),yield t.showAlert("Data saved and Showing Results","Success"))});return function(M){return R.apply(this,arguments)}}())})}))});return function(u){return a.apply(this,arguments)}}())}catch{yield t.hideLoading(),yield t.showAlert("Error getting results","Error")}})()}showLoading(){var t=this;return(0,s.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,s.A)(function*(){yield t.loadingCtrl.dismiss()})()}showAlert(t,l){var a=this;return(0,s.A)(function*(){yield(yield a.alertCtrl.create({header:l,message:t,buttons:["OK"]})).present()})()}}return(r=p).\u0275fac=function(t){return new(t||r)(e.rXU(c.nX),e.rXU(g.Q),e.rXU(c.Ix),e.rXU(i.Xi),e.rXU(d.N),e.rXU(i.hG))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-latency-results"]],inputs:{description:"description"},decls:33,vars:6,consts:[[3,"title"],[3,"fullscreen"],[1,"text-xs","m-2","lg:m-10","lg:text-2xl","md:text-2xl","md:m-10"],[1,"lg:m-10","md:m-10"],["size","4","size-md","4","size-lg","4",1,"flex","flex-row","justify-center"],[1,"text-2xl"],["size","12","size-md","12","size-lg","12"],[4,"ngFor","ngForOf"],[3,"translucent"],["size","4"],["size","8",1,"flex","flex-row","justify-end"],["size","small","color","light",3,"click"],["name","refresh",1,"m-2"],["size","small","color","primary",3,"click"],["name","arrow-forward",1,"m-2"]],template:function(t,l){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"h2",2),e.EFF(5),e.k0s(),e.nrm(6,"br"),e.j41(7,"ion-row",3)(8,"ion-col",4)(9,"h1",5),e.EFF(10,"FROM"),e.k0s()(),e.j41(11,"ion-col",4)(12,"h1",5),e.EFF(13,"LATENCY"),e.k0s()(),e.j41(14,"ion-col",4)(15,"h1",5),e.EFF(16,"TO"),e.k0s()()(),e.j41(17,"ion-row",3)(18,"ion-col",6)(19,"ion-list"),e.DNE(20,P,7,5,"ion-item",7),e.k0s()()()()(),e.j41(21,"ion-footer",8)(22,"ion-toolbar")(23,"ion-grid")(24,"ion-row"),e.nrm(25,"ion-col",9),e.j41(26,"ion-col",10)(27,"ion-button",11),e.bIt("click",function(){return l.getMoreResults()}),e.EFF(28,"GET MORE RESULTS "),e.nrm(29,"ion-icon",12),e.k0s(),e.j41(30,"ion-button",13),e.bIt("click",function(){return l.goToMap()}),e.EFF(31,"GO TO MAP "),e.nrm(32,"ion-icon",14),e.k0s()()()()()()),2&t&&(e.Y8G("title","Latency Results for "+l.description),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Test Results"),e.R7$(2),e.SpI("Results for ",l.description,""),e.R7$(15),e.Y8G("ngForOf",l.ripeResults),e.R7$(),e.Y8G("translucent",!0))},dependencies:[o.Sq,i.Jm,i.hU,i.W9,i.M0,i.lO,i.iq,i.uz,i.he,i.nf,i.ln,i.ai,v.W,E.p]}),p})()}];let C=(()=>{var r;class p{}return(r=p).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[c.iI.forChild(_),c.iI]}),p})();var O=n(5553);let F=(()=>{var r;class p{}return(r=p).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[o.MD,y.YN,i.bv,C,O.h]}),p})()}}]);