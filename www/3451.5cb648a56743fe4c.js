"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3451],{5553:(R,T,c)=>{c.d(T,{h:()=>g});var u=c(177),m=c(7863),s=c(4438);let g=(()=>{var l;class e{}return(l=e).\u0275fac=function(p){return new(p||l)},l.\u0275mod=s.$C({type:l}),l.\u0275inj=s.G2t({imports:[u.MD,m.bv]}),e})()},3241:(R,T,c)=>{c.d(T,{p:()=>g});var u=c(4438),m=c(177),s=c(7863);let g=(()=>{var l;class e{constructor(p){this.location=p,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(l=e).\u0275fac=function(p){return new(p||l)(u.rXU(m.aZ))},l.\u0275cmp=u.VBU({type:l,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(p,y){1&p&&(u.j41(0,"ion-header",0)(1,"ion-toolbar"),u.nrm(2,"ion-menu-button",1),u.j41(3,"ion-icon",2),u.bIt("click",function(){return y.goBack()}),u.k0s(),u.j41(4,"ion-title"),u.EFF(5),u.k0s()()()),2&p&&(u.Y8G("translucent",!0),u.R7$(5),u.JRh(y.title))},dependencies:[s.eU,s.iq,s.MC,s.BC,s.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},3451:(R,T,c)=>{c.r(T),c.d(T,{TraceTestPageModule:()=>P});var u=c(177),m=c(4341),s=c(7863),g=c(7650),l=c(467),e=c(4438),f=c(2588),p=c(3661),y=c(8453),_=c(3241);function v(i,d){if(1&i){const a=e.RV6();e.j41(0,"ion-chip",19),e.bIt("click",function(){const n=e.eBV(a).$implicit,o=e.XpG();return e.Njj(o.selectCountry(n))}),e.EFF(1),e.k0s()}if(2&i){const a=d.$implicit,t=e.XpG();e.Y8G("color",t.isCountrySelected(a)?"primary":""),e.R7$(),e.SpI(" ",a," ")}}function A(i,d){if(1&i&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.k0s()()),2&i){const a=d.$implicit;e.R7$(2),e.Lme("FROM ",a.from,", ",a.src_city,""),e.R7$(2),e.Lme(" TO ",a.dst_addr,", ",a.dst_city,"")}}function C(i,d){if(1&i){const a=e.RV6();e.j41(0,"ion-item",20),e.bIt("click",function(){const n=e.eBV(a).$implicit,o=e.XpG();return e.Njj(o.viewHistory(n))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s(),e.nrm(3,"ion-icon",21),e.k0s()}if(2&i){const a=d.$implicit;e.R7$(2),e.JRh(a)}}const M=[{path:"",component:(()=>{var i;class d{constructor(t,n,o,r,h,O){this.ripeTraceService=t,this.route=n,this.loadingCtrl=o,this.alertCtrl=r,this.locationTraceService=h,this.router=O,this.user={},this.orgName="",this.productObjective="",this.productStep="",this.host="portfoliojuanfranciscocisneros.web.app",this.description="NEW IONIC",this.type="traceroute",this.countries={names:["BRAZIL","AUSTRALIA","USA","RUSSIA","UK","GERMANY","ITALY","SPAIN","FRANCE","JAPAN","ARGENTINA","SOUTH_AFRICA","SAUDI_ARABIA","GUATEMALA","THAILAND","INDIA"],probeIDs:["BR","AU","US","RU","GB","GE","IT","ES","FR","JP","AR","ZA","SA","GT","TH","IN"]},this.selectedCountries=[],this.ripeResults=[],this.ripeHistoryResultsID=[]}ngOnInit(){}ionViewWillEnter(){var t=this;return(0,l.A)(function*(){yield t.showLoading(),t.route.params.subscribe(o=>{t.productObjective=o.productObjective,t.productStep=o.step;const r=new Date,h=r.getDate()+"-"+(r.getMonth()+1)+"-"+r.getFullYear()+"-"+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();t.description=o.productObjective+"-"+o.step+"-"+h});const n=localStorage.getItem("user");n&&(t.user=JSON.parse(n),t.orgName=t.user.orgName,yield t.getResultsHistory(),yield t.hideLoading())})()}sendTraceRequest(){var t=this;return(0,l.A)(function*(){yield t.showLoading(),yield t.ripeTraceService.sendTraceRequest(t.host,t.description,t.type,t.selectedCountries.join(",")+",").then(function(){var n=(0,l.A)(function*(o){o?(yield t.hideLoading(),yield t.showAlert("Trace request sent successfully","Success"),yield t.getMeasurementResults()):(yield t.hideLoading(),yield t.showAlert("Error sending trace request","Error"))});return function(o){return n.apply(this,arguments)}}())})()}getMeasurementResults(){var t=this;return(0,l.A)(function*(){t.ripeResults=[];try{yield t.showLoading();const n=yield t.ripeTraceService.getTraceResults();if(!n||0===n.length)return yield t.hideLoading(),yield t.showAlert("No trace results found","Error"),void(yield t.getMeasurementResults());for(let r of n)try{r=yield t.locationTraceService.getLocationDestSrc(r),r=yield t.locationTraceService.getLocationFrom(r),t.ripeResults.push(r)}catch(h){console.log(h)}(yield t.ripeTraceService.saveMeasurementResults(t.orgName,t.productObjective,t.description,t.ripeResults))?(yield t.hideLoading(),yield t.getResultsHistory(),yield t.showAlert("Trace results saved successfully","Success")):(yield t.hideLoading(),yield t.showAlert("Error saving trace results","Error"))}catch(n){console.log(n),yield t.hideLoading()}})()}getResultsHistory(){var t=this;return(0,l.A)(function*(){t.ripeHistoryResultsID=[],t.ripeTraceService.getHistoryResults(t.orgName,t.productObjective).then(n=>{for(let o of n)t.ripeHistoryResultsID.push(o.id)})})()}viewHistory(t){var n=this;return(0,l.A)(function*(){yield n.router.navigate(["/trace-results"],{queryParams:{description:t,productObjective:n.productObjective,step:n.productStep}})})()}selectCountry(t){const n=this.countries.names.indexOf(t),o=this.countries.probeIDs[n],r=this.selectedCountries.indexOf(o);r>-1?this.selectedCountries.splice(r,1):this.selectedCountries.push(o)}isCountrySelected(t){const n=this.countries.names.indexOf(t);return this.selectedCountries.includes(this.countries.probeIDs[n])}showLoading(){var t=this;return(0,l.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,l.A)(function*(){yield t.loadingCtrl.dismiss()})()}showAlert(t,n){var o=this;return(0,l.A)(function*(){const r=yield o.alertCtrl.create({header:n,message:t,buttons:["OK"]});return yield r.present(),yield r.onDidDismiss(),!0})()}}return(i=d).\u0275fac=function(t){return new(t||i)(e.rXU(f.N),e.rXU(g.nX),e.rXU(s.Xi),e.rXU(s.hG),e.rXU(p.e),e.rXU(g.Ix))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-trace-test"]],inputs:{host:"host",description:"description"},decls:39,vars:9,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4",1,""],["label","Host Name","placeholder","Enter a host name","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","4","size-lg","4"],["readonly","true","label","Description","placeholder","Enter a description","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","12","size-lg","12"],[1,"text-xl"],[1,"m-2",3,"color"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end"],["color","primary","size","small",1,"",3,"click"],["name","add"],[4,"ngFor","ngForOf"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end","items-center"],[1,"m-2"],["color","warning","size","small",1,"",3,"click"],["name","refresh"],[3,"click",4,"ngFor","ngForOf"],[1,"m-2",3,"click","color"],[3,"click"],["name","arrow-forward","color","primary"]],template:function(t,n){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2)(5,"ion-col",3)(6,"ion-input",4),e.mxI("ngModelChange",function(r){return e.DH7(n.host,r)||(n.host=r),r}),e.k0s()(),e.j41(7,"ion-col",5)(8,"ion-input",6),e.mxI("ngModelChange",function(r){return e.DH7(n.description,r)||(n.description=r),r}),e.k0s()()(),e.j41(9,"ion-row",2)(10,"ion-col",7)(11,"h3",8),e.EFF(12,"Select Countries to test"),e.k0s()()(),e.j41(13,"ion-row",2)(14,"ion-col",7),e.Z7z(15,v,2,2,"ion-chip",9,e.fX1),e.k0s()(),e.j41(17,"ion-row",2)(18,"ion-col",10)(19,"ion-button",11),e.bIt("click",function(){return n.sendTraceRequest()}),e.EFF(20,"Add Test "),e.nrm(21,"ion-icon",12),e.k0s()()(),e.nrm(22,"app-title",0),e.j41(23,"ion-row",2)(24,"ion-col",7)(25,"ion-list"),e.DNE(26,A,5,4,"ion-item",13),e.k0s()()(),e.j41(27,"ion-row",2)(28,"ion-col",14)(29,"ion-label",15),e.EFF(30,"Not all results are shown? "),e.k0s(),e.j41(31,"ion-button",16),e.bIt("click",function(){return n.getMeasurementResults()}),e.EFF(32,"GET MORE RESULTS "),e.nrm(33,"ion-icon",17),e.k0s()()(),e.nrm(34,"app-title",0),e.j41(35,"ion-row",2)(36,"ion-col",7)(37,"ion-list"),e.DNE(38,C,4,1,"ion-item",18),e.k0s()()()()()),2&t&&(e.Y8G("title","Traceroute Test"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","New Traceroute Test"),e.R7$(3),e.R50("ngModel",n.host),e.R7$(2),e.R50("ngModel",n.description),e.R7$(7),e.Dyx(n.countries.names),e.R7$(7),e.Y8G("title","Test Results"),e.R7$(4),e.Y8G("ngForOf",n.ripeResults),e.R7$(8),e.Y8G("title","Test Results History"),e.R7$(4),e.Y8G("ngForOf",n.ripeHistoryResultsID))},dependencies:[u.Sq,m.BC,m.vS,s.Jm,s.ZB,s.hU,s.W9,s.lO,s.iq,s.$w,s.uz,s.he,s.nf,s.ln,s.Gw,y.W,_.p]}),d})()}];let E=(()=>{var i;class d{}return(i=d).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.iI.forChild(M),g.iI]}),d})();var I=c(5553);let P=(()=>{var i;class d{}return(i=d).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.MD,m.YN,s.bv,E,I.h]}),d})()}}]);