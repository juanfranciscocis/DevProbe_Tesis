"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4304],{5553:(P,j,a)=>{a.d(j,{h:()=>T});var r=a(177),x=a(7863),d=a(4438);let T=(()=>{var c;class e{}return(c=e).\u0275fac=function(b){return new(b||c)},c.\u0275mod=d.$C({type:c}),c.\u0275inj=d.G2t({imports:[r.MD,x.bv]}),e})()},3241:(P,j,a)=>{a.d(j,{p:()=>T});var r=a(4438),x=a(177),d=a(7863);let T=(()=>{var c;class e{constructor(b){this.location=b,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(c=e).\u0275fac=function(b){return new(b||c)(r.rXU(x.aZ))},c.\u0275cmp=r.VBU({type:c,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(b,R){1&b&&(r.j41(0,"ion-header",0)(1,"ion-toolbar"),r.nrm(2,"ion-menu-button",1),r.j41(3,"ion-icon",2),r.bIt("click",function(){return R.goBack()}),r.k0s(),r.j41(4,"ion-title"),r.EFF(5),r.k0s()()()),2&b&&(r.Y8G("translucent",!0),r.R7$(5),r.JRh(R.title))},dependencies:[d.eU,d.iq,d.MC,d.BC,d.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},8453:(P,j,a)=>{a.d(j,{W:()=>d});var r=a(4438),x=a(7863);let d=(()=>{var T;class c{constructor(){this.title="Title"}ngOnInit(){}}return(T=c).\u0275fac=function(C){return new(C||T)},T.\u0275cmp=r.VBU({type:T,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(C,b){1&C&&(r.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),r.EFF(3),r.k0s()()()),2&C&&(r.R7$(3),r.JRh(b.title))},dependencies:[x.hU,x.ln]}),c})()},4304:(P,j,a)=>{a.r(j),a.d(j,{LoadTestHistoryPageModule:()=>U});var r=a(177),x=a(4341),d=a(7863),T=a(7650),c=a(467),e=a(4438),C=a(9032),b=a(4970),R=a(8453),L=a(3241),F=a(2820),E=a(9549);const A=["messagesContainer"];function I(i,_){if(1&i){const f=e.RV6();e.j41(0,"ion-fab",30),e.bIt("click",function(){e.eBV(f);const t=e.XpG();return e.Njj(t.toggleAiModal())}),e.j41(1,"ion-avatar",31),e.nrm(2,"ion-icon",32),e.k0s()()}}function D(i,_){if(1&i&&(e.j41(0,"div",36)(1,"markdown",37),e.EFF(2),e.k0s()()),2&i){const f=e.XpG().$implicit;e.R7$(2),e.JRh(f.message)}}function B(i,_){if(1&i&&(e.j41(0,"div",38)(1,"markdown",39),e.EFF(2),e.k0s()()),2&i){const f=e.XpG().$implicit;e.R7$(),e.Mz_("id","mk-",f.id,""),e.R7$(),e.JRh(f.message)}}function N(i,_){if(1&i&&(e.j41(0,"div",33),e.DNE(1,D,3,1,"div",34)(2,B,3,3,"div",35),e.k0s()),2&i){const f=_.$implicit;e.R7$(),e.Y8G("ngIf","User"===f.from),e.R7$(),e.Y8G("ngIf","AI"===f.from)}}const $=[{path:"",component:(()=>{var i;class _{constructor(s,t,o,n){this.activatedRoute=s,this.router=t,this.loadTestService=o,this.loadingCtrl=n,this.productObjective="",this.productStep="",this.orgName="",this.date="",this.loadTestResults={},this.totalNumberOfRequests=0,this.statusCodesOptions={tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]},this.responseTimeOptions={tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]},this.aiModal=!1,this.message="",this.vertexAI=(0,e.WQX)(C.L9),this.model=(0,C.oc)(this.vertexAI,{model:"gemini-1.5-flash"}),this.chat=this.model.startChat({history:[{role:"user",parts:[{text:"Hola, desde ahora en adelante quiero que seas un modelo experto en Software Quality Assurance y analista de datos, tu nombre es DevProbeAI, nunca lo puedes olvidar"}]},{role:"model",parts:[{text:"Soy un modelo experto en Software Quality Assurance, de igual forma tengo un masterado en anla\xedtica de datos \xbfEn qu\xe9 puedo ayudarte?"}]},{role:"user",parts:[{text:"Gracias, te voy a entregar un json con datos en unos minutos, necesito que lo analices y me des un resumen de los datos, este json contiene datos de un load test,tu analisis tiene que ser detallado, si encuentras inconsistencias en los datos, por favor mencionalas, en caso de que creas que puede haber un problema o que se encuentre el recurso no disponible por favor mencionalo, si encuentras algo interesante, por favor mencionalo, en resumen, necesito un analisis detallado de los datos"}]},{role:"model",parts:[{text:"Claro, env\xedame el json y yo me encargo de analizarlo"}]}]}),this.messages=[],this.hasBeenOpened=!1}ngOnInit(){var s=this;this.getParams(),this.getLoadTestHistoryByDate().then(function(){var t=(0,c.A)(function*(o){s.totalRequests(),yield s.plotCodes(),yield s.responseTime()});return function(o){return t.apply(this,arguments)}}())}getParams(){this.activatedRoute.params.subscribe(t=>{this.productObjective=t.productObjective,this.productStep=t.productStep,this.date=t.day});const s=JSON.parse(localStorage.getItem("user"));this.orgName=s.orgName,console.log(this.orgName),console.log(this.productObjective),console.log(this.productStep),console.log(this.date)}getLoadTestHistoryByDate(){var s=this;return(0,c.A)(function*(){s.loadTestResults=yield s.loadTestService.getLoadTestHistoryByDate(s.orgName,s.productObjective,s.productStep,s.date)})()}totalRequests(){let s=Object.keys(this.loadTestResults),t={},o=0;for(let n of s){let l=this.loadTestResults[n].aggregate.counters,p=this.loadTestResults[n].date,y=Object.keys(l).filter(m=>m.startsWith("http.responses"));for(let m of y)t[p]||(t[p]={}),t[p][m]=(t[p][m]||0)+l[m]}for(let n of Object.keys(t))o+=t[n]["http.responses"];this.totalNumberOfRequests=o}byCodes(){let s=Object.keys(this.loadTestResults),t={};for(let o of s){let n=this.loadTestResults[o].aggregate.counters,l=this.loadTestResults[o].date,p=Object.keys(n).filter(y=>y.startsWith("http.codes."));for(let y of p)t[l]||(t[l]={}),t[l][y]=n[y]}return console.log(t),t=this.ordenarDiccionarioPorFechas(t),t}normalizarFecha(s){console.log("fecha",s);const[t,o,n,l,p,y]=s.split("-").map(g=>parseInt(g,10));return`${t}-${o<10?`0${o}`:o.toString()}-${n<10?`0${n}`:n.toString()} ${l}:${p}:${y}`}ordenarDiccionarioPorFechas(s){const o=Object.keys(s).sort((l,p)=>{console.log("a",this.normalizarFecha(l)),console.log("b",this.normalizarFecha(p));const y=new Date(this.normalizarFecha(l)),m=new Date(this.normalizarFecha(p));return y.getTime()-m.getTime()}),n={};return o.forEach(l=>{n[l]=s[l]}),n}plotCodes(){var s=this;return(0,c.A)(function*(){let t=s.byCodes();console.log("codess",t);let o=Object.keys(t);console.log("llaves",o);let n=new Set;for(let m of o){let g=Object.keys(t[m]);for(let k of g)n.add(k)}let l={};for(let m in t){let u=t[m];for(let g of n)l[g]||(l[g]=[]),l[g].push(u[g]||0)}let p=["#36b311","#306fc6","#ed3b3b","#f4ba20"];for(let m in l){let g,u=m.split(".").pop();null!=u&&u.startsWith("2")&&(g=p[0]),null!=u&&u.startsWith("3")&&(g=p[1]),null!=u&&u.startsWith("4")&&(g=p[2]),null!=u&&u.startsWith("5")&&(g=p[3]),g||(g="#000000"),s.statusCodesOptions.series.push({name:m,type:"line",data:l[m],lineStyle:{color:g},itemStyle:{color:g}})}s.statusCodesOptions.xAxis={type:"category",boundaryGap:!1,data:o},s.statusCodesOptions={...s.statusCodesOptions};let y=document.getElementById("httpCodesChartHistory");console.log(y),y.style.width="100%",y.style.height="25em"})()}responseTime(){let s=Object.keys(this.loadTestResults),t={};for(let v of s){let h=this.loadTestResults[v].aggregate.histograms,M=this.loadTestResults[v].date,w=Object.keys(h).filter(O=>O.startsWith("http.response_time"));for(let O of w)t[M]=h[O]}let o=Object.keys(t);o=function n(v){return v.sort((h,M)=>{let w=h.split("-").slice(0,3).join("/"),O=M.split("-").slice(0,3).join("/"),z=h.split("-").slice(3,6).join(":"),X=O+" "+M.split("-").slice(3,6).join(":");return new Date(w+" "+z).getTime()-new Date(X).getTime()})}(o),console.log("date",o),console.log("responseTimes",t);let l=[],p=[],y=[],m=[],u=[],g=[];for(let v in o){console.log("date",o[v]);for(let h in t[o[v]])"min"===h&&l.push(t[o[v]][h]),"max"===h&&p.push(t[o[v]][h]),"p95"===h&&y.push(t[o[v]][h]),"p99"===h&&m.push(t[o[v]][h]),"mean"===h&&u.push(t[o[v]][h]),"median"===h&&g.push(t[o[v]][h])}console.log("min",l);let k={min:l,max:p,p95:y,p99:m,mean:u,median:g};this.responseTimeOptions.series=[];for(let v in k)this.responseTimeOptions.series.push({name:v,type:"bar",data:k[v]});this.responseTimeOptions.xAxis={type:"category",boundaryGap:!1,data:o},this.responseTimeOptions={...this.responseTimeOptions};let H=document.getElementById("httpResponseTimeChartHistory");return console.log(H),H.style.width="100%",H.style.height="25em",t}toggleAiModal(s){var t=this;return(0,c.A)(function*(){if(yield t.showLoading(),t.aiModal=!t.aiModal,t.hasBeenOpened=!0,"httpCodesOptions"===s&&(t.message="En este caso el json tiene codigos de respuesta HTTP, por ejemplo, 404, 500, etc y cuantos requests devolvieron esos codigos:"+JSON.stringify(t.byCodes())),"httpResponseTimeOptions"===s&&(t.message="En este caso el json tiene tiempos de respuesta de los requests, por ejemplo, 500ms, 1000ms, etc: "+JSON.stringify(t.responseTime())),""===t.message)return console.log("Message is empty"),void(yield t.hideLoading());let o=t.messages.length;o>0&&t.messages.push({message:t.message,from:"User",id:o.toString()});const n=yield t.chat.sendMessage(t.message);o=t.messages.length,t.messages.push({message:n.response.text(),from:"AI",id:o.toString()}),t.message="",yield t.hideLoading()})()}sendMessage(){var s=this;let t=this.messages.length;this.messages.push({message:this.message,from:"User",id:t.toString()}),this.chat.sendMessage(this.message).then(function(){var o=(0,c.A)(function*(n){yield s.showLoading(),t=s.messages.length,s.messages.push({message:n.response.text(),from:"AI",id:t.toString()}),yield s.hideLoading()});return function(n){return o.apply(this,arguments)}}()),this.message=""}showLoading(){var s=this;return(0,c.A)(function*(){yield(yield s.loadingCtrl.create({})).present()})()}hideLoading(){var s=this;return(0,c.A)(function*(){yield s.loadingCtrl.dismiss()})()}}return(i=_).\u0275fac=function(s){return new(s||i)(e.rXU(T.nX),e.rXU(T.Ix),e.rXU(b.s),e.rXU(d.Xi))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-load-test-history"]],viewQuery:function(s,t){if(1&s&&e.GBs(A,5),2&s){let o;e.mGM(o=e.lsd())&&(t.messagesContainer=o.first)}},decls:55,vars:14,consts:[["messagesContainer",""],[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12",1,"w-full"],[1,"w-full","p-6","flex","flex-col","justify-center","items-center"],[1,"text-3xl"],[1,"text-2xl","text-white"],["size","12",1,"relative","flex","flex-row","justify-center"],[1,"absolute","z-10","w-full","flex","flex-row","justify-end"],[1,"h-12","w-12","bg-purple-400","p-2",3,"click"],["name","color-wand-outline",1,"w-full","h-full"],[1,"h-[25em]","w-full"],["id","httpCodesChartHistory","echarts","",1,"demo-chart","h-full","w-full",3,"options"],["id","httpResponseTimeChartHistory","echarts","",1,"demo-chart","h-full","w-full",3,"options"],["vertical","bottom","horizontal","end","slot","fixed",1,"m-2","z-10"],["id","ai-modal",1,"fixed","bottom-0","right-0","h-full","w-full","bg-black","bg-opacity-60","z-10","r"],[1,"h-full","md:h-3/4","lg:h-3/4","w-full","bg-gray-900","p-4","absolute","right-0","bottom-0","z-50","flex","flex-col","rounded-tl-2xl","rounded-tr-2xl"],[1,"w-full","bg-gray-500","flex","flex-row","justify-center","items-center","p-2","mb-2","rounded-3xl"],[1,"flex","flex-row","p-2","items-center","bg-gray-800","w-full","rounded-3xl","h-full"],[1,"text-white"],[1,"m-2"],[1,"flex","flex-row","justify-center","items-center","bg-gray-800","hover:bg-gray-600","w-1/6","h-full","rounded-3xl",3,"click"],["name","close-outline"],[1,"flex-grow","overflow-y-auto","bg-gray-400","p-2","rounded-3xl"],["class","flex flex-col",4,"ngFor","ngForOf"],[1,"flex","flex-row","mt-2","p-2"],["placeholder","Ask...",1,"flex-grow","bg-gray-700","rounded-2xl",3,"ngModelChange","ngModel"],[1,"m-1"],[1,"w-1/3","bg-gray-500","rounded-3xl","flex","flex-row","justify-center","items-center","hover:bg-gray-300",3,"click"],["vertical","bottom","horizontal","end","slot","fixed",1,"m-2","z-10",3,"click"],[1,"bg-purple-300","p-1","lg:p-4","md:p-4"],["name","chatbubble-outline",1,"w-full","h-full"],[1,"flex","flex-col"],["class","rounded-3xl bg-gray-800 w-2/3 m-1 ml-auto p-2",4,"ngIf"],["class","rounded-3xl bg-gray-500 w-2/3 m-1 p-2 pr-2",4,"ngIf"],[1,"rounded-3xl","bg-gray-800","w-2/3","m-1","ml-auto","p-2"],[1,"text-white","p-4","m-2"],[1,"rounded-3xl","bg-gray-500","w-2/3","m-1","p-2","pr-2"],[1,"text-white","p-4","m-2",3,"id"]],template:function(s,t){if(1&s){const o=e.RV6();e.nrm(0,"app-header-return",1),e.j41(1,"ion-content",2)(2,"ion-grid"),e.nrm(3,"app-title",1),e.j41(4,"ion-row",3)(5,"ion-col",4)(6,"ion-card",5)(7,"ion-card-header")(8,"ion-card-title",6),e.EFF(9,"Total Number of Requests"),e.k0s()(),e.j41(10,"ion-card-content")(11,"h1",7),e.EFF(12),e.nI1(13,"number"),e.k0s()()()()(),e.j41(14,"ion-row",3)(15,"ion-col",8)(16,"div",9)(17,"ion-avatar",10),e.bIt("click",function(){return e.eBV(o),e.Njj(t.toggleAiModal("httpCodesOptions"))}),e.nrm(18,"ion-icon",11),e.k0s()(),e.j41(19,"ion-card",5)(20,"ion-card-header")(21,"ion-card-title",6),e.EFF(22,"HTTP Status Codes"),e.k0s()(),e.j41(23,"ion-card-content",12),e.nrm(24,"div",13),e.k0s()()()(),e.j41(25,"ion-row",3)(26,"ion-col",8)(27,"div",9)(28,"ion-avatar",10),e.bIt("click",function(){return e.eBV(o),e.Njj(t.toggleAiModal("httpResponseTimeOptions"))}),e.nrm(29,"ion-icon",11),e.k0s()(),e.j41(30,"ion-card",5)(31,"ion-card-header")(32,"ion-card-title",6),e.EFF(33,"HTTP Response Time"),e.k0s()(),e.j41(34,"ion-card-content",12),e.nrm(35,"div",14),e.k0s()()()()(),e.DNE(36,I,3,0,"ion-fab",15),e.k0s(),e.j41(37,"div",16)(38,"div",17)(39,"div",18)(40,"div",19)(41,"h1",20),e.EFF(42,"DevProbe AI"),e.k0s()(),e.nrm(43,"div",21),e.j41(44,"div",22),e.bIt("click",function(){return e.eBV(o),e.Njj(t.toggleAiModal())}),e.nrm(45,"ion-icon",23),e.k0s()(),e.j41(46,"div",24,0),e.DNE(48,N,3,2,"div",25),e.k0s(),e.j41(49,"div",26)(50,"ion-textarea",27),e.mxI("ngModelChange",function(l){return e.eBV(o),e.DH7(t.message,l)||(t.message=l),e.Njj(l)}),e.k0s(),e.nrm(51,"div",28),e.j41(52,"div",29),e.bIt("click",function(){return e.eBV(o),e.Njj(t.sendMessage())}),e.j41(53,"span",20),e.EFF(54,"Send"),e.k0s()()()()()}2&s&&(e.Y8G("title","History For: "+t.date),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Load Test History"),e.R7$(9),e.JRh(e.i5U(13,11,t.totalNumberOfRequests,"1.0-0")),e.R7$(12),e.Y8G("options",t.statusCodesOptions),e.R7$(11),e.Y8G("options",t.responseTimeOptions),e.R7$(),e.vxM(36,t.hasBeenOpened?36:-1),e.R7$(),e.AVh("hidden",!t.aiModal),e.R7$(11),e.Y8G("ngForOf",t.messages),e.R7$(2),e.R50("ngModel",t.message))},dependencies:[r.Sq,r.bT,x.BC,x.vS,d.mC,d.b_,d.I9,d.ME,d.tN,d.hU,d.W9,d.Q8,d.lO,d.iq,d.ln,d.nc,d.Gw,R.W,L.p,F.$P,E.NN,r.QX]}),_})()}];let S=(()=>{var i;class _{}return(i=_).\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[T.iI.forChild($),T.iI]}),_})();var G=a(5553);let U=(()=>{var i;class _{}return(i=_).\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[r.MD,x.YN,d.bv,S,G.h,E.NN]}),_})()}}]);