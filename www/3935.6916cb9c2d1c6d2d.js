"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3935],{3935:(M,h,a)=>{a.r(h),a.d(h,{TraceTestPageModule:()=>_});var m=a(177),g=a(4341),c=a(7863),p=a(305),u=a(467),e=a(4438),T=a(2588),y=a(3661),f=a(8453),R=a(3241);function v(s,l){if(1&s){const n=e.RV6();e.j41(0,"ion-chip",19),e.bIt("click",function(){const i=e.eBV(n).$implicit,o=e.XpG();return e.Njj(o.selectCountry(i))}),e.EFF(1),e.k0s()}if(2&s){const n=l.$implicit,t=e.XpG();e.Y8G("color",t.isCountrySelected(n)?"primary":""),e.R7$(),e.SpI(" ",n," ")}}function A(s,l){if(1&s&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.k0s()()),2&s){const n=l.$implicit;e.R7$(2),e.Lme("FROM ",n.from,", ",n.src_city,""),e.R7$(2),e.Lme(" TO ",n.dst_addr,", ",n.dst_city,"")}}function I(s,l){if(1&s){const n=e.RV6();e.j41(0,"ion-item",20),e.bIt("click",function(){const i=e.eBV(n).$implicit,o=e.XpG();return e.Njj(o.viewHistory(i))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s(),e.nrm(3,"ion-icon",21),e.k0s()}if(2&s){const n=l.$implicit;e.R7$(2),e.JRh(n)}}const S=[{path:"",component:(()=>{var s;class l{constructor(t,i,o,r,d,C){this.ripeTraceService=t,this.route=i,this.loadingCtrl=o,this.alertCtrl=r,this.locationTraceService=d,this.router=C,this.user={},this.orgName="",this.productObjective="",this.productStep="",this.host="portfoliojuanfranciscocisneros.web.app",this.description="NEW IONIC",this.type="traceroute",this.countries={names:["BRAZIL","AUSTRALIA","USA","RUSSIA","UK","GERMANY","ITALY","SPAIN","FRANCE","JAPAN","ARGENTINA","SOUTH_AFRICA","SAUDI_ARABIA","GUATEMALA","THAILAND","INDIA"],probeIDs:["BR","AU","US","RU","GB","GE","IT","ES","FR","JP","AR","ZA","SA","GT","TH","IN"]},this.selectedCountries=[],this.ripeResults=[],this.ripeHistoryResultsID=[]}ngOnInit(){}ionViewWillEnter(){var t=this;return(0,u.A)(function*(){yield t.showLoading(),t.route.params.subscribe(o=>{t.productObjective=o.productObjective,t.productStep=o.step;const r=new Date,d=r.getDate()+"-"+(r.getMonth()+1)+"-"+r.getFullYear()+"-"+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();t.description=o.productObjective+"-"+o.step+"-"+d});const i=localStorage.getItem("user");i&&(t.user=JSON.parse(i),t.orgName=t.user.orgName,yield t.getResultsHistory(),yield t.hideLoading())})()}sendTraceRequest(){var t=this;return(0,u.A)(function*(){yield t.showLoading(),yield t.ripeTraceService.sendTraceRequest(t.host,t.description,t.type,t.selectedCountries.join(",")+",").then(function(){var i=(0,u.A)(function*(o){o?(yield t.hideLoading(),yield t.showAlert("Trace request sent successfully","Success"),yield t.getMeasurementResults()):(yield t.hideLoading(),yield t.showAlert("Error sending trace request","Error"))});return function(o){return i.apply(this,arguments)}}())})()}getMeasurementResults(){var t=this;return(0,u.A)(function*(){t.ripeResults=[];try{yield t.showLoading();const i=yield t.ripeTraceService.getTraceResults();if(!i||0===i.length)return yield t.hideLoading(),yield t.showAlert("No trace results found","Error"),void(yield t.getMeasurementResults());for(let r of i)try{r=yield t.locationTraceService.getLocationDestSrc(r),r=yield t.locationTraceService.getLocationFrom(r),t.ripeResults.push(r)}catch(d){console.log(d)}(yield t.ripeTraceService.saveMeasurementResults(t.orgName,t.productObjective,t.description,t.ripeResults))?(yield t.hideLoading(),yield t.getResultsHistory(),yield t.showAlert("Trace results saved successfully","Success")):(yield t.hideLoading(),yield t.showAlert("Error saving trace results","Error"))}catch(i){console.log(i),yield t.hideLoading()}})()}getResultsHistory(){var t=this;return(0,u.A)(function*(){t.ripeHistoryResultsID=[],t.ripeTraceService.getHistoryResults(t.orgName,t.productObjective).then(i=>{for(let o of i)t.ripeHistoryResultsID.push(o.id)})})()}viewHistory(t){var i=this;return(0,u.A)(function*(){yield i.router.navigate(["/trace-results"],{queryParams:{description:t,productObjective:i.productObjective,step:i.productStep}})})()}selectCountry(t){const i=this.countries.names.indexOf(t),o=this.countries.probeIDs[i],r=this.selectedCountries.indexOf(o);r>-1?this.selectedCountries.splice(r,1):this.selectedCountries.push(o)}isCountrySelected(t){const i=this.countries.names.indexOf(t);return this.selectedCountries.includes(this.countries.probeIDs[i])}showLoading(){var t=this;return(0,u.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,u.A)(function*(){yield t.loadingCtrl.dismiss()})()}showAlert(t,i){var o=this;return(0,u.A)(function*(){const r=yield o.alertCtrl.create({header:i,message:t,buttons:["OK"]});return yield r.present(),yield r.onDidDismiss(),!0})()}}return(s=l).\u0275fac=function(t){return new(t||s)(e.rXU(T.N),e.rXU(p.nX),e.rXU(c.Xi),e.rXU(c.hG),e.rXU(y.e),e.rXU(p.Ix))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-trace-test"]],inputs:{host:"host",description:"description"},decls:39,vars:9,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4",1,""],["label","Host Name","placeholder","Enter a host name","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","4","size-lg","4"],["readonly","true","label","Description","placeholder","Enter a description","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","12","size-lg","12"],[1,"text-xl"],[1,"m-2",3,"color"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end"],["color","primary","size","small",1,"",3,"click"],["name","add"],[4,"ngFor","ngForOf"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end","items-center"],[1,"m-2"],["color","warning","size","small",1,"",3,"click"],["name","refresh"],[3,"click",4,"ngFor","ngForOf"],[1,"m-2",3,"click","color"],[3,"click"],["name","arrow-forward","color","primary"]],template:function(t,i){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2)(5,"ion-col",3)(6,"ion-input",4),e.mxI("ngModelChange",function(r){return e.DH7(i.host,r)||(i.host=r),r}),e.k0s()(),e.j41(7,"ion-col",5)(8,"ion-input",6),e.mxI("ngModelChange",function(r){return e.DH7(i.description,r)||(i.description=r),r}),e.k0s()()(),e.j41(9,"ion-row",2)(10,"ion-col",7)(11,"h3",8),e.EFF(12,"Select Countries to test"),e.k0s()()(),e.j41(13,"ion-row",2)(14,"ion-col",7),e.Z7z(15,v,2,2,"ion-chip",9,e.fX1),e.k0s()(),e.j41(17,"ion-row",2)(18,"ion-col",10)(19,"ion-button",11),e.bIt("click",function(){return i.sendTraceRequest()}),e.EFF(20,"Add Test "),e.nrm(21,"ion-icon",12),e.k0s()()(),e.nrm(22,"app-title",0),e.j41(23,"ion-row",2)(24,"ion-col",7)(25,"ion-list"),e.DNE(26,A,5,4,"ion-item",13),e.k0s()()(),e.j41(27,"ion-row",2)(28,"ion-col",14)(29,"ion-label",15),e.EFF(30,"Not all results are shown? "),e.k0s(),e.j41(31,"ion-button",16),e.bIt("click",function(){return i.getMeasurementResults()}),e.EFF(32,"GET MORE RESULTS "),e.nrm(33,"ion-icon",17),e.k0s()()(),e.nrm(34,"app-title",0),e.j41(35,"ion-row",2)(36,"ion-col",7)(37,"ion-list"),e.DNE(38,I,4,1,"ion-item",18),e.k0s()()()()()),2&t&&(e.Y8G("title","Traceroute Test"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","New Traceroute Test"),e.R7$(3),e.R50("ngModel",i.host),e.R7$(2),e.R50("ngModel",i.description),e.R7$(7),e.Dyx(i.countries.names),e.R7$(7),e.Y8G("title","Test Results"),e.R7$(4),e.Y8G("ngForOf",i.ripeResults),e.R7$(8),e.Y8G("title","Test Results History"),e.R7$(4),e.Y8G("ngForOf",i.ripeHistoryResultsID))},dependencies:[m.Sq,g.BC,g.vS,c.Jm,c.ZB,c.hU,c.W9,c.lO,c.iq,c.$w,c.uz,c.he,c.nf,c.ln,c.Gw,f.W,R.p]}),l})()}];let j=(()=>{var s;class l{}return(s=l).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[p.iI.forChild(S),p.iI]}),l})();var F=a(5553);let _=(()=>{var s;class l{}return(s=l).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[m.MD,g.YN,c.bv,j,F.h]}),l})()}}]);