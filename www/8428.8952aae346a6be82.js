"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8428],{5553:(U,C,r)=>{r.d(C,{h:()=>_});var d=r(177),h=r(7863),s=r(4438);let _=(()=>{var l;class e{}return(l=e).\u0275fac=function(u){return new(u||l)},l.\u0275mod=s.$C({type:l}),l.\u0275inj=s.G2t({imports:[d.MD,h.bv]}),e})()},3241:(U,C,r)=>{r.d(C,{p:()=>_});var d=r(4438),h=r(177),s=r(7863);let _=(()=>{var l;class e{constructor(u){this.location=u,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(l=e).\u0275fac=function(u){return new(u||l)(d.rXU(h.aZ))},l.\u0275cmp=d.VBU({type:l,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(u,m){1&u&&(d.j41(0,"ion-header",0)(1,"ion-toolbar"),d.nrm(2,"ion-menu-button",1),d.j41(3,"ion-icon",2),d.bIt("click",function(){return m.goBack()}),d.k0s(),d.j41(4,"ion-title"),d.EFF(5),d.k0s()()()),2&u&&(d.Y8G("translucent",!0),d.R7$(5),d.JRh(m.title))},dependencies:[s.eU,s.iq,s.MC,s.BC,s.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},8428:(U,C,r)=>{r.r(C),r.d(C,{CreateUnitTestPageModule:()=>S});var d=r(177),h=r(4341),s=r(7863),_=r(7650),l=r(467),e=r(4438),p=r(9032),u=r(201),m=r(4262);let F=(()=>{var i;class c{constructor(t){this.firestore=t}addUnitTest(t,n,a,g){var f=this;return(0,l.A)(function*(){const T=(0,m.H9)(f.firestore,"teams",t,"products",n,"software_testing","unit_tests"),v=yield(0,m.x7)(T);if(v.exists()){const y=v.data()[a];console.log(y),y.push(g),yield(0,m.BN)(T,{[a]:y}),console.log("Document updated with ID: ",v.id)}else console.log("No such document!"),yield(0,m.BN)(T,{[a]:[g]}),console.log("Document created with ID: ",T.id)})()}}return(i=c).\u0275fac=function(t){return new(t||i)(e.KVO(m._7))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),c})();var j=r(8453),P=r(3241),b=r(9549);function M(i,c){if(1&i&&(e.j41(0,"ion-select-option",12),e.EFF(1),e.k0s()),2&i){const o=c.$implicit;e.FS9("value",o),e.R7$(),e.JRh(o)}}function k(i,c){if(1&i&&(e.j41(0,"markdown",14),e.EFF(1),e.k0s()),2&i){const o=c.$implicit;e.R7$(),e.JRh(o.message)}}function R(i,c){if(1&i){const o=e.RV6();e.j41(0,"ion-col",4)(1,"ion-card",9)(2,"ion-card")(3,"ion-card-header")(4,"ion-card-title",10),e.EFF(5,"Choose a file to create a unit test"),e.k0s()(),e.j41(6,"ion-card-content")(7,"ion-card")(8,"ion-card-content")(9,"ion-select",11),e.bIt("ionChange",function(n){e.eBV(o);const a=e.XpG();return e.Njj(a.askForFile(n))}),e.Z7z(10,M,2,2,"ion-select-option",12,e.fX1),e.k0s()()()(),e.j41(12,"ion-card-header")(13,"ion-card-title",10),e.EFF(14,"DevProbeAI Auto-Generated Unit Test"),e.k0s()(),e.j41(15,"ion-card")(16,"ion-card-content",13),e.Z7z(17,k,2,1,"markdown",14,e.fX1),e.k0s()(),e.j41(19,"ion-card-header")(20,"ion-card-title",10),e.EFF(21,"Add A Title or Add the Class Name"),e.k0s()(),e.j41(22,"ion-card-content")(23,"ion-card")(24,"ion-input",15),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG();return e.DH7(a.title,n)||(a.title=n),e.Njj(n)}),e.k0s()()()(),e.j41(25,"ion-button",16),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.saveUnitTest())}),e.EFF(26,"Save Unit Test"),e.k0s()()()}if(2&i){const o=e.XpG();e.R7$(10),e.Dyx(o.files),e.R7$(7),e.Dyx(o.aiMessages),e.R7$(7),e.R50("ngModel",o.title)}}function I(i,c){if(1&i&&(e.j41(0,"markdown",14),e.EFF(1),e.k0s()),2&i){const o=c.$implicit;e.R7$(),e.JRh(o.message)}}function A(i,c){if(1&i){const o=e.RV6();e.j41(0,"ion-col",4)(1,"ion-card",9)(2,"ion-card")(3,"ion-card-header",17)(4,"ion-card-title",10),e.EFF(5,"Give Context To AI"),e.k0s(),e.j41(6,"ion-card-subtitle"),e.EFF(7,"Provide the AI with context to generate a unit test. Code snippets, descriptions, or examples are all helpful."),e.k0s()(),e.j41(8,"ion-card")(9,"ion-card-content")(10,"ion-textarea",18),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG();return e.DH7(a.context,n)||(a.context=n),e.Njj(n)}),e.k0s()(),e.j41(11,"ion-button",16),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.askForFile(n.context))}),e.EFF(12,"Ask AI For Help"),e.k0s()(),e.j41(13,"ion-card-header")(14,"ion-card-title",10),e.EFF(15,"DevProbeAI Auto-Generated Unit Test"),e.k0s()(),e.j41(16,"ion-card")(17,"ion-card-content",13),e.Z7z(18,I,2,1,"markdown",14,e.fX1),e.k0s()(),e.j41(20,"ion-card-header")(21,"ion-card-title",10),e.EFF(22,"Add A Title or Add the Class Name"),e.k0s()(),e.j41(23,"ion-card-content")(24,"ion-card")(25,"ion-input",15),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG();return e.DH7(a.title,n)||(a.title=n),e.Njj(n)}),e.k0s()()()(),e.j41(26,"ion-button",16),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.saveUnitTest())}),e.EFF(27,"Save Unit Test"),e.k0s()()()}if(2&i){const o=e.XpG();e.R7$(10),e.R50("ngModel",o.context),e.R7$(8),e.Dyx(o.aiMessages),e.R7$(7),e.R50("ngModel",o.title)}}function x(i,c){if(1&i){const o=e.RV6();e.j41(0,"ion-col",4)(1,"ion-card")(2,"ion-card")(3,"ion-card-header")(4,"ion-card-title",10),e.EFF(5,"My Unit Test"),e.k0s()(),e.j41(6,"ion-card")(7,"ion-card-content")(8,"ion-textarea",19),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG();return e.DH7(a.myUnitTest,n)||(a.myUnitTest=n),e.Njj(n)}),e.k0s()()(),e.j41(9,"ion-card-header")(10,"ion-card-title",10),e.EFF(11,"Add A Title or Add the Class Name"),e.k0s()(),e.j41(12,"ion-card-content")(13,"ion-card")(14,"ion-input",20),e.mxI("ngModelChange",function(n){e.eBV(o);const a=e.XpG();return e.DH7(a.title,n)||(a.title=n),e.Njj(n)}),e.k0s()()(),e.j41(15,"ion-button",16),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.saveUnitTest())}),e.EFF(16,"Save Unit Test"),e.k0s()()()()}if(2&i){const o=e.XpG();e.R7$(8),e.R50("ngModel",o.myUnitTest),e.R7$(6),e.R50("ngModel",o.title)}}const E=[{path:"",component:(()=>{var i;class c{constructor(t,n,a,g,f){this.loadingCtrl=t,this.githubService=n,this.alertCtrl=a,this.unitTestService=g,this.activatedRoute=f,this.segment="git",this.files=[],this.gitHubData={key:"",repo:"",branch:"",owner:""},this.aiMessages=[],this.vertexAI=(0,e.WQX)(p.L9),this.model=(0,p.oc)(this.vertexAI,{model:"gemini-1.5-flash"}),this.chat=this.model.startChat({history:[{role:"user",parts:[{text:"Hola desde ahora en adelante seras un ingeniero SRE y de QA, te llamas DevProbeAI. Por favor ayudame a crear un TEST UNITARIO para el siguiente archivo, limitate a solo programar, no me expliques nada"}]},{role:"model",parts:[{text:"Claro, soy DevProbeAI, puedo ayudarte con eso. Por favor enviame el contenido del archivo"}]}]}),this.myUnitTest="",this.title="",this.productObjective="",this.productStep=""}ngOnInit(){}ionViewWillEnter(){var t=this;return(0,l.A)(function*(){t.getProductFromParams(),yield t.getGitHubSync(),""!==t.gitHubData.key&&t.getFiles()})()}getProductFromParams(){this.activatedRoute.params.subscribe(t=>{this.productObjective=t.productObjective,this.productStep=t.step}),console.log(this.productObjective),console.log(this.productStep)}getGitHubSync(){var t=this;return(0,l.A)(function*(){yield t.showLoading();const n=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):null;if(!n)return;const a=n.orgName||"";if(t.gitHubData=yield t.githubService.getSyncRepo(a),console.log("this.gitHubData",t.gitHubData),!t.gitHubData||""===t.gitHubData.key)return yield t.hideLoading(),void(yield t.showAlert("If you want to use GitHub, please sync your repository in the settings page","No GitHub Sync found"));yield t.hideLoading()})()}getFiles(){var t=this;return(0,l.A)(function*(){yield t.showLoading(),t.files=yield t.githubService.getFiles(t.gitHubData),0===t.files.length&&(yield t.hideLoading(),yield t.showAlert("No files found in the repository, check sync settings","No Files Found")),yield t.hideLoading()})()}askForFile(t){var n=this;return(0,l.A)(function*(){yield n.showLoading();let a="";try{t.detail.value&&(console.log("file",t.detail.value),a=yield n.githubService.getContentFromFilePath(n.gitHubData,t.detail.value),console.log("content",a))}catch{a=t}yield n.chat.sendMessage(a).then(g=>{n.aiMessages=[],n.aiMessages.push({from:"ai",message:g.response.text(),id:"1"}),console.log("response",g)}),yield n.hideLoading()})()}saveUnitTest(){var t=this;return(0,l.A)(function*(){yield t.showLoading();const n=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):null;if(!n)return;const a=n.orgName||"";return t.myUnitTest&&""!==t.myUnitTest&&t.title&&""!==t.title?(yield t.unitTestService.addUnitTest(a,t.productObjective,t.productStep,{code:t.myUnitTest,state:!1,type:"unit-test",title:t.title}),yield t.hideLoading(),yield t.showAlert("Your Unit Test saved","Unit Test Saved"),void window.history.back()):t.aiMessages.length>0&&t.title&&""!==t.title?(yield t.unitTestService.addUnitTest(a,t.productObjective,t.productStep,{code:t.aiMessages[0].message,state:!1,type:"unit-test",title:t.title}),yield t.hideLoading(),yield t.showAlert("AI generated Unit Test saved","Unit Test Saved"),void window.history.back()):(yield t.hideLoading(),void(yield t.showAlert("Please ask AI or add your Unit Test before saving","No Unit Test Found")))})()}showLoading(){var t=this;return(0,l.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,l.A)(function*(){yield t.loadingCtrl.dismiss()})()}showAlert(t,n){var a=this;return(0,l.A)(function*(){yield(yield a.alertCtrl.create({header:n,message:t,buttons:["OK"]})).present()})()}}return(i=c).\u0275fac=function(t){return new(t||i)(e.rXU(s.Xi),e.rXU(u.p),e.rXU(s.hG),e.rXU(F),e.rXU(_.nX))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-create-unit-test"]],decls:23,vars:4,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4",1,""],["size","12","size-md","12","size-lg","12",1,""],["value","default"],["value","default",3,"click"],["value","devprobeai",3,"click"],["value","myunittest",3,"click"],[1,"m-2","p-5"],[1,"text-white","text-3xl"],["label","Select File From GitHub Repo",3,"ionChange"],[3,"value"],[1,"m-2","p-2"],[1,"text-white"],["placeholder","Title  or Class Name","type","text",1,"p-2","m-2",3,"ngModelChange","ngModel"],["color","primary","expand","block","fill","outline",3,"click"],[1,""],["placeholder","Paste Code",1,"w-full",3,"ngModelChange","ngModel"],["placeholder","Paste Code",1,"w-full","h-96",3,"ngModelChange","ngModel"],["placeholder","Title or Class Name","type","text",1,"p-2","m-2",3,"ngModelChange","ngModel"]],template:function(t,n){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2)(5,"ion-col",3)(6,"p"),e.EFF(7,"Unit tests are used to test individual units of code. They are typically written by developers to test the smallest piece of code, such as a function or method."),e.k0s()()(),e.j41(8,"ion-row",2)(9,"ion-col",4)(10,"ion-segment",5)(11,"ion-segment-button",6),e.bIt("click",function(){return n.segment="git"}),e.j41(12,"ion-label"),e.EFF(13,"GitHub + Dev Probe AI"),e.k0s()(),e.j41(14,"ion-segment-button",7),e.bIt("click",function(){return n.segment="devprobeai"}),e.j41(15,"ion-label"),e.EFF(16,"Dev Probe AI"),e.k0s()(),e.j41(17,"ion-segment-button",8),e.bIt("click",function(){return n.segment="myunittest"}),e.j41(18,"ion-label"),e.EFF(19,"My Unit Test"),e.k0s()()()(),e.DNE(20,R,27,1,"ion-col",4)(21,A,28,2)(22,x,17,2),e.k0s()()()),2&t&&(e.Y8G("title","Create Unit Test"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Create Unit Test"),e.R7$(17),e.vxM(20,"git"===n.segment?20:"devprobeai"===n.segment?21:"myunittest"===n.segment?22:-1))},dependencies:[h.BC,h.vS,s.Jm,s.b_,s.I9,s.ME,s.HW,s.tN,s.hU,s.W9,s.lO,s.$w,s.he,s.ln,s.Gp,s.eP,s.Nm,s.Ip,s.nc,s.Je,s.Gw,j.W,P.p,b.NN]}),c})()}];let D=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[_.iI.forChild(E),_.iI]}),c})();var N=r(5553);let S=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[d.MD,h.YN,s.bv,D,N.h,b.NN]}),c})()}}]);