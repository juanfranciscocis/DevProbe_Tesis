"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1143],{5553:(A,S,r)=>{r.d(S,{h:()=>f});var c=r(177),u=r(7863),n=r(4438);let f=(()=>{var h;class e{}return(h=e).\u0275fac=function(v){return new(v||h)},h.\u0275mod=n.$C({type:h}),h.\u0275inj=n.G2t({imports:[c.MD,u.bv]}),e})()},3241:(A,S,r)=>{r.d(S,{p:()=>f});var c=r(4438),u=r(177),n=r(7863);let f=(()=>{var h;class e{constructor(v){this.location=v,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(h=e).\u0275fac=function(v){return new(v||h)(c.rXU(u.aZ))},h.\u0275cmp=c.VBU({type:h,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(v,i){1&v&&(c.j41(0,"ion-header",0)(1,"ion-toolbar"),c.nrm(2,"ion-menu-button",1),c.j41(3,"ion-icon",2),c.bIt("click",function(){return i.goBack()}),c.k0s(),c.j41(4,"ion-title"),c.EFF(5),c.k0s()()()),2&v&&(c.Y8G("translucent",!0),c.R7$(5),c.JRh(i.title))},dependencies:[n.eU,n.iq,n.MC,n.BC,n.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},8453:(A,S,r)=>{r.d(S,{W:()=>n});var c=r(4438),u=r(7863);let n=(()=>{var f;class h{constructor(){this.title="Title"}ngOnInit(){}}return(f=h).\u0275fac=function(T){return new(T||f)},f.\u0275cmp=c.VBU({type:f,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(T,v){1&T&&(c.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),c.EFF(3),c.k0s()()()),2&T&&(c.R7$(3),c.JRh(v.title))},dependencies:[u.hU,u.ln]}),h})()},1143:(A,S,r)=>{r.r(S),r.d(S,{CreateSystemTestPageModule:()=>N});var c=r(177),u=r(4341),n=r(7863),f=r(7650),h=r(467),e=r(4438),T=r(9032),v=r(147),i=r(5092),g=r(8453),m=r(3241),_=r(9549);function P(o,y){return this.testStepTitle}function E(o,y){return this.aiSteps}function x(o,y){if(1&o){const d=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h1"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"ion-icon",28),e.bIt("click",function(){const s=e.eBV(d).$implicit,l=e.XpG();return e.Njj(l.delete(s.stepTitle))}),e.k0s()()}if(2&o){const d=y.$implicit;e.R7$(3),e.JRh(d.stepTitle),e.R7$(2),e.JRh(d.expectedResults)}}function M(o,y){if(1&o&&(e.j41(0,"ion-select-option",22),e.EFF(1),e.k0s()),2&o){const d=y.$implicit;e.FS9("value",d.name),e.R7$(),e.JRh(d.name)}}function D(o,y){1&o&&(e.j41(0,"ion-card-content",36)(1,"div",38),e.nrm(2,"ion-icon",39),e.k0s()())}function I(o,y){if(1&o){const d=e.RV6();e.j41(0,"ion-card-content",13)(1,"div",40),e.bIt("click",function(){e.eBV(d);const s=e.XpG(2);return e.Njj(s.askAIForHelp("step"))}),e.nrm(2,"ion-icon",41),e.k0s()()}}function O(o,y){if(1&o&&(e.j41(0,"markdown",37),e.EFF(1),e.k0s()),2&o){const d=y.$implicit;e.R7$(),e.JRh(d.message)}}function k(o,y){if(1&o){const d=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",29)(3,"ion-button",30),e.bIt("click",function(){e.eBV(d);const s=e.XpG();return e.Njj(s.cancel())}),e.EFF(4,"Cancel"),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Add Test Step"),e.k0s(),e.j41(7,"ion-buttons",31)(8,"ion-button",30),e.bIt("click",function(){e.eBV(d);const s=e.XpG();return e.Njj(s.save())}),e.EFF(9,"Save"),e.k0s()()()(),e.j41(10,"ion-content",32)(11,"ion-card",33)(12,"ion-label"),e.EFF(13,"Step"),e.k0s(),e.j41(14,"div",34)(15,"div",8)(16,"ion-input",35),e.mxI("ngModelChange",function(s){e.eBV(d);const l=e.XpG();return e.DH7(l.testStepTitle,s)||(l.testStepTitle=s),e.Njj(s)}),e.k0s()()(),e.nrm(17,"br"),e.j41(18,"ion-label"),e.EFF(19,"Expected"),e.k0s(),e.j41(20,"div",34)(21,"div",8)(22,"ion-input",35),e.mxI("ngModelChange",function(s){e.eBV(d);const l=e.XpG();return e.DH7(l.testExpectedResults,s)||(l.testExpectedResults=s),e.Njj(s)}),e.k0s()()()(),e.j41(23,"ion-card"),e.DNE(24,D,3,0,"ion-card-content",36)(25,I,3,0,"ion-card-content",13),e.j41(26,"ion-card-content")(27,"ion-label"),e.EFF(28,"DevProbe AI Answer"),e.k0s()(),e.j41(29,"ion-card-content"),e.Z7z(30,O,2,1,"markdown",37,E,!0),e.k0s()()()}if(2&o){const d=e.XpG();e.R7$(16),e.R50("ngModel",d.testStepTitle),e.R7$(6),e.R50("ngModel",d.testExpectedResults),e.R7$(2),e.vxM(24,d.disableAI?24:-1),e.R7$(),e.vxM(25,d.disableAI?-1:25),e.R7$(5),e.Dyx(d.aiSteps)}}const F=[{path:"",component:(()=>{var o;class y{constructor(t,s,l,p,C){this.activatedRoute=t,this.alertCtrl=s,this.systemTestService=l,this.loadingCtrl=p,this.teamService=C,this.productObjective="",this.productStep="",this.systemTest={title:"",description:"",steps:[],type:"system-test",state:!1,assigned_to:""},this.testStepTitle="",this.testExpectedResults="",this.assignedTester="",this.teamMembers=[],this.user={},this.orgName="",this.vertexAI=(0,e.WQX)(T.L9),this.model=(0,T.oc)(this.vertexAI,{model:"gemini-1.5-flash"}),this.aiSteps=[],this.extraData="",this.disableAI=!1,this.showContext=!1}ngOnInit(){this.getProductFromParams(),this.getTeamMembers()}ionViewWillEnter(){var t=this;return(0,h.A)(function*(){t.getProductFromParams(),yield t.getTeamMembers()})()}getProductFromParams(){this.activatedRoute.params.subscribe(s=>{this.productObjective=s.productObjective,this.productStep=s.step});const t=JSON.parse(localStorage.getItem("user"));this.orgName=t.orgName,console.log(this.productObjective),console.log(this.productStep)}getTeamMembers(){var t=this;return(0,h.A)(function*(){t.teamMembers=yield t.teamService.getTeamByOrganization(t.orgName)})()}onWillDismiss(t){}cancel(){var t;null===(t=this.modal)||void 0===t||t.dismiss()}save(){var t;this.testStepTitle&&this.testExpectedResults?(this.systemTest.steps.push({stepTitle:this.testStepTitle,expectedResults:this.testExpectedResults,isComplete:!1}),this.testStepTitle="",this.testExpectedResults="",null===(t=this.modal)||void 0===t||t.dismiss()):this.showAlert("Please fill out the Step Title and the Expected Result fields.","Error").then(s=>console.log("Alert shown"))}delete(t){this.systemTest.steps=this.systemTest.steps.filter(s=>s.stepTitle!==t)}showAlert(t,s){var l=this;return(0,h.A)(function*(){yield(yield l.alertCtrl.create({header:s,message:t,buttons:["OK"]})).present()})()}createSystemTest(){var t=this;return(0,h.A)(function*(){if(yield t.showLoading(),console.log(t.systemTest),!t.systemTest.title||!t.systemTest.description||0===t.systemTest.steps.length||!t.systemTest.assigned_to)return yield t.hideLoading(),void t.showAlert("Please fill out the title, description, tester and at least one step.","Error").then(l=>console.log("Alert shown"));const s=localStorage.getItem("user");s&&(t.user=JSON.parse(s),t.orgName=t.user.orgName,console.log(t.orgName),yield t.systemTestService.addSystemTest(t.orgName,t.productObjective,t.productStep,t.systemTest),t.systemTest={title:"",description:"",steps:[],type:"system-test",state:!1,assigned_to:""},yield t.hideLoading(),window.history.back())})()}showLoading(){var t=this;return(0,h.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,h.A)(function*(){yield t.loadingCtrl.dismiss()})()}doRefresh(t){}aiGenerate(t){var s=this;return(0,h.A)(function*(){yield s.showLoading();const l={history:[{role:"user",parts:[{text:"Hey, I need help to create a system test case description"}]},{role:"model",parts:[{text:"Sure, I can help you with that. What do you need help with?"}]}],generationConfig:{maxOutputTokens:100}},p={history:[{role:"user",parts:[{text:"Hey, I need help to create a system test case steps, dont give me more information about the test, JUST LIST THE STEPS"}]},{role:"model",parts:[{text:"Sure, I can help you with that."}]}],generationConfig:{maxOutputTokens:250}};if("description"===t){if(!s.systemTest.title||""===s.systemTest.title)return yield s.hideLoading(),void(yield s.showAlert("Please fill out the title of the test before asking for help with the description.","Error").then(a=>console.log("Alert shown")));let C=s.model.startChat(l),b="Given this test title:"+s.systemTest.title+". Here is more information about the test: "+s.extraData+"I need help to create the description of the test, just give me the test main objective";console.log(b),yield C.sendMessage(b).then(a=>{s.systemTest.description=a.response.text()})}if("step"===t){if(!s.systemTest.title||""===s.systemTest.title||!s.systemTest.description||""===s.systemTest.description)return yield s.hideLoading(),void(yield s.showAlert("Please fill out the title and description of the test before asking for help with the steps.","Error").then(a=>console.log("Alert shown")));let C=s.model.startChat(p),b="Given this test title:"+s.systemTest.title+"and this test description:"+s.systemTest.description+". Here is more information about the test: "+s.extraData+"I need help to create the steps of the test, just list the steps";console.log(b),yield C.sendMessage(b).then(a=>{s.aiSteps.push({message:a.response.text(),from:"AI",id:"1"}),console.log(a.response.text())}),s.disableAI=!0}yield s.hideLoading()})()}askAIForHelp(t){var s=this;return(0,h.A)(function*(){yield s.aiGenerate(t).then(p=>console.log("AI generated"));const l=document.getElementById("mk-1");console.log(l),s.chatStyle()})()}chatStyle(){const t=document.getElementById("mk-1");if(console.log(t),!t)return;let s=t.getElementsByTagName("h1"),l=t.getElementsByTagName("h2"),p=t.getElementsByTagName("li"),C=t.getElementsByTagName("strong"),b=t.getElementsByTagName("ul");for(var a=0;a<s.length;a++)s[a].style.fontSize="2.5em",s[a].style.fontWeight="bold";for(a=0;a<l.length;a++)l[a].style.fontSize="2em",l[a].style.fontWeight="bold";for(a=0;a<p.length;a++)p[a].style.fontSize="1.5em",p[a].innerHTML="- "+p[a].innerHTML,console.log(p[a].innerHTML);for(a=0;a<C.length;a++)console.log(C[a].innerHTML);for(a=0;a<b.length;a++){let j=b[a].getElementsByTagName("li");for(var R=0;R<j.length;R++)j[R].style.fontSize="0.5em",j[R].innerHTML="- "+j[R].innerHTML,console.log(j[R].innerHTML)}}giveContext(){this.showAlertWithInputs("Give Global Test Context","Please provide the AI with some context, provide code, HTML, or instructions.",["Give Context","Cancel"],[{name:"context",type:"text",placeholder:"Give AI Context"}]).then(l=>console.log("Alert shown"))}showAlertWithInputs(t,s,l,p){var C=this;return(0,h.A)(function*(){const b=yield C.alertCtrl.create({header:t,message:s,buttons:l,inputs:p});yield b.present();const{data:a}=yield b.onDidDismiss();console.log(a),a.values&&(C.extraData=a.values.context,C.showContext=!0),console.log(C.extraData)})()}onAssignedTester(t){this.assignedTester=t.target.value,this.systemTest.assigned_to=this.assignedTester}}return(o=y).\u0275fac=function(t){return new(t||o)(e.rXU(f.nX),e.rXU(n.hG),e.rXU(v.h),e.rXU(n.Xi),e.rXU(i.O))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-create-system-test"]],viewQuery:function(t,s){if(1&t&&e.GBs(n.Sb,5),2&t){let l;e.mGM(l=e.lsd())&&(s.modal=l.first)}},decls:51,vars:5,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4",1,""],["size","12","size-md","12","size-lg","12",1,""],[1,"min-h-full","flex","flex-col","p-8"],[1,"bg-gray-600","p-2"],[1,"flex","flex-row","items-center","w-full"],[1,"w-full","m-2"],["placeholder","Test Title","type","text",1,"text-3xl",3,"ngModelChange","ngModel"],["placeholder","Test Description","type","text",1,"text-sm",3,"ngModelChange","ngModel"],[1,"rounded-full","p-3","bg-purple-800"],["name","color-wand-outline",3,"click"],[1,""],[1,"flex","flex-row","items-center"],[1,"text-4xl"],["id","open-modal",1,"flex","flex-row","items-center","bg-cyan-800","m-4","p-1",3,"click"],["name","add"],[1,"bg-gray-600"],[1,"flex-row"],[1,"text-3xl","flex","flex-row"],["label","Assign Tester","placeholder","Select an Tester","interface","popover",3,"ionChange"],[3,"value"],["color","primary","expand","block","fill","outline",3,"click"],["trigger","open-modal",3,"willPresent","willDismiss"],["vertical","bottom","horizontal","end","slot","fixed",1,"m-2","z-10",3,"click"],[1,"bg-purple-300","p-4"],["name","chatbubble-outline",1,"w-full","h-full"],["aria-hidden","true","name","trash","slot","end",3,"click"],["slot","start"],[3,"click"],["slot","end"],[1,"flex","flex-col","justify-center","items-center"],[1,"m-2","p-2"],[1,"flex-row","flex","justify-center","items-center","w-full"],["type","text",3,"ngModelChange","ngModel"],[1,"hidden"],["id","mk-1",1,"text-white"],[1,"rounded-full","p-3","bg-gray-400","flex","flex-row","justify-center","items-center","hidden"],["name","color-wand-outline",1,"hidden"],[1,"rounded-full","p-3","bg-purple-800","flex","flex-row","justify-center","items-center",3,"click"],["name","color-wand-outline"]],template:function(t,s){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2)(5,"ion-col",3)(6,"p"),e.EFF(7,"Fill the test from to create a system test."),e.k0s(),e.nrm(8,"p"),e.k0s()(),e.j41(9,"ion-row",2)(10,"ion-col",4)(11,"ion-card",5)(12,"ion-card-title",6)(13,"div",7)(14,"div",8)(15,"ion-input",9),e.mxI("ngModelChange",function(p){return e.DH7(s.systemTest.title,p)||(s.systemTest.title=p),p}),e.k0s()()()(),e.nrm(16,"br"),e.j41(17,"ion-card-title",6)(18,"div",7)(19,"div",8)(20,"ion-textarea",10),e.mxI("ngModelChange",function(p){return e.DH7(s.systemTest.description,p)||(s.systemTest.description=p),p}),e.k0s()(),e.j41(21,"div",11)(22,"ion-icon",12),e.bIt("click",function(){return s.askAIForHelp("description")}),e.k0s()()()(),e.nrm(23,"br"),e.j41(24,"ion-card-title",13)(25,"div",14)(26,"h1",15),e.EFF(27,"Test Steps..."),e.k0s(),e.j41(28,"div",16),e.bIt("click",function(){return s.chatStyle()}),e.nrm(29,"ion-icon",17),e.k0s()()(),e.j41(30,"ion-card-content",18)(31,"ion-list"),e.Z7z(32,x,7,2,"ion-item",null,P,!0),e.k0s()(),e.nrm(34,"br"),e.j41(35,"ion-card-content",19)(36,"ion-card-title",20),e.EFF(37," Assign the test"),e.k0s()(),e.j41(38,"ion-card-content")(39,"ion-card")(40,"ion-select",21),e.bIt("ionChange",function(p){return s.onAssignedTester(p)}),e.Z7z(41,M,2,2,"ion-select-option",22,e.fX1),e.k0s()()(),e.nrm(43,"br"),e.j41(44,"ion-button",23),e.bIt("click",function(){return s.createSystemTest()}),e.EFF(45,"Create System Test"),e.k0s()()()()(),e.j41(46,"ion-modal",24),e.bIt("willPresent",function(){return s.chatStyle()})("willDismiss",function(p){return s.onWillDismiss(p)}),e.DNE(47,k,32,4,"ng-template"),e.k0s(),e.j41(48,"ion-fab",25),e.bIt("click",function(){return s.giveContext()}),e.j41(49,"ion-avatar",26),e.nrm(50,"ion-icon",27),e.k0s()()()),2&t&&(e.Y8G("title","Create System Test"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Create System Test"),e.R7$(12),e.R50("ngModel",s.systemTest.title),e.R7$(5),e.R50("ngModel",s.systemTest.description),e.R7$(12),e.Dyx(s.systemTest.steps),e.R7$(9),e.Dyx(s.teamMembers))},dependencies:[u.BC,u.vS,n.mC,n.Jm,n.QW,n.b_,n.I9,n.tN,n.hU,n.W9,n.Q8,n.lO,n.eU,n.iq,n.$w,n.uz,n.he,n.nf,n.ln,n.Nm,n.Ip,n.nc,n.BC,n.ai,n.Sb,n.Je,n.Gw,g.W,m.p,_.NN]}),y})()}];let w=(()=>{var o;class y{}return(o=y).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[f.iI.forChild(F),f.iI]}),y})();var B=r(5553);let N=(()=>{var o;class y{}return(o=y).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[c.MD,u.YN,n.bv,w,B.h,_.NN]}),y})()},4796:(A,S,r)=>{r.d(S,{u:()=>h});var c=r(467),u=r(8737),n=r(4262),f=r(4438);let h=(()=>{var e;class T{constructor(i,g){this.auth=i,this.firestore=g}registerUser(i){var g=this;return(0,c.A)(function*(){try{const m=yield(0,u.eJ)(g.auth,i.email,i.password);return m.user?(yield(0,n.BN)((0,n.H9)(g.firestore,"users",m.user.uid),{email:i.email,name:i.name,orgName:i.orgName,uid:m.user.uid}),yield(0,n.BN)((0,n.H9)(g.firestore,"teams",`${i.orgName}`),{name:i.orgName,members:[m.user.uid]}),m):null}catch{return null}})()}loginUser(i){var g=this;return(0,c.A)(function*(){try{var m;const _=yield(0,u.x9)(g.auth,i.email,i.password);if(null!==(m=_.user)&&void 0!==m&&m.uid){const P=yield(0,n.x7)((0,n.H9)(g.firestore,"users",_.user.uid));if(P.exists())return localStorage.setItem("user",JSON.stringify(P.data())),_}}catch(_){console.error(_)}return null})()}logoutUser(){var i=this;return(0,c.A)(function*(){yield i.auth.signOut()})()}addMember(i){var g=this;return(0,c.A)(function*(){try{const m=yield(0,u.eJ)(g.auth,i.email,i.password);if(!m.user)return!1;const _={email:i.email,name:i.name,orgName:i.orgName,uid:m.user.uid};return yield(0,n.BN)((0,n.H9)(g.firestore,"users",m.user.uid),_),_}catch{return!1}})()}}return(e=T).\u0275fac=function(i){return new(i||e)(f.KVO(u.Nj),f.KVO(n._7))},e.\u0275prov=f.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),T})()},5092:(A,S,r)=>{r.d(S,{O:()=>h});var c=r(467),u=r(4262),n=r(4438),f=r(4796);let h=(()=>{var e;class T{constructor(i,g){this.firestore=i,this.authService=g}getTeamByOrganization(i){var g=this;return(0,c.A)(function*(){let m=(0,u.H9)(g.firestore,"teams",i);const E=(yield(0,u.x7)(m)).data();let x=[];for(let M=0;M<E.members.length;M++){m=(0,u.H9)(g.firestore,"users",E.members[M]);const I=(yield(0,u.x7)(m)).data();x.push(I)}return x})()}removeMember(i,g){var m=this;return(0,c.A)(function*(){try{let _=(0,u.H9)(m.firestore,"teams",i);const x=(yield(0,u.x7)(_)).data();let M=x.members.filter(I=>I!==g);return yield(0,u.BN)(_,{name:x.name,members:M}),_=(0,u.H9)(m.firestore,"users",g),yield(0,u.BN)(_,{}),yield m.authService,!0}catch{return!1}})()}addMember(i){var g=this;return(0,c.A)(function*(){try{const m=yield g.authService.addMember(i);if(!m)return!1;const _=(0,u.H9)(g.firestore,"teams",i.orgName),E=(yield(0,u.x7)(_)).data();console.log(E);const x=E;let M=x.members;return M.push(m.uid),console.log(M),yield(0,u.mZ)(_,{name:x.name,members:M}),m.uid}catch{return!1}})()}}return(e=T).\u0275fac=function(i){return new(i||e)(n.KVO(u._7),n.KVO(f.u))},e.\u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),T})()}}]);