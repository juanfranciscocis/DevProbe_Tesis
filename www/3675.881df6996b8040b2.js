"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3675],{5553:(f,I,c)=>{c.d(I,{h:()=>u});var a=c(177),_=c(7863),s=c(4438);let u=(()=>{var r;class n{}return(r=n).\u0275fac=function(m){return new(m||r)},r.\u0275mod=s.$C({type:r}),r.\u0275inj=s.G2t({imports:[a.MD,_.bv]}),n})()},3241:(f,I,c)=>{c.d(I,{p:()=>u});var a=c(4438),_=c(177),s=c(7863);let u=(()=>{var r;class n{constructor(m){this.location=m,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(r=n).\u0275fac=function(m){return new(m||r)(a.rXU(_.aZ))},r.\u0275cmp=a.VBU({type:r,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(m,h){1&m&&(a.j41(0,"ion-header",0)(1,"ion-toolbar"),a.nrm(2,"ion-menu-button",1),a.j41(3,"ion-icon",2),a.bIt("click",function(){return h.goBack()}),a.k0s(),a.j41(4,"ion-title"),a.EFF(5),a.k0s()()()),2&m&&(a.Y8G("translucent",!0),a.R7$(5),a.JRh(h.title))},dependencies:[s.eU,s.iq,s.MC,s.BC,s.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),n})()},8453:(f,I,c)=>{c.d(I,{W:()=>s});var a=c(4438),_=c(7863);let s=(()=>{var u;class r{constructor(){this.title="Title"}ngOnInit(){}}return(u=r).\u0275fac=function(p){return new(p||u)},u.\u0275cmp=a.VBU({type:u,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(p,m){1&p&&(a.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),a.EFF(3),a.k0s()()()),2&p&&(a.R7$(3),a.JRh(m.title))},dependencies:[_.hU,_.ln]}),r})()},3675:(f,I,c)=>{c.r(I),c.d(I,{IncidentManagerPageModule:()=>E});var a=c(177),_=c(4341),s=c(7863),u=c(7650),r=c(467),n=c(4438),p=c(4624),m=c(8453),h=c(3241);function M(o,g){1&o&&(n.j41(0,"ion-chip"),n.EFF(1," Assigned to you"),n.k0s())}function v(o,g){if(1&o){const l=n.RV6();n.j41(0,"ion-item",7),n.bIt("click",function(){const t=n.eBV(l).$implicit,i=n.XpG();return n.Njj(i.goToIncident(t))}),n.j41(1,"ion-label",8)(2,"div",9)(3,"h2"),n.EFF(4),n.k0s(),n.DNE(5,M,2,0,"ion-chip"),n.k0s()()()}if(2&o){const l=g.$implicit;n.R7$(4),n.JRh(l.title),n.R7$(),n.vxM(5,l.iAmIn?5:-1)}}function O(o,g){1&o&&(n.j41(0,"ion-chip"),n.EFF(1," Assigned to you"),n.k0s())}function C(o,g){if(1&o){const l=n.RV6();n.j41(0,"ion-item",7),n.bIt("click",function(){const t=n.eBV(l).$implicit,i=n.XpG();return n.Njj(i.goToIncident(t))}),n.j41(1,"ion-label",8)(2,"div",9)(3,"h2"),n.EFF(4),n.k0s(),n.DNE(5,O,2,0,"ion-chip"),n.k0s()()()}if(2&o){const l=g.$implicit;n.R7$(4),n.JRh(l.title),n.R7$(),n.vxM(5,l.iAmIn?5:-1)}}const P=[{path:"",component:(()=>{var o;class g{constructor(e,t,i,d){this.router=e,this.activatedRoute=t,this.loadingCtrl=i,this.incidentService=d,this.productStep="",this.productObjective="",this.orgName="",this.openIncidents=[],this.closeIncidents=[]}ngOnInit(){}ionViewWillEnter(){var e=this;return(0,r.A)(function*(){yield e.showLoading(),e.getParams(),yield e.getOpenIncidents(),yield e.closeIncident(),yield e.getMyOpenIncidents(),yield e.getMyClosedIncidents(),yield e.hideLoading()})()}getParams(){this.activatedRoute.params.subscribe(t=>{this.productObjective=t.productObjective,this.productStep=t.step});const e=JSON.parse(localStorage.getItem("user"));this.orgName=e.orgName,console.log(this.orgName),console.log(this.productObjective),console.log(this.productStep)}getOpenIncidents(){var e=this;return(0,r.A)(function*(){e.openIncidents=yield e.incidentService.getIncidents(e.orgName,e.productObjective,e.productStep),e.openIncidents=e.openIncidents.filter(t=>"open"===t.state)})()}closeIncident(){var e=this;return(0,r.A)(function*(){e.closeIncidents=yield e.incidentService.getIncidents(e.orgName,e.productObjective,e.productStep),e.closeIncidents=e.closeIncidents.filter(t=>"closed"===t.state)})()}getMyOpenIncidents(){var e=this;return(0,r.A)(function*(){const t=JSON.parse(localStorage.getItem("user"));for(let i=0;i<e.openIncidents.length;i++){(t.name===e.openIncidents[i].incidentCommander||t.name===e.openIncidents[i].operations_lead||t.name===e.openIncidents[i].communications_lead)&&(e.openIncidents[i].iAmIn=!0);for(let d=0;d<e.openIncidents[i].operation_team.length;d++)console.log(e.openIncidents[i].operation_team[d]),t.name===e.openIncidents[i].operation_team[d]&&(e.openIncidents[i].iAmIn=!0),console.log("Team ",d,e.openIncidents[i].operation_team[d])}console.log("My Open Incidents")})()}getMyClosedIncidents(){var e=this;return(0,r.A)(function*(){const t=JSON.parse(localStorage.getItem("user"));for(let i=0;i<e.closeIncidents.length;i++){(t.name===e.closeIncidents[i].incidentCommander||t.name===e.closeIncidents[i].operations_lead||t.name===e.closeIncidents[i].communications_lead)&&(e.closeIncidents[i].iAmIn=!0);for(let d=0;d<e.closeIncidents[i].operation_team.length;d++)console.log(e.closeIncidents[i].operation_team[d]),t.name===e.closeIncidents[i].operation_team[d]&&(e.closeIncidents[i].iAmIn=!0),console.log("Team ",d,e.closeIncidents[i].operation_team[d])}console.log("My Closed Incidents")})()}navigateToNewIncident(){var e=this;return(0,r.A)(function*(){yield e.router.navigate(["/new-incident",{productObjective:e.productObjective,step:e.productStep}])})()}goToIncident(e){var t=this;return(0,r.A)(function*(){yield t.router.navigate(["incident-details",{productObjective:t.productObjective,step:t.productStep,incident:JSON.stringify(e)}])})()}showLoading(){var e=this;return(0,r.A)(function*(){yield(yield e.loadingCtrl.create({})).present()})()}hideLoading(){var e=this;return(0,r.A)(function*(){yield e.loadingCtrl.dismiss()})()}}return(o=g).\u0275fac=function(e){return new(e||o)(n.rXU(u.Ix),n.rXU(u.nX),n.rXU(s.Xi),n.rXU(p.I))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-incident-manager"]],decls:22,vars:7,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","12","size-lg","12",1,""],["color","danger",1,"w-full",3,"click"],[1,"p-5"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"text-white"],[1,"flex","flex-row","justify-between","items-center"]],template:function(e,t){1&e&&(n.nrm(0,"app-header-return",0),n.j41(1,"ion-content",1)(2,"ion-grid"),n.nrm(3,"app-title",0),n.j41(4,"ion-row",2)(5,"ion-col",3)(6,"ion-button",4),n.bIt("click",function(){return t.navigateToNewIncident()}),n.EFF(7,"New Incident"),n.k0s()()(),n.nrm(8,"app-title",0),n.j41(9,"ion-row",2)(10,"ion-col",3)(11,"ion-card",5)(12,"ion-card-content")(13,"ion-list"),n.DNE(14,v,6,2,"ion-item",6),n.k0s()()()()(),n.nrm(15,"app-title",0),n.j41(16,"ion-row",2)(17,"ion-col",3)(18,"ion-card",5)(19,"ion-card-content")(20,"ion-list"),n.DNE(21,C,6,2,"ion-item",6),n.k0s()()()()()()()),2&e&&(n.Y8G("title","Incident Manager"),n.R7$(),n.Y8G("fullscreen",!0),n.R7$(2),n.Y8G("title","Incident Manager"),n.R7$(5),n.Y8G("title","Open Incidents"),n.R7$(6),n.Y8G("ngForOf",t.openIncidents),n.R7$(),n.Y8G("title","Closed Incidents"),n.R7$(6),n.Y8G("ngForOf",t.closeIncidents))},dependencies:[a.Sq,s.Jm,s.b_,s.I9,s.ZB,s.hU,s.W9,s.lO,s.uz,s.he,s.nf,s.ln,m.W,h.p]}),g})()}];let R=(()=>{var o;class g{}return(o=g).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[u.iI.forChild(P),u.iI]}),g})();var y=c(5553);let E=(()=>{var o;class g{}return(o=g).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[a.MD,_.YN,s.bv,R,y.h]}),g})()}}]);