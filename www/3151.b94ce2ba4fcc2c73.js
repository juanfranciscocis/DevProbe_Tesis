"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3151],{5553:(_,C,a)=>{a.d(C,{h:()=>v});var r=a(177),y=a(7863),n=a(4438);let v=(()=>{var s;class e{}return(s=e).\u0275fac=function(m){return new(m||s)},s.\u0275mod=n.$C({type:s}),s.\u0275inj=n.G2t({imports:[r.MD,y.bv]}),e})()},3241:(_,C,a)=>{a.d(C,{p:()=>v});var r=a(4438),y=a(177),n=a(7863);let v=(()=>{var s;class e{constructor(m){this.location=m,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(s=e).\u0275fac=function(m){return new(m||s)(r.rXU(y.aZ))},s.\u0275cmp=r.VBU({type:s,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(m,G){1&m&&(r.j41(0,"ion-header",0)(1,"ion-toolbar"),r.nrm(2,"ion-menu-button",1),r.j41(3,"ion-icon",2),r.bIt("click",function(){return G.goBack()}),r.k0s(),r.j41(4,"ion-title"),r.EFF(5),r.k0s()()()),2&m&&(r.Y8G("translucent",!0),r.R7$(5),r.JRh(G.title))},dependencies:[n.eU,n.iq,n.MC,n.BC,n.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},3151:(_,C,a)=>{a.r(C),a.d(C,{FlameGraphComparePageModule:()=>N});var r=a(177),y=a(4341),n=a(7863),v=a(4848),s=a(467),e=a(4438),F=a(6560),m=a(8453),G=a(3241),R=a(7616),b=a(2814);function T(t,d){if(1&t&&(e.j41(0,"ion-col",8)(1,"ion-card",9),e.qex(2),e.j41(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),e.EFF(6),e.k0s()(),e.nrm(7,"ngx-flamegraph",10),e.k0s(),e.bVm(),e.k0s()()),2&t){const h=d.$implicit,o=e.XpG();e.R7$(6),e.SpI("Data for: ",h,""),e.R7$(),e.Y8G("config",o.configurations[h])}}const U=[{path:"",component:(()=>{var t;class d{constructor(o,l,g){this.flameGraphService=o,this.loadingCtrl=l,this.route=g,this.product={},this.datesForComparison=[],this.lenDates=0,this.configurations={},this.aiAnalytic="# holaaaa"}ngOnInit(){}ionViewWillEnter(){this.getProductAndDatesFromParams(),this.getFlameGraph()}getFlameGraph(){var o=this;return(0,s.A)(function*(){try{yield o.showLoading();const l=localStorage.getItem("user");if(!l)return;const i=JSON.parse(l).orgName;console.log(i),o.configurations={};for(const c of o.datesForComparison){const p=yield o.flameGraphService.getFlameGraphByDate(i,o.product.productObjective,c);console.log(p);let u=[],f=[];for(let M in p){const D=null==p?void 0:p[M];f=Object.keys(D),console.log("keys",f);const B=100/f.length;for(let E in f){const O=[];for(let P=0;P<D[f[E]].length;P++)O[P]=o.transformToRawData(D[f[E]][P]);console.log("server1",O);const $={label:f[E],value:B,children:[...O]};u.push($)}console.log("server",u)}u=[{label:"root",value:100,children:u}],o.configurations[c]={data:u}}console.log("Final configurations",o.configurations),yield o.hideLoading()}catch(l){console.log(l),yield o.hideLoading()}})()}getProductAndDatesFromParams(){this.route.queryParams.subscribe(o=>{this.product=JSON.parse(o.product),this.datesForComparison=JSON.parse(o.dates)}),this.lenDates=this.datesForComparison.length,console.log(this.product.productObjective),console.log(this.datesForComparison)}doRefresh(o){}showLoading(){var o=this;return(0,s.A)(function*(){yield(yield o.loadingCtrl.create({})).present()})()}hideLoading(){var o=this;return(0,s.A)(function*(){yield o.loadingCtrl.dismiss()})()}average(o){const l=o.map(Number);return l.reduce((i,c)=>i+c,0)/l.length}transformToRawData(o){const l=o.cpu_usage?this.average(o.cpu_usage):0,g=[];for(const i in o){if("id"===i||"cpu_usage"===i)continue;const c=o[i];if("object"!=typeof c||Array.isArray(c))"object"!=typeof c&&g.push({label:i,value:0,children:[]});else if("sub_services"===i)for(const p in c){const u=c[p],M={label:p,value:u.cpu_usage?this.average(u.cpu_usage):0,children:this.transformToRawData(u).children};g.push(M)}else{const u={label:i,value:c.cpu_usage?this.average(c.cpu_usage):0,children:this.transformToRawData(c).children};g.push(u)}}return{label:o.id,value:l,children:g}}}return(t=d).\u0275fac=function(o){return new(o||t)(e.rXU(F.x),e.rXU(n.Xi),e.rXU(v.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-flame-graph-compare"]],decls:16,vars:5,consts:[[3,"title"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4","class","",4,"ngFor","ngForOf"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-center"],[1,"min-w-full"],[1,"text-white"],["size","12","size-md","4","size-lg","4",1,""],[1,"w-full"],[3,"config"]],template:function(o,l){1&o&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-refresher",2),e.bIt("ionRefresh",function(i){return l.doRefresh(i)}),e.nrm(3,"ion-refresher-content"),e.k0s(),e.nrm(4,"app-title",0),e.j41(5,"ion-row",3),e.DNE(6,T,8,2,"ion-col",4),e.k0s(),e.j41(7,"ion-row",3)(8,"ion-col",5)(9,"ion-card",6)(10,"ion-card-header")(11,"ion-card-title"),e.EFF(12,"DevProbe AI Analytic"),e.k0s()(),e.j41(13,"ion-card-content")(14,"markdown",7),e.EFF(15),e.k0s()()()()()()),2&o&&(e.Y8G("title","Compare Flame Graphs"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(3),e.Y8G("title","Compare Flame Graphs"),e.R7$(2),e.Y8G("ngForOf",l.datesForComparison),e.R7$(9),e.JRh(l.aiAnalytic))},dependencies:[r.Sq,n.b_,n.I9,n.ME,n.tN,n.hU,n.W9,n.To,n.Ki,n.ln,m.W,G.p,R.E,b.NN]}),d})()}];let I=(()=>{var t;class d{}return(t=d).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[v.iI.forChild(U),v.iI]}),d})();var j=a(5553);let N=(()=>{var t;class d{}return(t=d).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[r.MD,y.YN,n.bv,I,j.h,R.n,b.NN]}),d})()}}]);