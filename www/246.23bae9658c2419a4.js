"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[246],{246:(F,h,n)=>{n.r(h),n.d(h,{ShowMapPageModule:()=>L});var g=n(177),m=n(4341),l=n(7863),p=n(305),s=n(467),c=n(8244),f=n(5841),o=n(4438),v=n(9640),y=n(3241);function M(e,i){if(1&e&&(o.j41(0,"p"),o.EFF(1),o.k0s()),2&e){const d=i.$implicit;o.R7$(),o.Lme("",d.countryFrom," : ",d.latency,"ms")}}const S=[{path:"",component:(()=>{var e;class i{constructor(t,a,r){this.ripeService=t,this.loadingCtrl=a,this.route=r,this.ripeData=[],this.orgName="",this.productObjective="",this.description=""}ngOnInit(){}ionViewDidEnter(){var t=this;return(0,s.A)(function*(){yield t.showLoading(),t.route.queryParams.subscribe(function(){var a=(0,s.A)(function*(r){t.description=r.description,t.productObjective=r.productObjective,t.orgName=r.orgName,console.log(t.orgName),console.log(t.productObjective),console.log(t.description),yield t.ripeService.getAllResultsByDescription(t.orgName,t.productObjective,t.description).then(u=>{t.ripeData=u}).then(()=>{t.leafletMap()})});return function(r){return a.apply(this,arguments)}}())})()}leafletMap(){var t=this;return(0,s.A)(function*(){t.map=c.map("mapId").setView([0,0],2.5),c.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"edupala.com \xa9 Angular LeafLet",minZoom:2.5,maxZoom:8}).addTo(t.map),setTimeout(()=>{t.map.invalidateSize(),t.addPaths()},1e3)})()}ngOnDestroy(){this.map.remove()}addPaths(){var t=this;return(0,s.A)(function*(){t.ripeData=t.ripeData.data,t.ripeData.sort((a,r)=>a.latency<r.latency?1:-1);for(let a of t.ripeData){let r="#"+(16777215*Math.random()|0).toString(16);(0,f.antPath)([[a.fromLatitude,a.fromLongitude],[a.toLatitude,a.toLongitude]],{color:r,weight:5,opacity:.6}).addTo(t.map);let u=c.divIcon({className:"label-icon",html:`<div style="background-color: white; padding: 2px; border-radius: 3px; display: flex; justify-content: center; align-items: center; box-shadow: 0 0 5px 0 rgba(0,0,0,0.2);"><p style="color:black">Latency: ${a.latency} ms</p></div>`,iconSize:[200,20]});c.marker([(a.fromLatitude+a.toLatitude)/2,(a.fromLongitude+a.toLongitude)/2],{icon:u}).addTo(t.map)}yield t.hideLoading()})()}showLoading(){var t=this;return(0,s.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,s.A)(function*(){yield t.loadingCtrl.dismiss()})()}}return(e=i).\u0275fac=function(t){return new(t||e)(o.rXU(v.Q),o.rXU(l.Xi),o.rXU(p.nX))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-show-map"]],decls:10,vars:1,consts:[[3,"title"],[1,"relative"],["color","dark",1,"fixed-card","hidden","lg:block"],["color","black"],["id","mapId",2,"width","100%","height","100%"]],template:function(t,a){1&t&&(o.nrm(0,"app-header-return",0),o.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header")(4,"ion-card-title",3),o.EFF(5,"Latency Higher to Lower"),o.k0s()(),o.j41(6,"ion-card-content"),o.Z7z(7,M,2,2,"p",null,o.fX1),o.k0s()(),o.nrm(9,"div",4),o.k0s()),2&t&&(o.Y8G("title","Show Map"),o.R7$(7),o.Dyx(a.ripeData))},dependencies:[l.b_,l.I9,l.ME,l.tN,l.W9,y.p],styles:[".fixed-card[_ngcontent-%COMP%]{position:absolute;top:10px;left:50px;z-index:1000;background-color:#fff;border-radius:10px;box-shadow:0 2px 10px #0003}"]}),i})()}];let w=(()=>{var e;class i{}return(e=i).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[p.iI.forChild(S),p.iI]}),i})();var P=n(5553);let L=(()=>{var e;class i{}return(e=i).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[g.MD,m.YN,l.bv,w,P.h]}),i})()}}]);