"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2643],{5553:(G,f,r)=>{r.d(f,{h:()=>m});var s=r(177),v=r(7863),u=r(4438);let m=(()=>{var l;class e{}return(l=e).\u0275fac=function(c){return new(c||l)},l.\u0275mod=u.$C({type:l}),l.\u0275inj=u.G2t({imports:[s.MD,v.bv]}),e})()},3241:(G,f,r)=>{r.d(f,{p:()=>m});var s=r(4438),v=r(177),u=r(7863);let m=(()=>{var l;class e{constructor(c){this.location=c,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(l=e).\u0275fac=function(c){return new(c||l)(s.rXU(v.aZ))},l.\u0275cmp=s.VBU({type:l,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(c,P){1&c&&(s.j41(0,"ion-header",0)(1,"ion-toolbar"),s.nrm(2,"ion-menu-button",1),s.j41(3,"ion-icon",2),s.bIt("click",function(){return P.goBack()}),s.k0s(),s.j41(4,"ion-title"),s.EFF(5),s.k0s()()()),2&c&&(s.Y8G("translucent",!0),s.R7$(5),s.JRh(P.title))},dependencies:[u.eU,u.iq,u.MC,u.BC,u.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},2643:(G,f,r)=>{r.r(f),r.d(f,{GraphPageModule:()=>j});var s=r(177),v=r(4341),u=r(7863),m=r(305),l=r(467),e=r(4438),y=r(9640),c=r(4688),P=r(8453),M=r(3241);function O(i,d){if(1&i&&(e.j41(0,"ion-col",4)(1,"ion-card",5)(2,"h1",6),e.EFF(3),e.k0s(),e.nrm(4,"br")(5,"div",7),e.k0s()()),2&i){const p=d.$implicit,t=e.XpG();e.R7$(3),e.JRh(p),e.R7$(2),e.Y8G("options",t.countryOptions[p])}}const R=[{path:"",component:(()=>{var i;class d{constructor(t,n){this.ripeService=t,this.route=n,this.orgName="",this.productObjective="",this.user={},this.data=[],this.countries=[],this.countryOptions={}}ionViewWillEnter(){var t=this;return(0,l.A)(function*(){t.route.queryParams.subscribe(o=>{t.productObjective=o.product});const n=localStorage.getItem("user");n&&(t.user=JSON.parse(n),t.orgName=t.user.orgName,t.data=[],t.getResultsHistoryforLatency().then(()=>{t.groupByDate().then(()=>{t.groupByCountry().then(()=>{t.populateCountries(),t.generateCountryOptions()})})}))})()}getResultsHistoryforLatency(){var t=this;return(0,l.A)(function*(){yield t.ripeService.getHistoryResults(t.orgName,t.productObjective).then(n=>{for(let o=0;o<n.length;o++){let a=n[o].id.split("-");t.data.push({id:a[1],data:n[o].data.data,date:a[3]+"/"+a[2]+"/"+a[4],time:a[5]})}})})()}groupByDate(){var t=this;return(0,l.A)(function*(){let n={};for(let o=0;o<t.data.length;o++){let a=t.data[o].date;n[a]||(n[a]=[]),n[a].push(...t.data[o].data)}t.data=n,console.log(t.data)})()}groupByCountry(){var t=this;return(0,l.A)(function*(){let n={};for(let o in t.data){let a=t.data[o];n[o]||(n[o]={});for(let h=0;h<a.length;h++){let g=a[h].countryFrom;n[o][g]||(n[o][g]=[]),n[o][g].push(a[h])}}t.data=n,console.log(t.data)})()}populateCountries(){var t=this;return(0,l.A)(function*(){const n=new Set;for(let o in t.data)for(let a in t.data[o])n.add(a);t.countries=Array.from(n),console.log(t.countries)})()}generateCountryOptions(){for(let t of this.countries){const n=[],o=[];for(let a in this.data){n.push(a);let h=0,g=0;if(this.data[a][t]){for(let C=0;C<this.data[a][t].length;C++)h+=this.data[a][t][C].latency,g++;o.push(h/g)}else o.push(0)}this.countryOptions[t]={legend:{data:[t],align:"left"},tooltip:{},xAxis:{data:n,silent:!1,splitLine:{show:!1}},yAxis:{},series:[{name:t,type:"bar",data:o,animationDelay:a=>10*a}],animationEasing:"elasticOut",animationDelayUpdate:a=>5*a}}}ngOnInit(){}}return(i=d).\u0275fac=function(t){return new(t||i)(e.rXU(y.Q),e.rXU(m.nX))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-graph"]],decls:6,vars:4,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","6","size-lg","6","class","flex flex-row justify-center",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","6",1,"flex","flex-row","justify-center"],[1,"w-full","h-96","p-6","flex","flex-col","justify-center","items-center"],[1,"text-6xl","font-bold","text-blue-500"],["echarts","",1,"demo-chart","h-full","w-full",3,"options"]],template:function(t,n){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2),e.DNE(5,O,6,2,"ion-col",3),e.k0s()()()),2&t&&(e.Y8G("title","Graph"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Graph"),e.R7$(2),e.Y8G("ngForOf",n.countries))},dependencies:[s.Sq,u.b_,u.hU,u.W9,u.lO,u.ln,c.$P,P.W,M.p]}),d})()}];let D=(()=>{var i;class d{}return(i=d).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[m.iI.forChild(R),m.iI]}),d})();var E=r(5553);let j=(()=>{var i;class d{}return(i=d).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[s.MD,v.YN,u.bv,D,E.h]}),d})()}}]);