"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7923],{5553:(M,f,r)=>{r.d(f,{h:()=>m});var l=r(177),v=r(7863),c=r(4438);let m=(()=>{var s;class e{}return(s=e).\u0275fac=function(u){return new(u||s)},s.\u0275mod=c.$C({type:s}),s.\u0275inj=c.G2t({imports:[l.MD,v.bv]}),e})()},3241:(M,f,r)=>{r.d(f,{p:()=>m});var l=r(4438),v=r(177),c=r(7863);let m=(()=>{var s;class e{constructor(u){this.location=u,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(s=e).\u0275fac=function(u){return new(u||s)(l.rXU(v.aZ))},s.\u0275cmp=l.VBU({type:s,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(u,P){1&u&&(l.j41(0,"ion-header",0)(1,"ion-toolbar"),l.nrm(2,"ion-menu-button",1),l.j41(3,"ion-icon",2),l.bIt("click",function(){return P.goBack()}),l.k0s(),l.j41(4,"ion-title"),l.EFF(5),l.k0s()()()),2&u&&(l.Y8G("translucent",!0),l.R7$(5),l.JRh(P.title))},dependencies:[c.eU,c.iq,c.MC,c.BC,c.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},7923:(M,f,r)=>{r.r(f),r.d(f,{GraphPageModule:()=>_});var l=r(177),v=r(4341),c=r(7863),m=r(305),s=r(467),e=r(4438),y=r(9640),u=r(4688),P=r(3241);function O(i,d){if(1&i&&(e.j41(0,"ion-col",9)(1,"ion-card",10)(2,"h1",11),e.EFF(3),e.k0s(),e.nrm(4,"br")(5,"div",12),e.k0s()()),2&i){const h=d.$implicit,t=e.XpG();e.R7$(3),e.JRh(h),e.R7$(2),e.Y8G("options",t.countryOptions[h])}}const G=[{path:"",component:(()=>{var i;class d{constructor(t,n){this.ripeService=t,this.route=n,this.orgName="",this.productObjective="",this.user={},this.data=[],this.countries=[],this.countryOptions={}}ionViewWillEnter(){var t=this;return(0,s.A)(function*(){t.route.queryParams.subscribe(o=>{t.productObjective=o.product});const n=localStorage.getItem("user");n&&(t.user=JSON.parse(n),t.orgName=t.user.orgName,t.data=[],t.getResultsHistoryforLatency().then(()=>{t.groupByDate().then(()=>{t.groupByCountry().then(()=>{t.populateCountries(),t.generateCountryOptions()})})}))})()}getResultsHistoryforLatency(){var t=this;return(0,s.A)(function*(){yield t.ripeService.getHistoryResults(t.orgName,t.productObjective).then(n=>{for(let o=0;o<n.length;o++){let a=n[o].id.split("-");t.data.push({id:a[1],data:n[o].data.data,date:a[3]+"/"+a[2]+"/"+a[4],time:a[5]})}})})()}groupByDate(){var t=this;return(0,s.A)(function*(){let n={};for(let o=0;o<t.data.length;o++){let a=t.data[o].date;n[a]||(n[a]=[]),n[a].push(...t.data[o].data)}t.data=n,console.log(t.data)})()}groupByCountry(){var t=this;return(0,s.A)(function*(){let n={};for(let o in t.data){let a=t.data[o];n[o]||(n[o]={});for(let g=0;g<a.length;g++){let p=a[g].countryFrom;n[o][p]||(n[o][p]=[]),n[o][p].push(a[g])}}t.data=n,console.log(t.data)})()}populateCountries(){var t=this;return(0,s.A)(function*(){const n=new Set;for(let o in t.data)for(let a in t.data[o])n.add(a);t.countries=Array.from(n),console.log(t.countries)})()}generateRandomColor(){let n="#";for(let o=0;o<6;o++)n+="0123456789ABCDEF"[Math.floor(16*Math.random())];return n}generateCountryOptions(){for(let t of this.countries){const n=[],o=[];for(let a in this.data){let g=0,p=0;if(this.data[a][t]){for(let C=0;C<this.data[a][t].length;C++)g+=this.data[a][t][C].latency,p++;p>0&&(n.push(a),o.push(g/p))}}o.length>0&&(this.countryOptions[t]={legend:{data:[t],align:"left",backgroundColor:"rgba(255, 255, 255, 0.9)"},tooltip:{},xAxis:{data:n,silent:!1,splitLine:{show:!1}},yAxis:{},series:[{name:t,type:"bar",data:o,itemStyle:{color:this.generateRandomColor()},animationDelay:a=>10*a}],animationEasing:"elasticOut",animationDelayUpdate:a=>5*a})}}refresh(){window.location.reload()}ngOnInit(){}}return(i=d).\u0275fac=function(t){return new(t||i)(e.rXU(y.Q),e.rXU(m.nX))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-graph"]],decls:11,vars:3,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10"],["size","6","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"],["size","6","size-md","6","size-lg","6",1,"text-right"],["name","refresh",1,"text-4xl","lg:text-6xl","font-bold","onreloadhover",3,"click"],[1,"lg:m-10","md:m-10"],["size","12","size-md","6","size-lg","6","class","flex flex-row justify-center",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","6",1,"flex","flex-row","justify-center"],[1,"w-full","h-96","p-6","flex","flex-col","justify-center","items-center"],[1,"text-6xl","font-bold","text-white"],["echarts","",1,"demo-chart","h-full","w-full",3,"options"]],template:function(t,n){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid")(3,"ion-row",2)(4,"ion-col",3)(5,"h1",4),e.EFF(6,"Latency Graph"),e.k0s()(),e.j41(7,"ion-col",5)(8,"ion-icon",6),e.bIt("click",function(){return n.refresh()}),e.k0s()()(),e.j41(9,"ion-row",7),e.DNE(10,O,6,2,"ion-col",8),e.k0s()()()),2&t&&(e.Y8G("title","Latency Graph"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(9),e.Y8G("ngForOf",n.countries))},dependencies:[l.Sq,c.b_,c.hU,c.W9,c.lO,c.iq,c.ln,u.$P,P.p],styles:["@keyframes _ngcontent-%COMP%_rotate90deg{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.onreloadhover[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_rotate90deg .9s linear infinite}"]}),d})()}];let R=(()=>{var i;class d{}return(i=d).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[m.iI.forChild(G),m.iI]}),d})();var E=r(5553);let _=(()=>{var i;class d{}return(i=d).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[l.MD,v.YN,c.bv,R,E.h]}),d})()}}]);