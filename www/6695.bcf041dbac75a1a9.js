"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6695],{5553:(b,C,a)=>{a.d(C,{h:()=>p});var c=a(177),u=a(7863),o=a(4438);let p=(()=>{var m;class e{}return(m=e).\u0275fac=function(T){return new(T||m)},m.\u0275mod=o.$C({type:m}),m.\u0275inj=o.G2t({imports:[c.MD,u.bv]}),e})()},3241:(b,C,a)=>{a.d(C,{p:()=>p});var c=a(4438),u=a(177),o=a(7863);let p=(()=>{var m;class e{constructor(T){this.location=T,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(m=e).\u0275fac=function(T){return new(T||m)(c.rXU(u.aZ))},m.\u0275cmp=c.VBU({type:m,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(T,s){1&T&&(c.j41(0,"ion-header",0)(1,"ion-toolbar"),c.nrm(2,"ion-menu-button",1),c.j41(3,"ion-icon",2),c.bIt("click",function(){return s.goBack()}),c.k0s(),c.j41(4,"ion-title"),c.EFF(5),c.k0s()()()),2&T&&(c.Y8G("translucent",!0),c.R7$(5),c.JRh(s.title))},dependencies:[o.eU,o.iq,o.MC,o.BC,o.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},8453:(b,C,a)=>{a.d(C,{W:()=>o});var c=a(4438),u=a(7863);let o=(()=>{var p;class m{constructor(){this.title="Title"}ngOnInit(){}}return(p=m).\u0275fac=function(f){return new(f||p)},p.\u0275cmp=c.VBU({type:p,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(f,T){1&f&&(c.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),c.EFF(3),c.k0s()()()),2&f&&(c.R7$(3),c.JRh(T.title))},dependencies:[u.hU,u.ln]}),m})()},6695:(b,C,a)=>{a.r(C),a.d(C,{CreateUnitTestPageModule:()=>S});var c=a(177),u=a(4341),o=a(7863),p=a(7650),m=a(467),e=a(4438),f=a(9032),T=a(201),s=a(1854),g=a(5092),d=a(8453),h=a(3241),M=a(9549);function U(r,_){if(1&r&&(e.j41(0,"ion-select-option",14),e.EFF(1),e.k0s()),2&r){const i=_.$implicit;e.FS9("value",i),e.R7$(),e.JRh(i)}}function y(r,_){if(1&r&&(e.j41(0,"markdown",17),e.EFF(1),e.k0s()),2&r){const i=_.$implicit;e.R7$(),e.JRh(i.message)}}function v(r,_){if(1&r&&(e.j41(0,"ion-select-option",14),e.EFF(1),e.k0s()),2&r){const i=_.$implicit;e.FS9("value",i.name),e.R7$(),e.JRh(i.name)}}function A(r,_){if(1&r){const i=e.RV6();e.j41(0,"ion-col",4)(1,"ion-card",9)(2,"ion-card")(3,"ion-card-header",10)(4,"ion-card-title",11)(5,"p",12),e.EFF(6,"*"),e.k0s(),e.EFF(7," Choose a file to create a unit test"),e.k0s()(),e.j41(8,"ion-card-content")(9,"ion-card")(10,"ion-card-content")(11,"ion-select",13),e.bIt("ionChange",function(n){e.eBV(i);const l=e.XpG();return e.Njj(l.askForFile(n))}),e.Z7z(12,U,2,2,"ion-select-option",14,e.fX1),e.k0s()()()(),e.j41(14,"ion-card-header",10)(15,"ion-card-title",15),e.EFF(16,"DevProbeAI Auto-Generated Unit Test"),e.k0s()(),e.j41(17,"ion-card")(18,"ion-card-content",16),e.Z7z(19,y,2,1,"markdown",17,e.fX1),e.k0s()(),e.j41(21,"ion-card-header",10)(22,"ion-card-title",11)(23,"p",12),e.EFF(24,"*"),e.k0s(),e.EFF(25," Add a Title or Add the Class Name"),e.k0s()(),e.j41(26,"ion-card-content")(27,"ion-card")(28,"ion-input",18),e.mxI("ngModelChange",function(n){e.eBV(i);const l=e.XpG();return e.DH7(l.title,n)||(l.title=n),e.Njj(n)}),e.k0s()()(),e.j41(29,"ion-card-header",10)(30,"ion-card-title",11)(31,"p",12),e.EFF(32,"*"),e.k0s(),e.EFF(33," Assign the test"),e.k0s()(),e.j41(34,"ion-card-content")(35,"ion-card")(36,"ion-select",19),e.bIt("ionChange",function(n){e.eBV(i);const l=e.XpG();return e.Njj(l.onAssignedTester(n))}),e.Z7z(37,v,2,2,"ion-select-option",14,e.fX1),e.k0s()()()(),e.j41(39,"ion-button",20),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.saveUnitTest())}),e.EFF(40,"Save Unit Test"),e.k0s()()()}if(2&r){const i=e.XpG();e.R7$(12),e.Dyx(i.files),e.R7$(7),e.Dyx(i.aiMessages),e.R7$(9),e.R50("ngModel",i.title),e.R7$(9),e.Dyx(i.teamMembers)}}function P(r,_){if(1&r&&(e.j41(0,"markdown",17),e.EFF(1),e.k0s()),2&r){const i=_.$implicit;e.R7$(),e.JRh(i.message)}}function k(r,_){if(1&r&&(e.j41(0,"ion-select-option",14),e.EFF(1),e.k0s()),2&r){const i=_.$implicit;e.FS9("value",i.name),e.R7$(),e.JRh(i.name)}}function D(r,_){if(1&r){const i=e.RV6();e.j41(0,"ion-col",4)(1,"ion-card",9)(2,"ion-card")(3,"ion-card-header",10)(4,"ion-card-title",11)(5,"p",12),e.EFF(6,"*"),e.k0s(),e.EFF(7," Give Context To AI"),e.k0s()(),e.j41(8,"ion-card-header",10)(9,"p",21),e.EFF(10,"Provide the AI with context to generate a unit test. Code snippets, descriptions, or examples are all helpful."),e.k0s()(),e.j41(11,"ion-card")(12,"ion-card-content")(13,"ion-textarea",22),e.mxI("ngModelChange",function(n){e.eBV(i);const l=e.XpG();return e.DH7(l.context,n)||(l.context=n),e.Njj(n)}),e.k0s()(),e.j41(14,"ion-button",23),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.askForFile(n.context))}),e.EFF(15,"Ask AI For Help"),e.k0s()(),e.j41(16,"ion-card-header",10)(17,"ion-card-title",15),e.EFF(18,"DevProbeAI Auto-Generated Unit Test"),e.k0s()(),e.j41(19,"ion-card")(20,"ion-card-content",16),e.Z7z(21,P,2,1,"markdown",17,e.fX1),e.k0s()(),e.j41(23,"ion-card-header",10)(24,"ion-card-title",11)(25,"p",12),e.EFF(26,"*"),e.k0s(),e.EFF(27," Add A Title or Add the Class Name"),e.k0s()(),e.j41(28,"ion-card-content")(29,"ion-card")(30,"ion-input",18),e.mxI("ngModelChange",function(n){e.eBV(i);const l=e.XpG();return e.DH7(l.title,n)||(l.title=n),e.Njj(n)}),e.k0s()()(),e.j41(31,"ion-card-header",10)(32,"ion-card-title",11)(33,"p",12),e.EFF(34,"*"),e.k0s(),e.EFF(35," Assign the test"),e.k0s()(),e.j41(36,"ion-card-content")(37,"ion-card")(38,"ion-select",19),e.bIt("ionChange",function(n){e.eBV(i);const l=e.XpG();return e.Njj(l.onAssignedTester(n))}),e.Z7z(39,k,2,2,"ion-select-option",14,e.fX1),e.k0s()()()(),e.j41(41,"ion-button",20),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.saveUnitTest())}),e.EFF(42,"Save Unit Test"),e.k0s()()()}if(2&r){const i=e.XpG();e.R7$(13),e.R50("ngModel",i.context),e.R7$(8),e.Dyx(i.aiMessages),e.R7$(9),e.R50("ngModel",i.title),e.R7$(9),e.Dyx(i.teamMembers)}}function x(r,_){if(1&r&&(e.j41(0,"ion-select-option",14),e.EFF(1),e.k0s()),2&r){const i=_.$implicit;e.FS9("value",i.name),e.R7$(),e.JRh(i.name)}}function R(r,_){if(1&r){const i=e.RV6();e.j41(0,"ion-col",4)(1,"ion-card")(2,"ion-card")(3,"ion-card-header",10)(4,"ion-card-title",11)(5,"p",12),e.EFF(6,"*"),e.k0s(),e.EFF(7," My Unit Test Code"),e.k0s()(),e.j41(8,"ion-card")(9,"ion-card-content")(10,"ion-textarea",24),e.mxI("ngModelChange",function(n){e.eBV(i);const l=e.XpG();return e.DH7(l.myUnitTest,n)||(l.myUnitTest=n),e.Njj(n)}),e.k0s()()(),e.j41(11,"ion-card-header",10)(12,"ion-card-title",11)(13,"p",12),e.EFF(14,"*"),e.k0s(),e.EFF(15," Add A Title or Add the Class Name"),e.k0s()(),e.j41(16,"ion-card-content")(17,"ion-card")(18,"ion-input",25),e.mxI("ngModelChange",function(n){e.eBV(i);const l=e.XpG();return e.DH7(l.title,n)||(l.title=n),e.Njj(n)}),e.k0s()(),e.j41(19,"ion-card-header",10)(20,"ion-card-title",11)(21,"p",12),e.EFF(22,"*"),e.k0s(),e.EFF(23," Assign the test"),e.k0s()(),e.j41(24,"ion-card-content")(25,"ion-card")(26,"ion-select",19),e.bIt("ionChange",function(n){e.eBV(i);const l=e.XpG();return e.Njj(l.onAssignedTester(n))}),e.Z7z(27,x,2,2,"ion-select-option",14,e.fX1),e.k0s()()()(),e.j41(29,"ion-button",20),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.saveUnitTest())}),e.EFF(30,"Save Unit Test"),e.k0s()()()()}if(2&r){const i=e.XpG();e.R7$(10),e.R50("ngModel",i.myUnitTest),e.R7$(8),e.R50("ngModel",i.title),e.R7$(9),e.Dyx(i.teamMembers)}}const I=[{path:"",component:(()=>{var r;class _{constructor(t,n,l,F,E,j){this.loadingCtrl=t,this.githubService=n,this.alertCtrl=l,this.unitTestService=F,this.activatedRoute=E,this.teamService=j,this.segment="git",this.files=[],this.gitHubData={key:"",repo:"",branch:"",owner:""},this.aiMessages=[],this.vertexAI=(0,e.WQX)(f.L9),this.model=(0,f.oc)(this.vertexAI,{model:"gemini-1.5-flash"}),this.chat=this.model.startChat({history:[{role:"user",parts:[{text:"Hola desde ahora en adelante seras un ingeniero SRE y de QA, te llamas DevProbeAI. Por favor ayudame a crear un TEST UNITARIO para el siguiente archivo, limitate a solo programar, no me expliques nada"}]},{role:"model",parts:[{text:"Claro, soy DevProbeAI, puedo ayudarte con eso. Por favor enviame el contenido del archivo"}]}]}),this.myUnitTest="",this.title="",this.assignedTester="",this.productObjective="",this.productStep="",this.orgName="",this.teamMembers=[]}ngOnInit(){}ionViewWillEnter(){var t=this;return(0,m.A)(function*(){t.getProductFromParams(),yield t.getTeamMembers(),yield t.getGitHubSync(),""!==t.gitHubData.key&&t.getFiles()})()}getProductFromParams(){this.activatedRoute.params.subscribe(n=>{this.productObjective=n.productObjective,this.productStep=n.step});const t=JSON.parse(localStorage.getItem("user"));this.orgName=t.orgName,console.log(this.productObjective),console.log(this.productStep),console.log(this.orgName)}getTeamMembers(){var t=this;return(0,m.A)(function*(){t.teamMembers=yield t.teamService.getTeamByOrganization(t.orgName),console.log("Members",t.teamMembers)})()}getGitHubSync(){var t=this;return(0,m.A)(function*(){yield t.showLoading();const n=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):null;if(!n)return;const l=n.orgName||"";if(t.gitHubData=yield t.githubService.getSyncRepo(l),console.log("this.gitHubData",t.gitHubData),!t.gitHubData||""===t.gitHubData.key)return yield t.hideLoading(),void(yield t.showAlert("If you want to use GitHub, please sync your repository in the settings page","No GitHub Sync found"));yield t.hideLoading()})()}getFiles(){var t=this;return(0,m.A)(function*(){yield t.showLoading(),t.files=yield t.githubService.getFiles(t.gitHubData),0===t.files.length&&(yield t.hideLoading(),yield t.showAlert("No files found in the repository, check sync settings","No Files Found")),yield t.hideLoading()})()}askForFile(t){var n=this;return(0,m.A)(function*(){yield n.showLoading();let l="";try{t.detail.value&&(console.log("file",t.detail.value),l=yield n.githubService.getContentFromFilePath(n.gitHubData,t.detail.value),console.log("content",l))}catch{l=t}yield n.chat.sendMessage(l).then(F=>{n.aiMessages=[],n.aiMessages.push({from:"ai",message:F.response.text(),id:"1"}),console.log("response",F)}),yield n.hideLoading()})()}saveUnitTest(){var t=this;return(0,m.A)(function*(){yield t.showLoading();let n=new Date;const F={date:n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds(),state:!1},E=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):null;if(!E)return;const j=E.orgName||"";return t.myUnitTest&&""!==t.myUnitTest&&t.title&&""!==t.title?(yield t.unitTestService.addUnitTest(j,t.productObjective,t.productStep,{code:t.myUnitTest,state:!1,type:"unit-test",title:t.title,last_state_change:[F],assigned_to:t.assignedTester}),yield t.hideLoading(),yield t.showAlert("Your Unit Test saved","Unit Test Saved"),void window.history.back()):t.aiMessages.length>0&&t.title&&""!==t.title?(yield t.unitTestService.addUnitTest(j,t.productObjective,t.productStep,{code:t.aiMessages[0].message,state:!1,type:"unit-test",title:t.title,last_state_change:[F],assigned_to:t.assignedTester}),yield t.hideLoading(),yield t.showAlert("AI generated Unit Test saved","Unit Test Saved"),void window.history.back()):(yield t.hideLoading(),void(yield t.showAlert("Please ask AI or add your Unit Test before saving","No Unit Test Found")))})()}showLoading(){var t=this;return(0,m.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,m.A)(function*(){yield t.loadingCtrl.dismiss()})()}showAlert(t,n){var l=this;return(0,m.A)(function*(){yield(yield l.alertCtrl.create({header:n,message:t,buttons:["OK"]})).present()})()}onAssignedTester(t){this.assignedTester=t.detail.value}}return(r=_).\u0275fac=function(t){return new(t||r)(e.rXU(o.Xi),e.rXU(T.p),e.rXU(o.hG),e.rXU(s.I),e.rXU(p.nX),e.rXU(g.O))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-create-unit-test"]],decls:23,vars:4,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4",1,""],["size","12","size-md","12","size-lg","12",1,""],["value","default"],["value","default",3,"click"],["value","devprobeai",3,"click"],["value","myunittest",3,"click"],[1,"m-2","p-5"],[1,"flex-row","justify-center","items-center"],[1,"text-3xl","flex","flex-row"],[1,"text-red-800"],["label","Select File From GitHub Repo",3,"ionChange"],[3,"value"],[1,"text-white","text-3xl"],[1,"m-2","p-2"],[1,"text-white"],["placeholder","Title  or Class Name","type","text",1,"p-2","m-2",3,"ngModelChange","ngModel"],["label","Assign Tester","placeholder","Select an Tester","interface","popover",3,"ionChange"],["color","success","expand","block","fill","outline",3,"click"],[1,"flex","flex-row"],["placeholder","Paste Code",1,"w-full",3,"ngModelChange","ngModel"],["color","ai_purple","expand","block","fill","outline",3,"click"],["placeholder","Paste Code",1,"w-full","h-96",3,"ngModelChange","ngModel"],["placeholder","Title or Class Name","type","text",1,"p-2","m-2",3,"ngModelChange","ngModel"]],template:function(t,n){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2)(5,"ion-col",3)(6,"p"),e.EFF(7,"Unit tests are used to test individual units of code. They are typically written by developers to test the smallest piece of code, such as a function or method."),e.k0s()()(),e.j41(8,"ion-row",2)(9,"ion-col",4)(10,"ion-segment",5)(11,"ion-segment-button",6),e.bIt("click",function(){return n.segment="git"}),e.j41(12,"ion-label"),e.EFF(13,"GitHub + Dev Probe AI"),e.k0s()(),e.j41(14,"ion-segment-button",7),e.bIt("click",function(){return n.segment="devprobeai"}),e.j41(15,"ion-label"),e.EFF(16,"Dev Probe AI"),e.k0s()(),e.j41(17,"ion-segment-button",8),e.bIt("click",function(){return n.segment="myunittest"}),e.j41(18,"ion-label"),e.EFF(19,"My Unit Test"),e.k0s()()()(),e.DNE(20,A,41,1,"ion-col",4)(21,D,43,2)(22,R,31,2),e.k0s()()()),2&t&&(e.Y8G("title","Create Unit Test"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Create Unit Test"),e.R7$(17),e.vxM(20,"git"===n.segment?20:"devprobeai"===n.segment?21:"myunittest"===n.segment?22:-1))},dependencies:[u.BC,u.vS,o.Jm,o.b_,o.I9,o.ME,o.tN,o.hU,o.W9,o.lO,o.$w,o.he,o.ln,o.Gp,o.eP,o.Nm,o.Ip,o.nc,o.Je,o.Gw,d.W,h.p,M.NN]}),_})()}];let O=(()=>{var r;class _{}return(r=_).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[p.iI.forChild(I),p.iI]}),_})();var N=a(5553);let S=(()=>{var r;class _{}return(r=_).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[c.MD,u.YN,o.bv,O,N.h,M.NN]}),_})()},4796:(b,C,a)=>{a.d(C,{u:()=>m});var c=a(467),u=a(8737),o=a(4262),p=a(4438);let m=(()=>{var e;class f{constructor(s,g){this.auth=s,this.firestore=g}registerUser(s){var g=this;return(0,c.A)(function*(){try{const d=yield(0,u.eJ)(g.auth,s.email,s.password);return d.user?(yield(0,o.BN)((0,o.H9)(g.firestore,"users",d.user.uid),{email:s.email,name:s.name,orgName:s.orgName,uid:d.user.uid}),yield(0,o.BN)((0,o.H9)(g.firestore,"teams",`${s.orgName}`),{name:s.orgName,members:[d.user.uid]}),d):null}catch{return null}})()}loginUser(s){var g=this;return(0,c.A)(function*(){try{var d;const h=yield(0,u.x9)(g.auth,s.email,s.password);if(null!==(d=h.user)&&void 0!==d&&d.uid){const M=yield(0,o.x7)((0,o.H9)(g.firestore,"users",h.user.uid));if(M.exists())return localStorage.setItem("user",JSON.stringify(M.data())),h}}catch(h){console.error(h)}return null})()}logoutUser(){var s=this;return(0,c.A)(function*(){yield s.auth.signOut()})()}addMember(s){var g=this;return(0,c.A)(function*(){try{const d=yield(0,u.eJ)(g.auth,s.email,s.password);if(!d.user)return!1;const h={email:s.email,name:s.name,orgName:s.orgName,uid:d.user.uid};return yield(0,o.BN)((0,o.H9)(g.firestore,"users",d.user.uid),h),h}catch{return!1}})()}}return(e=f).\u0275fac=function(s){return new(s||e)(p.KVO(u.Nj),p.KVO(o._7))},e.\u0275prov=p.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),f})()},5092:(b,C,a)=>{a.d(C,{O:()=>m});var c=a(467),u=a(4262),o=a(4438),p=a(4796);let m=(()=>{var e;class f{constructor(s,g){this.firestore=s,this.authService=g}getTeamByOrganization(s){var g=this;return(0,c.A)(function*(){let d=(0,u.H9)(g.firestore,"teams",s);const U=(yield(0,u.x7)(d)).data();let y=[];for(let v=0;v<U.members.length;v++){d=(0,u.H9)(g.firestore,"users",U.members[v]);const P=(yield(0,u.x7)(d)).data();y.push(P)}return y})()}removeMember(s,g){var d=this;return(0,c.A)(function*(){try{let h=(0,u.H9)(d.firestore,"teams",s);const y=(yield(0,u.x7)(h)).data();let v=y.members.filter(P=>P!==g);return yield(0,u.BN)(h,{name:y.name,members:v}),h=(0,u.H9)(d.firestore,"users",g),yield(0,u.BN)(h,{}),yield d.authService,!0}catch{return!1}})()}addMember(s){var g=this;return(0,c.A)(function*(){try{const d=yield g.authService.addMember(s);if(!d)return!1;const h=(0,u.H9)(g.firestore,"teams",s.orgName),U=(yield(0,u.x7)(h)).data();console.log(U);const y=U;let v=y.members;return v.push(d.uid),console.log(v),yield(0,u.mZ)(h,{name:y.name,members:v}),d.uid}catch{return!1}})()}}return(e=f).\u0275fac=function(s){return new(s||e)(o.KVO(u._7),o.KVO(p.u))},e.\u0275prov=o.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),f})()}}]);