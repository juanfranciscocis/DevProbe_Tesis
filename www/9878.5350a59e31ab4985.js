"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9878],{5553:(K,T,s)=>{s.d(T,{h:()=>f});var o=s(177),i=s(7863),c=s(4438);let f=(()=>{var m;class d{}return(m=d).\u0275fac=function(h){return new(h||m)},m.\u0275mod=c.$C({type:m}),m.\u0275inj=c.G2t({imports:[o.MD,i.bv]}),d})()},3241:(K,T,s)=>{s.d(T,{p:()=>f});var o=s(4438),i=s(177),c=s(7863);let f=(()=>{var m;class d{constructor(h){this.location=h,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(m=d).\u0275fac=function(h){return new(h||m)(o.rXU(i.aZ))},m.\u0275cmp=o.VBU({type:m,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(h,n){1&h&&(o.j41(0,"ion-header",0)(1,"ion-toolbar"),o.nrm(2,"ion-menu-button",1),o.j41(3,"ion-icon",2),o.bIt("click",function(){return n.goBack()}),o.k0s(),o.j41(4,"ion-title"),o.EFF(5),o.k0s()()()),2&h&&(o.Y8G("translucent",!0),o.R7$(5),o.JRh(n.title))},dependencies:[c.eU,c.iq,c.MC,c.BC,c.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),d})()},8453:(K,T,s)=>{s.d(T,{W:()=>c});var o=s(4438),i=s(7863);let c=(()=>{var f;class m{constructor(){this.title="Title"}ngOnInit(){}}return(f=m).\u0275fac=function(_){return new(_||f)},f.\u0275cmp=o.VBU({type:f,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(_,h){1&_&&(o.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),o.EFF(3),o.k0s()()()),2&_&&(o.R7$(3),o.JRh(h.title))},dependencies:[i.hU,i.ln]}),m})()},4796:(K,T,s)=>{s.d(T,{u:()=>m});var o=s(467),i=s(8737),c=s(4262),f=s(4438);let m=(()=>{var d;class _{constructor(n,a){this.auth=n,this.firestore=a}registerUser(n){var a=this;return(0,o.A)(function*(){try{const r=yield(0,i.eJ)(a.auth,n.email,n.password);return r.user?(yield(0,c.BN)((0,c.H9)(a.firestore,"users",r.user.uid),{email:n.email,name:n.name,orgName:n.orgName,uid:r.user.uid}),yield(0,c.BN)((0,c.H9)(a.firestore,"teams",`${n.orgName}`),{name:n.orgName,members:[r.user.uid]}),r):null}catch{return null}})()}loginUser(n){var a=this;return(0,o.A)(function*(){try{var r;const u=yield(0,i.x9)(a.auth,n.email,n.password);if(null!==(r=u.user)&&void 0!==r&&r.uid){const M=yield(0,c.x7)((0,c.H9)(a.firestore,"users",u.user.uid));if(M.exists())return localStorage.setItem("user",JSON.stringify(M.data())),u}}catch(u){console.error(u)}return null})()}logoutUser(){var n=this;return(0,o.A)(function*(){yield n.auth.signOut()})()}addMember(n){var a=this;return(0,o.A)(function*(){try{const r=yield(0,i.eJ)(a.auth,n.email,n.password);if(!r.user)return!1;const u={email:n.email,name:n.name,orgName:n.orgName,uid:r.user.uid};return yield(0,c.BN)((0,c.H9)(a.firestore,"users",r.user.uid),u),u}catch{return!1}})()}}return(d=_).\u0275fac=function(n){return new(n||d)(f.KVO(i.Nj),f.KVO(c._7))},d.\u0275prov=f.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),_})()},4970:(K,T,s)=>{s.d(T,{s:()=>W});var o=s(467),i=s(4262);class c{static toArtilleryData(t){return function n(e,t){return h(e,t,d)}(JSON.parse(t),p("ArtilleryData"))}static artilleryDataToJson(t){return JSON.stringify(function a(e,t){return h(e,t,_)}(t,p("ArtilleryData")),null,2)}}function f(e,t,A,g=""){const v=m(e);throw Error(`Invalid value${A?` for key "${A}"`:""}${g?` on ${g}`:""}. Expected ${v} but got ${JSON.stringify(t)}`)}function m(e){return Array.isArray(e)?2===e.length&&void 0===e[0]?`an optional ${m(e[1])}`:`one of [${e.map(t=>m(t)).join(", ")}]`:"object"==typeof e&&void 0!==e.literal?e.literal:typeof e}function d(e){if(void 0===e.jsonToJS){const t={};e.props.forEach(A=>t[A.json]={key:A.js,typ:A.typ}),e.jsonToJS=t}return e.jsonToJS}function _(e){if(void 0===e.jsToJSON){const t={};e.props.forEach(A=>t[A.js]={key:A.json,typ:A.typ}),e.jsToJSON=t}return e.jsToJSON}function h(e,t,A,g="",v=""){if("any"===t)return e;if(null===t)return null===e?e:f(t,e,g,v);if(!1===t)return f(t,e,g,v);let S;for(;"object"==typeof t&&void 0!==t.ref;)S=t.ref,t=H[t.ref];return Array.isArray(t)?function B(l,y){return-1!==l.indexOf(y)?y:f(l.map(E=>r(E)),y,g,v)}(t,e):"object"==typeof t?t.hasOwnProperty("unionMembers")?function R(l,y){const E=l.length;for(let U=0;U<E;U++){const P=l[U];try{return h(y,P,A)}catch{}}return f(l,y,g,v)}(t.unionMembers,e):t.hasOwnProperty("arrayItems")?function N(l,y){return Array.isArray(y)?y.map(E=>h(E,l,A)):f(r("array"),y,g,v)}(t.arrayItems,e):t.hasOwnProperty("props")?function D(l,y,E){if(null===E||"object"!=typeof E||Array.isArray(E))return f(r(S||"object"),E,g,v);const U={};return Object.getOwnPropertyNames(l).forEach(P=>{const L=l[P],V=Object.prototype.hasOwnProperty.call(E,P)?E[P]:void 0;U[L.key]=void 0!==V?h(V,L.typ,A,P,S):void 0}),Object.getOwnPropertyNames(E).forEach(P=>{Object.prototype.hasOwnProperty.call(l,P)||(U[P]=h(E[P],y,A,P,S))}),U}(A(t),t.additional,e):f(t,e,g,v):t===Date&&"number"!=typeof e?function C(l){if(null===l)return null;const y=new Date(l);return isNaN(y.valueOf())?f(r("Date"),l,g,v):y}(e):function I(l,y){return typeof l==typeof y?y:f(l,y,g,v)}(t,e)}function r(e){return{literal:e}}function j(e,t){return{props:e,additional:t}}function O(e){return{props:[],additional:e}}function p(e){return{ref:e}}const H={ArtilleryData:j([{json:"aggregate",js:"aggregate",typ:p("Aggregate")},{json:"intermediate",js:"intermediate",typ:function u(e){return{arrayItems:e}}(p("Intermediate"))},{json:"date",js:"date",typ:""}],!1),Aggregate:j([{json:"counters",js:"counters",typ:O(0)},{json:"rates",js:"rates",typ:p("Rates")},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:0},{json:"summaries",js:"summaries",typ:p("Histograms")},{json:"histograms",js:"histograms",typ:p("Histograms")}],!1),Histograms:j([{json:"http.response_time",js:"http.response_time",typ:O(3.14)},{json:"plugins.metrics-by-endpoint.response_time./",js:"plugins.metrics-by-endpoint.response_time./",typ:O(3.14)},{json:"vusers.session_length",js:"vusers.session_length",typ:function M(...e){return{unionMembers:e}}(void 0,O(3.14))}],!1),Rates:j([{json:"http.request_rate",js:"http.request_rate",typ:0}],!1),Intermediate:j([{json:"counters",js:"counters",typ:O(0)},{json:"rates",js:"rates",typ:p("Rates")},{json:"http.request_rate",js:"http.request_rate",typ:null},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:""},{json:"summaries",js:"summaries",typ:p("Histograms")},{json:"histograms",js:"histograms",typ:p("Histograms")}],!1)};var b=s(4438),J=s(1626),x=s(7473);let W=(()=>{var e;class t{constructor(g,v,I){this.firestore=g,this.http=v,this.notificationService=I,this.url="https://devprobeapi.onrender.com/create_load_test"}getLoadTestHistory(g,v,I){var R=this;return(0,o.A)(function*(){const B=(0,i.H9)(R.firestore,"teams",g,"products",v,"load_test",I),N=yield(0,i.x7)(B);if(N.exists()){let C=N.data();console.log(C);let D=Object.keys(C);console.log(D);for(let S of D)C[S]=c.toArtilleryData(C[S]);return C}return{}})()}sendLoadTest(g,v,I,R,B){var N=this;return(0,o.A)(function*(){try{const C=yield N.notificationService.getNotificationUser(B),D={team:g,product:v,service:I,target:`https://${R}`,sid:C};return yield N.http.post(N.url,D).toPromise()}catch{return{}}})()}getLoadTestHistoryByDate(g,v,I,R){var B=this;return(0,o.A)(function*(){const N=(0,i.H9)(B.firestore,"teams",g,"products",v,"load_test",I),C=yield(0,i.x7)(N);if(C.exists()){let D=C.data();console.log(D);let S=Object.keys(D);console.log(S);for(let l of S)D[l]=c.toArtilleryData(D[l]),D[l].date.split("-")[0]+"-"+D[l].date.split("-")[1]+"-"+D[l].date.split("-")[2]!==R&&delete D[l];return console.log("Filtered by Date: ",D),D}return{}})()}}return(e=t).\u0275fac=function(g){return new(g||e)(b.KVO(i._7),b.KVO(J.Qq),b.KVO(x.J))},e.\u0275prov=b.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),t})()},7473:(K,T,s)=>{s.d(T,{J:()=>d});var o=s(467),i=s(4262),c=s(4438),f=s(1626),m=s(5092);let d=(()=>{var _;class h{constructor(a,r,u){this.firestore=a,this.http=r,this.teamService=u}saveNotificationID(a,r){var u=this;return(0,o.A)(function*(){const M=(0,i.H9)(u.firestore,"users",a.uid),j=yield(0,i.x7)(M);if(j.exists()){const O=j.data();return O.notificationID=r,yield(0,i.BN)(M,O),!0}return console.log("No such document!"),!1})()}getNotificationUser(a){var r=this;return(0,o.A)(function*(){const u=(0,i.H9)(r.firestore,"users",a.uid),M=yield(0,i.x7)(u);if(M.exists()){const j=M.data();return j.notificationID?j.notificationID:""}return console.log("No such document!"),null})()}notifyIncidentToUser(a,r){var u=this;return(0,o.A)(function*(){try{const M=yield u.teamService.getTeamByOrganization(r),j=a.map(H=>H.member),O=M.filter(H=>j.includes(H.name));console.log("team",O);const p="https://devprobeapi.onrender.com/sendNotification";for(let H of O){let b=yield u.getNotificationUser(H);if(console.log("sid",b),""!==b){const x={sid:b,title:"New Incident",type:"new_incident",message:`Hey ${H.name}, you have been assigned a new incident your incident role is ${a.find(W=>W.member===H.name).role}`,target:"https://devprobe-89481.web.app/incident-manager-chooser"};yield u.http.post(p,x).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(M){console.log(M)}})()}}return(_=h).\u0275fac=function(a){return new(a||_)(c.KVO(i._7),c.KVO(f.Qq),c.KVO(m.O))},_.\u0275prov=c.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),h})()},5092:(K,T,s)=>{s.d(T,{O:()=>m});var o=s(467),i=s(4262),c=s(4438),f=s(4796);let m=(()=>{var d;class _{constructor(n,a){this.firestore=n,this.authService=a}getTeamByOrganization(n){var a=this;return(0,o.A)(function*(){let r=(0,i.H9)(a.firestore,"teams",n);const j=(yield(0,i.x7)(r)).data();let O=[];for(let p=0;p<j.members.length;p++){r=(0,i.H9)(a.firestore,"users",j.members[p]);const b=(yield(0,i.x7)(r)).data();O.push(b)}return O})()}removeMember(n,a){var r=this;return(0,o.A)(function*(){try{let u=(0,i.H9)(r.firestore,"teams",n);const O=(yield(0,i.x7)(u)).data();let p=O.members.filter(b=>b!==a);return yield(0,i.BN)(u,{name:O.name,members:p}),u=(0,i.H9)(r.firestore,"users",a),yield(0,i.BN)(u,{}),yield r.authService,!0}catch{return!1}})()}addMember(n){var a=this;return(0,o.A)(function*(){try{const r=yield a.authService.addMember(n);if(!r)return!1;const u=(0,i.H9)(a.firestore,"teams",n.orgName),j=(yield(0,i.x7)(u)).data();console.log(j);const O=j;let p=O.members;return p.push(r.uid),console.log(p),yield(0,i.mZ)(u,{name:O.name,members:p}),r.uid}catch{return!1}})()}}return(d=_).\u0275fac=function(n){return new(n||d)(c.KVO(i._7),c.KVO(f.u))},d.\u0275prov=c.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),_})()}}]);