"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6536],{6536:(_,L,o)=>{o.r(L),o.d(L,{LoginPageModule:()=>M});var f=o(177),c=o(4341),n=o(7863),h=o(7650),p=o(467),e=o(4438),P=o(4796),C=o(2872);const t=()=>["/register"],r=[{path:"",component:(()=>{var i;class m{constructor(l,s,v,g){var d=this;this.authService=l,this.alertCtrl=s,this.navCtrl=v,this.loadingCtrl=g,this.email="",this.password="",this.loginUser=(0,p.A)(function*(){if(yield d.showLoading(),d.email&&d.password){const w={email:d.email,password:d.password};(yield d.authService.loginUser(w))?(yield d.hideLoading(),yield d.navCtrl.navigateRoot("/home")):(yield d.hideLoading(),yield d.showAlert("Login failed. Please check your email and password."))}else yield d.hideLoading(),yield d.showAlert("Please enter your email and password.")})}ngOnInit(){}showAlert(l){var s=this;return(0,p.A)(function*(){yield(yield s.alertCtrl.create({header:"Login Failed!",message:l,buttons:["OK"]})).present()})()}showLoading(){var l=this;return(0,p.A)(function*(){yield(yield l.loadingCtrl.create({})).present()})()}hideLoading(){var l=this;return(0,p.A)(function*(){yield l.loadingCtrl.dismiss()})()}}return(i=m).\u0275fac=function(l){return new(l||i)(e.rXU(P.u),e.rXU(n.hG),e.rXU(C.q9),e.rXU(n.Xi))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-login"]],inputs:{email:"email",password:"password"},decls:20,vars:5,consts:[[1,"",3,"fullscreen"],[1,"h-full"],["size","12","size-sm","12","size-md","12","size-lg","6","size-xl","6",1,""],[1,"flex","flex-col","items-center","h-full","justify-end","lg:justify-center","md:justify-end"],["src","https://firebasestorage.googleapis.com/v0/b/devprobe-89481.appspot.com/o/Login-Register%2Flogin.avif?alt=media&token=392ce685-399e-4a20-ae9d-2053d1368535","alt","login-ios-logo",1,"h-48","lg:h-96"],[1,"flex","flex-col","justify-center","items-center","lg:h-full","md:h-full"],[1,"flex","flex-col","justify-center","items-center","lg:min-w-20","bg-gray-800","p-10","lg:p-32","rounded-2xl"],[1,"font-bold","text-6xl","text-white","mb-6"],["label","Email","placeholder","Enter your email","type","email","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["label","Password","placeholder","Enter your password","type","password","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],[1,"m-4",3,"click"],[1,"flex","flex-col","lg:flex-row","md:flex-row","justify-center","items-center"],[1,"text-white","text-xs","lg:text-lg"],[1,"text-sm","lg:text-lg","text-blue-500","lg:ml-2",3,"routerLink"]],template:function(l,s){1&l&&(e.j41(0,"ion-content",0)(1,"ion-grid",1)(2,"ion-row",1)(3,"ion-col",2)(4,"div",3),e.nrm(5,"img",4),e.k0s()(),e.j41(6,"ion-col",2)(7,"div",5)(8,"div",6)(9,"h1",7),e.EFF(10,"Sign In"),e.k0s(),e.j41(11,"ion-input",8),e.mxI("ngModelChange",function(g){return e.DH7(s.email,g)||(s.email=g),g}),e.k0s(),e.j41(12,"ion-input",9),e.mxI("ngModelChange",function(g){return e.DH7(s.password,g)||(s.password=g),g}),e.k0s(),e.j41(13,"ion-button",10),e.bIt("click",function(){return s.loginUser()}),e.EFF(14,"Login"),e.k0s(),e.j41(15,"div",11)(16,"p",12),e.EFF(17,"Don't have an account?"),e.k0s(),e.j41(18,"a",13),e.EFF(19,"Register"),e.k0s()()()()()()()()),2&l&&(e.Y8G("fullscreen",!0),e.R7$(11),e.R50("ngModel",s.email),e.R7$(),e.R50("ngModel",s.password),e.R7$(6),e.Y8G("routerLink",e.lJ4(4,t)))},dependencies:[c.BC,c.vS,n.Jm,n.hU,n.W9,n.lO,n.$w,n.ln,n.Gw,n.oY,h.Wk]}),m})()}];let u=(()=>{var i;class m{}return(i=m).\u0275fac=function(l){return new(l||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[h.iI.forChild(r),h.iI]}),m})(),M=(()=>{var i;class m{}return(i=m).\u0275fac=function(l){return new(l||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[f.MD,c.YN,n.bv,u]}),m})()},4796:(_,L,o)=>{o.d(L,{u:()=>p});var f=o(467),c=o(8737),n=o(4262),h=o(4438);let p=(()=>{var e;class P{constructor(t,a){this.auth=t,this.firestore=a}registerUser(t){var a=this;return(0,f.A)(function*(){try{const r=yield(0,c.eJ)(a.auth,t.email,t.password);return r.user?(yield(0,n.BN)((0,n.H9)(a.firestore,"users",r.user.uid),{email:t.email,name:t.name,orgName:t.orgName,uid:r.user.uid}),yield(0,n.BN)((0,n.H9)(a.firestore,"teams",`${t.orgName}`),{name:t.orgName,members:[r.user.uid]}),r):null}catch{return null}})()}loginUser(t){var a=this;return(0,f.A)(function*(){try{var r;const u=yield(0,c.x9)(a.auth,t.email,t.password);if(null!==(r=u.user)&&void 0!==r&&r.uid){const M=yield(0,n.x7)((0,n.H9)(a.firestore,"users",u.user.uid));if(M.exists())return localStorage.setItem("user",JSON.stringify(M.data())),u}}catch(u){console.error(u)}return null})()}logoutUser(){var t=this;return(0,f.A)(function*(){yield t.auth.signOut()})()}addMember(t){var a=this;return(0,f.A)(function*(){try{const r=yield(0,c.eJ)(a.auth,t.email,t.password);if(!r.user)return!1;const u={email:t.email,name:t.name,orgName:t.orgName,uid:r.user.uid};return yield(0,n.BN)((0,n.H9)(a.firestore,"users",r.user.uid),u),u}catch{return!1}})()}}return(e=P).\u0275fac=function(t){return new(t||e)(h.KVO(c.Nj),h.KVO(n._7))},e.\u0275prov=h.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),P})()}}]);