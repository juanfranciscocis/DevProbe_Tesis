"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2836],{5553:(N,_,i)=>{i.d(_,{h:()=>C});var m=i(177),L=i(7863),c=i(4438);let C=(()=>{var a;class n{}return(a=n).\u0275fac=function(T){return new(T||a)},a.\u0275mod=c.$C({type:a}),a.\u0275inj=c.G2t({imports:[m.MD,L.bv]}),n})()},3241:(N,_,i)=>{i.d(_,{p:()=>C});var m=i(4438),L=i(177),c=i(7863);let C=(()=>{var a;class n{constructor(T){this.location=T,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(a=n).\u0275fac=function(T){return new(T||a)(m.rXU(L.aZ))},a.\u0275cmp=m.VBU({type:a,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(T,p){1&T&&(m.j41(0,"ion-header",0)(1,"ion-toolbar"),m.nrm(2,"ion-menu-button",1),m.j41(3,"ion-icon",2),m.bIt("click",function(){return p.goBack()}),m.k0s(),m.j41(4,"ion-title"),m.EFF(5),m.k0s()()()),2&T&&(m.Y8G("translucent",!0),m.R7$(5),m.JRh(p.title))},dependencies:[c.eU,c.iq,c.MC,c.BC,c.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),n})()},2836:(N,_,i)=>{i.r(_),i.d(_,{LoadTestPageModule:()=>Q});var m=i(177),L=i(4341),c=i(7863),C=i(7650),a=i(467),n=i(4438),M=i(4262);class T{static toArtilleryData(r){return function $(t,r){return v(t,r,U)}(JSON.parse(r),A("ArtilleryData"))}static artilleryDataToJson(r){return JSON.stringify(function W(t,r){return v(t,r,J)}(r,A("ArtilleryData")),null,2)}}function p(t,r,s,e=""){const o=S(t);throw Error(`Invalid value${s?` for key "${s}"`:""}${e?` on ${e}`:""}. Expected ${o} but got ${JSON.stringify(r)}`)}function S(t){return Array.isArray(t)?2===t.length&&void 0===t[0]?`an optional ${S(t[1])}`:`one of [${t.map(r=>S(r)).join(", ")}]`:"object"==typeof t&&void 0!==t.literal?t.literal:typeof t}function U(t){if(void 0===t.jsonToJS){const r={};t.props.forEach(s=>r[s.json]={key:s.js,typ:s.typ}),t.jsonToJS=r}return t.jsonToJS}function J(t){if(void 0===t.jsToJSON){const r={};t.props.forEach(s=>r[s.js]={key:s.json,typ:s.typ}),t.jsToJSON=r}return t.jsToJSON}function v(t,r,s,e="",o=""){if("any"===r)return t;if(null===r)return null===t?t:p(r,t,e,o);if(!1===r)return p(r,t,e,o);let P;for(;"object"==typeof r&&void 0!==r.ref;)P=r.ref,r=F[r.ref];return Array.isArray(r)?function g(l,u){return-1!==l.indexOf(u)?u:p(l.map(h=>D(h)),u,e,o)}(r,t):"object"==typeof r?r.hasOwnProperty("unionMembers")?function f(l,u){const h=l.length;for(let R=0;R<h;R++){const y=l[R];try{return v(u,y,s)}catch{}}return p(l,u,e,o)}(r.unionMembers,t):r.hasOwnProperty("arrayItems")?function O(l,u){return Array.isArray(u)?u.map(h=>v(h,l,s)):p(D("array"),u,e,o)}(r.arrayItems,t):r.hasOwnProperty("props")?function H(l,u,h){if(null===h||"object"!=typeof h||Array.isArray(h))return p(D(P||"object"),h,e,o);const R={};return Object.getOwnPropertyNames(l).forEach(y=>{const I=l[y],w=Object.prototype.hasOwnProperty.call(h,y)?h[y]:void 0;R[I.key]=void 0!==w?v(w,I.typ,s,y,P):void 0}),Object.getOwnPropertyNames(h).forEach(y=>{Object.prototype.hasOwnProperty.call(l,y)||(R[y]=v(h[y],u,s,y,P))}),R}(s(r),r.additional,t):p(r,t,e,o):r===Date&&"number"!=typeof t?function j(l){if(null===l)return null;const u=new Date(l);return isNaN(u.valueOf())?p(D("Date"),l,e,o):u}(t):function d(l,u){return typeof l==typeof u?u:p(l,u,e,o)}(r,t)}function D(t){return{literal:t}}function b(t,r){return{props:t,additional:r}}function E(t){return{props:[],additional:t}}function A(t){return{ref:t}}const F={ArtilleryData:b([{json:"aggregate",js:"aggregate",typ:A("Aggregate")},{json:"intermediate",js:"intermediate",typ:function B(t){return{arrayItems:t}}(A("Intermediate"))},{json:"date",js:"date",typ:""}],!1),Aggregate:b([{json:"counters",js:"counters",typ:E(0)},{json:"rates",js:"rates",typ:A("Rates")},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:0},{json:"summaries",js:"summaries",typ:A("Histograms")},{json:"histograms",js:"histograms",typ:A("Histograms")}],!1),Histograms:b([{json:"http.response_time",js:"http.response_time",typ:E(3.14)},{json:"plugins.metrics-by-endpoint.response_time./",js:"plugins.metrics-by-endpoint.response_time./",typ:E(3.14)},{json:"vusers.session_length",js:"vusers.session_length",typ:function G(...t){return{unionMembers:t}}(void 0,E(3.14))}],!1),Rates:b([{json:"http.request_rate",js:"http.request_rate",typ:0}],!1),Intermediate:b([{json:"counters",js:"counters",typ:E(0)},{json:"rates",js:"rates",typ:A("Rates")},{json:"http.request_rate",js:"http.request_rate",typ:null},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:""},{json:"summaries",js:"summaries",typ:A("Histograms")},{json:"histograms",js:"histograms",typ:A("Histograms")}],!1)};var K=i(1626);let z=(()=>{var t;class r{constructor(e,o){this.firestore=e,this.http=o,this.url="https://devprobeapi.onrender.com/create_load_test"}getLoadTestHistory(e,o,d){var f=this;return(0,a.A)(function*(){const g=(0,M.H9)(f.firestore,"teams",e,"products",o,"load_test",d),O=yield(0,M.x7)(g);if(O.exists()){let j=O.data();console.log(j);let H=Object.keys(j);console.log(H);for(let P of H){let u=T.toArtilleryData(j[P]);j[P]=u}return j}return{}})()}sendLoadTest(e,o,d,f){var g=this;return(0,a.A)(function*(){try{const O={team:e,product:o,service:d,target:`https://${f}`};return yield g.http.post(g.url,O).toPromise()}catch{return{}}})()}}return(t=r).\u0275fac=function(e){return new(e||t)(n.KVO(M._7),n.KVO(K.Qq))},t.\u0275prov=n.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var X=i(8453),x=i(3241);const V=[{path:"",component:(()=>{var t;class r{constructor(e,o,d,f,g){this.router=e,this.activatedRoute=o,this.loadTestService=d,this.loadingCtrl=f,this.alertCtrl=g,this.productStep="",this.productObjective="",this.orgName="",this.target="",this.description="",this.loadTestResults={}}ngOnInit(){}ionViewWillEnter(){var e=this;return(0,a.A)(function*(){e.getParams(),yield e.getHistoryResults().then(()=>{e.byCodes()})})()}getParams(){this.activatedRoute.params.subscribe(o=>{this.productObjective=o.productObjective,this.productStep=o.step});const e=JSON.parse(localStorage.getItem("user"));this.orgName=e.orgName,console.log(this.orgName),console.log(this.productObjective),console.log(this.productStep)}getHistoryResults(){var e=this;return(0,a.A)(function*(){yield e.showLoading(),yield e.loadTestService.getLoadTestHistory(e.orgName,e.productObjective,e.productStep).then(o=>{e.loadTestResults=o,console.log(e.loadTestResults)}),yield e.hideLoading()})()}sendRequest(){var e=this;return(0,a.A)(function*(){if(yield e.showLoading(),e.target.startsWith("http://")||e.target.startsWith("https://")||e.target.endsWith("/"))return yield e.hideLoading(),void(yield e.showAlert("No http or https is needed, check for slashes at the end of the domain","Please enter a valid host"));yield e.loadTestService.sendLoadTest(e.orgName,e.productObjective,e.productStep,e.target).then(function(){var o=(0,a.A)(function*(d){yield e.hideLoading(),console.log("data",d),d&&(yield e.showAlert("Test sent, please wait a few seconds to GET RESULTS","Success"))});return function(d){return o.apply(this,arguments)}}()),yield e.hideLoading()})()}byCodes(){let e=Object.keys(this.loadTestResults),o={};for(let d of e){let f=this.loadTestResults[d].aggregate.counters,g=this.loadTestResults[d].date,O=Object.keys(f);for(let j of O)j.startsWith("http.codes.")&&(o[g]||(o[g]={}),o[g][j]=f[j])}console.log(o)}showLoading(){var e=this;return(0,a.A)(function*(){yield(yield e.loadingCtrl.create({})).present()})()}hideLoading(){var e=this;return(0,a.A)(function*(){yield e.loadingCtrl.dismiss()})()}showAlert(e,o){var d=this;return(0,a.A)(function*(){const f=yield d.alertCtrl.create({header:o,message:e,buttons:["OK"]});return yield f.present(),yield f.onDidDismiss(),!0})()}}return(t=r).\u0275fac=function(e){return new(e||t)(n.rXU(C.Ix),n.rXU(C.nX),n.rXU(z),n.rXU(c.Xi),n.rXU(c.hG))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-load-test"]],decls:12,vars:4,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12","size-md","8","size-lg","8",1,""],["label","Target","placeholder","Enter a target","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end"],["color","primary","size","small",1,"",3,"click"],["name","add"]],template:function(e,o){1&e&&(n.nrm(0,"app-header-return",0),n.j41(1,"ion-content",1)(2,"ion-grid"),n.nrm(3,"app-title",0),n.j41(4,"ion-row",2)(5,"ion-col",3)(6,"ion-input",4),n.mxI("ngModelChange",function(f){return n.DH7(o.target,f)||(o.target=f),f}),n.k0s()()(),n.j41(7,"ion-row",2)(8,"ion-col",5)(9,"ion-button",6),n.bIt("click",function(){return o.sendRequest()}),n.EFF(10,"Load Target "),n.nrm(11,"ion-icon",7),n.k0s()()()()()),2&e&&(n.Y8G("title","Load Test"),n.R7$(),n.Y8G("fullscreen",!0),n.R7$(2),n.Y8G("title","New Load Test"),n.R7$(3),n.R50("ngModel",o.target))},dependencies:[L.BC,L.vS,c.Jm,c.hU,c.W9,c.lO,c.iq,c.$w,c.ln,c.Gw,X.W,x.p]}),r})()}];let k=(()=>{var t;class r{}return(t=r).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[C.iI.forChild(V),C.iI]}),r})();var Y=i(5553);let Q=(()=>{var t;class r{}return(t=r).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[m.MD,L.YN,c.bv,k,Y.h]}),r})()}}]);