"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[461],{5553:(C,v,n)=>{n.d(v,{h:()=>g});var u=n(177),m=n(7863),s=n(4438);let g=(()=>{var d;class e{}return(d=e).\u0275fac=function(p){return new(p||d)},d.\u0275mod=s.$C({type:d}),d.\u0275inj=s.G2t({imports:[u.MD,m.bv]}),e})()},8453:(C,v,n)=>{n.d(v,{W:()=>s});var u=n(4438),m=n(7863);let s=(()=>{var g;class d{constructor(){this.title="Title"}ngOnInit(){}}return(g=d).\u0275fac=function(f){return new(f||g)},g.\u0275cmp=u.VBU({type:g,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(f,p){1&f&&(u.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),u.EFF(3),u.k0s()()()),2&f&&(u.R7$(3),u.JRh(p.title))},dependencies:[m.hU,m.ln]}),d})()},461:(C,v,n)=>{n.r(v),n.d(v,{MyteamPageModule:()=>b});var u=n(177),m=n(4341),s=n(7863),g=n(7650),d=n(467),e=n(4438),f=n(5092),p=n(385),a=n(8453);function l(o,y){if(1&o){const _=e.RV6();e.j41(0,"ion-col",3)(1,"div",12)(2,"ion-card-header")(3,"h1",13),e.EFF(4),e.k0s()(),e.j41(5,"ion-card-content",14)(6,"ion-button",15),e.bIt("click",function(){const r=e.eBV(_).$implicit,h=e.XpG();return e.Njj(h.removeMember(r.uid))}),e.EFF(7,"Remove"),e.k0s()()()()}if(2&o){const _=y.$implicit;e.R7$(4),e.JRh(_.name)}}const c=[{path:"",component:(()=>{var o;class y{constructor(t,r,h){this.teamsService=t,this.loadingCtrl=r,this.alertCtrl=h,this.members=[],this.orgName="",this.teamMemberName="",this.teamMemberEmail="",this.teamMemberPassword=""}ngOnInit(){var t=this;return(0,d.A)(function*(){yield t.getTeam()})()}getTeam(){var t=this;return(0,d.A)(function*(){yield t.showLoading();const r=localStorage.getItem("user");if(!r)return;const h=JSON.parse(r),M=yield t.teamsService.getTeamByOrganization(h.orgName);t.orgName=h.orgName,M&&(t.members=M),yield t.hideLoading()})()}removeMember(t){var r=this;return(0,d.A)(function*(){yield r.showLoading(),(yield r.teamsService.removeMember(r.orgName,t))?r.members=r.members.filter(M=>M.uid!==t):yield r.showAlert("There was an error removing the member"),yield r.hideLoading()})()}addMember(){var t=this;return(0,d.A)(function*(){yield t.showLoading();const r={name:t.teamMemberName,email:t.teamMemberEmail,password:t.teamMemberPassword,orgName:t.orgName};if(!r.name||!r.email||!r.password)return yield t.hideLoading(),void(yield t.showAlert("Please fill all the fields"));const h=yield t.teamsService.addMember(r);"string"==typeof h?(r.uid=h,t.members.push(r),t.teamMemberName="",t.teamMemberEmail="",t.teamMemberPassword=""):yield t.showAlert("There was an error adding the member"),yield t.hideLoading()})()}showAlert(t){var r=this;return(0,d.A)(function*(){yield(yield r.alertCtrl.create({header:"Login Failed!",message:t,buttons:["OK"]})).present()})()}showLoading(){var t=this;return(0,d.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,d.A)(function*(){yield t.loadingCtrl.dismiss()})()}}return(o=y).\u0275fac=function(t){return new(t||o)(e.rXU(f.O),e.rXU(s.Xi),e.rXU(s.hG))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-myteam"]],inputs:{teamMemberName:"teamMemberName",teamMemberEmail:"teamMemberEmail",teamMemberPassword:"teamMemberPassword"},decls:19,vars:7,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10"],["size","6","size-md","4","size-lg","4",1,""],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4",1,""],["label","Team Member Name","placeholder","Enter a name","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","4","size-lg","4"],["label","Team Member Email","placeholder","Enter an email","type","email","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["label","Team Member Password","placeholder","Enter a password for the account","type","password","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end"],["color","primary",1,"",3,"click"],[1,"flex","flex-col","h-full","justify-between","bg-gray-600","rounded-2xl"],[1,"text-2xl"],[1,"flex","flex-col"],["color","danger",1,"m-4",3,"click"]],template:function(t,r){1&t&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2),e.Z7z(5,l,8,1,"ion-col",3,e.fX1),e.k0s(),e.nrm(7,"app-title",0),e.j41(8,"ion-row",4)(9,"ion-col",5)(10,"ion-input",6),e.mxI("ngModelChange",function(M){return e.DH7(r.teamMemberName,M)||(r.teamMemberName=M),M}),e.k0s()(),e.j41(11,"ion-col",7)(12,"ion-input",8),e.mxI("ngModelChange",function(M){return e.DH7(r.teamMemberEmail,M)||(r.teamMemberEmail=M),M}),e.k0s()(),e.j41(13,"ion-col",7)(14,"ion-input",9),e.mxI("ngModelChange",function(M){return e.DH7(r.teamMemberPassword,M)||(r.teamMemberPassword=M),M}),e.k0s()()(),e.j41(15,"ion-row",4)(16,"ion-col",10)(17,"ion-button",11),e.bIt("click",function(){return r.addMember()}),e.EFF(18,"Add Member"),e.k0s()()()()()),2&t&&(e.Y8G("title","My Team"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Team Members"),e.R7$(2),e.Dyx(r.members),e.R7$(2),e.Y8G("title","Add Team Member"),e.R7$(3),e.R50("ngModel",r.teamMemberName),e.R7$(2),e.R50("ngModel",r.teamMemberEmail),e.R7$(2),e.R50("ngModel",r.teamMemberPassword))},dependencies:[m.BC,m.vS,s.Jm,s.I9,s.ME,s.hU,s.W9,s.lO,s.$w,s.ln,s.Gw,p.l,a.W]}),y})()}];let E=(()=>{var o;class y{}return(o=y).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild(c),g.iI]}),y})();var P=n(5553);let b=(()=>{var o;class y{}return(o=y).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.MD,m.YN,s.bv,E,P.h]}),y})()},4796:(C,v,n)=>{n.d(v,{u:()=>d});var u=n(467),m=n(8737),s=n(4262),g=n(4438);let d=(()=>{var e;class f{constructor(a,l){this.auth=a,this.firestore=l}registerUser(a){var l=this;return(0,u.A)(function*(){try{const i=yield(0,m.eJ)(l.auth,a.email,a.password);return i.user?(yield(0,s.BN)((0,s.H9)(l.firestore,"users",i.user.uid),{email:a.email,name:a.name,orgName:a.orgName,uid:i.user.uid}),yield(0,s.BN)((0,s.H9)(l.firestore,"teams",`${a.orgName}`),{name:a.orgName,members:[i.user.uid]}),i):null}catch{return null}})()}loginUser(a){var l=this;return(0,u.A)(function*(){try{var i;const c=yield(0,m.x9)(l.auth,a.email,a.password);if(null!==(i=c.user)&&void 0!==i&&i.uid){const E=yield(0,s.x7)((0,s.H9)(l.firestore,"users",c.user.uid));if(E.exists())return localStorage.setItem("user",JSON.stringify(E.data())),c}}catch(c){console.error(c)}return null})()}logoutUser(){var a=this;return(0,u.A)(function*(){yield a.auth.signOut()})()}addMember(a){var l=this;return(0,u.A)(function*(){try{const i=yield(0,m.eJ)(l.auth,a.email,a.password);if(!i.user)return!1;const c={email:a.email,name:a.name,orgName:a.orgName,uid:i.user.uid};return yield(0,s.BN)((0,s.H9)(l.firestore,"users",i.user.uid),c),c}catch{return!1}})()}}return(e=f).\u0275fac=function(a){return new(a||e)(g.KVO(m.Nj),g.KVO(s._7))},e.\u0275prov=g.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),f})()},5092:(C,v,n)=>{n.d(v,{O:()=>d});var u=n(467),m=n(4262),s=n(4438),g=n(4796);let d=(()=>{var e;class f{constructor(a,l){this.firestore=a,this.authService=l}getTeamByOrganization(a){var l=this;return(0,u.A)(function*(){let i=(0,m.H9)(l.firestore,"teams",a);const P=(yield(0,m.x7)(i)).data();let b=[];for(let o=0;o<P.members.length;o++){i=(0,m.H9)(l.firestore,"users",P.members[o]);const _=(yield(0,m.x7)(i)).data();b.push(_)}return b})()}removeMember(a,l){var i=this;return(0,u.A)(function*(){try{let c=(0,m.H9)(i.firestore,"teams",a);const b=(yield(0,m.x7)(c)).data();let o=b.members.filter(_=>_!==l);return yield(0,m.BN)(c,{name:b.name,members:o}),c=(0,m.H9)(i.firestore,"users",l),yield(0,m.BN)(c,{}),yield i.authService,!0}catch{return!1}})()}addMember(a){var l=this;return(0,u.A)(function*(){try{const i=yield l.authService.addMember(a);if(!i)return!1;const c=(0,m.H9)(l.firestore,"teams",a.orgName),P=(yield(0,m.x7)(c)).data();console.log(P);const b=P;let o=b.members;return o.push(i.uid),console.log(o),yield(0,m.mZ)(c,{name:b.name,members:o}),i.uid}catch{return!1}})()}}return(e=f).\u0275fac=function(a){return new(a||e)(s.KVO(m._7),s.KVO(g.u))},e.\u0275prov=s.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),f})()}}]);