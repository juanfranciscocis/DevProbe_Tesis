"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9878],{5553:(W,P,i)=>{i.d(P,{h:()=>m});var n=i(177),a=i(7863),l=i(4438);let m=(()=>{var h;class _{}return(h=_).\u0275fac=function(p){return new(p||h)},h.\u0275mod=l.$C({type:h}),h.\u0275inj=l.G2t({imports:[n.MD,a.bv]}),_})()},3241:(W,P,i)=>{i.d(P,{p:()=>m});var n=i(4438),a=i(177),l=i(7863);let m=(()=>{var h;class _{constructor(p){this.location=p,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(h=_).\u0275fac=function(p){return new(p||h)(n.rXU(a.aZ))},h.\u0275cmp=n.VBU({type:h,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(p,o){1&p&&(n.j41(0,"ion-header",0)(1,"ion-toolbar"),n.nrm(2,"ion-menu-button",1),n.j41(3,"ion-icon",2),n.bIt("click",function(){return o.goBack()}),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.k0s()()()),2&p&&(n.Y8G("translucent",!0),n.R7$(5),n.JRh(o.title))},dependencies:[l.eU,l.iq,l.MC,l.BC,l.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),_})()},8453:(W,P,i)=>{i.d(P,{W:()=>l});var n=i(4438),a=i(7863);let l=(()=>{var m;class h{constructor(){this.title="Title"}ngOnInit(){}}return(m=h).\u0275fac=function(y){return new(y||m)},m.\u0275cmp=n.VBU({type:m,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(y,p){1&y&&(n.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),n.EFF(3),n.k0s()()()),2&y&&(n.R7$(3),n.JRh(p.title))},dependencies:[a.hU,a.ln]}),h})()},4796:(W,P,i)=>{i.d(P,{u:()=>h});var n=i(467),a=i(8737),l=i(4262),m=i(4438);let h=(()=>{var _;class y{constructor(o,s){this.auth=o,this.firestore=s}registerUser(o){var s=this;return(0,n.A)(function*(){try{const r=yield(0,a.eJ)(s.auth,o.email,o.password);return r.user?(yield(0,l.BN)((0,l.H9)(s.firestore,"users",r.user.uid),{email:o.email,name:o.name,orgName:o.orgName,uid:r.user.uid}),yield(0,l.BN)((0,l.H9)(s.firestore,"teams",`${o.orgName}`),{name:o.orgName,members:[r.user.uid]}),r):null}catch{return null}})()}loginUser(o){var s=this;return(0,n.A)(function*(){try{var r;const c=yield(0,a.x9)(s.auth,o.email,o.password);if(null!==(r=c.user)&&void 0!==r&&r.uid){const g=yield(0,l.x7)((0,l.H9)(s.firestore,"users",c.user.uid));if(g.exists())return localStorage.setItem("user",JSON.stringify(g.data())),c}}catch(c){console.error(c)}return null})()}logoutUser(){var o=this;return(0,n.A)(function*(){yield o.auth.signOut()})()}addMember(o){var s=this;return(0,n.A)(function*(){try{const r=yield(0,a.eJ)(s.auth,o.email,o.password);if(!r.user)return!1;const c={email:o.email,name:o.name,orgName:o.orgName,uid:r.user.uid};return yield(0,l.BN)((0,l.H9)(s.firestore,"users",r.user.uid),c),c}catch{return!1}})()}}return(_=y).\u0275fac=function(o){return new(o||_)(m.KVO(a.Nj),m.KVO(l._7))},_.\u0275prov=m.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),y})()},4970:(W,P,i)=>{i.d(P,{s:()=>L});var n=i(467),a=i(4262);class l{static toArtilleryData(t){return function o(e,t){return p(e,t,_)}(JSON.parse(t),f("ArtilleryData"))}static artilleryDataToJson(t){return JSON.stringify(function s(e,t){return p(e,t,y)}(t,f("ArtilleryData")),null,2)}}function m(e,t,D,v=""){const M=h(e);throw Error(`Invalid value${D?` for key "${D}"`:""}${v?` on ${v}`:""}. Expected ${M} but got ${JSON.stringify(t)}`)}function h(e){return Array.isArray(e)?2===e.length&&void 0===e[0]?`an optional ${h(e[1])}`:`one of [${e.map(t=>h(t)).join(", ")}]`:"object"==typeof e&&void 0!==e.literal?e.literal:typeof e}function _(e){if(void 0===e.jsonToJS){const t={};e.props.forEach(D=>t[D.json]={key:D.js,typ:D.typ}),e.jsonToJS=t}return e.jsonToJS}function y(e){if(void 0===e.jsToJSON){const t={};e.props.forEach(D=>t[D.js]={key:D.json,typ:D.typ}),e.jsToJSON=t}return e.jsToJSON}function p(e,t,D,v="",M=""){if("any"===t)return e;if(null===t)return null===e?e:m(t,e,v,M);if(!1===t)return m(t,e,v,M);let S;for(;"object"==typeof t&&void 0!==t.ref;)S=t.ref,t=b[t.ref];return Array.isArray(t)?function x(d,A){return-1!==d.indexOf(A)?A:m(d.map(T=>r(T)),A,v,M)}(t,e):"object"==typeof t?t.hasOwnProperty("unionMembers")?function R(d,A){const T=d.length;for(let B=0;B<T;B++){const N=d[B];try{return p(A,N,D)}catch{}}return m(d,A,v,M)}(t.unionMembers,e):t.hasOwnProperty("arrayItems")?function I(d,A){return Array.isArray(A)?A.map(T=>p(T,d,D)):m(r("array"),A,v,M)}(t.arrayItems,e):t.hasOwnProperty("props")?function E(d,A,T){if(null===T||"object"!=typeof T||Array.isArray(T))return m(r(S||"object"),T,v,M);const B={};return Object.getOwnPropertyNames(d).forEach(N=>{const J=d[N],$=Object.prototype.hasOwnProperty.call(T,N)?T[N]:void 0;B[J.key]=void 0!==$?p($,J.typ,D,N,S):void 0}),Object.getOwnPropertyNames(T).forEach(N=>{Object.prototype.hasOwnProperty.call(d,N)||(B[N]=p(T[N],A,D,N,S))}),B}(D(t),t.additional,e):m(t,e,v,M):t===Date&&"number"!=typeof e?function C(d){if(null===d)return null;const A=new Date(d);return isNaN(A.valueOf())?m(r("Date"),d,v,M):A}(e):function U(d,A){return typeof d==typeof A?A:m(d,A,v,M)}(t,e)}function r(e){return{literal:e}}function u(e,t){return{props:e,additional:t}}function j(e){return{props:[],additional:e}}function f(e){return{ref:e}}const b={ArtilleryData:u([{json:"aggregate",js:"aggregate",typ:f("Aggregate")},{json:"intermediate",js:"intermediate",typ:function c(e){return{arrayItems:e}}(f("Intermediate"))},{json:"date",js:"date",typ:""}],!1),Aggregate:u([{json:"counters",js:"counters",typ:j(0)},{json:"rates",js:"rates",typ:f("Rates")},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:0},{json:"summaries",js:"summaries",typ:f("Histograms")},{json:"histograms",js:"histograms",typ:f("Histograms")}],!1),Histograms:u([{json:"http.response_time",js:"http.response_time",typ:j(3.14)},{json:"plugins.metrics-by-endpoint.response_time./",js:"plugins.metrics-by-endpoint.response_time./",typ:j(3.14)},{json:"vusers.session_length",js:"vusers.session_length",typ:function g(...e){return{unionMembers:e}}(void 0,j(3.14))}],!1),Rates:u([{json:"http.request_rate",js:"http.request_rate",typ:0}],!1),Intermediate:u([{json:"counters",js:"counters",typ:j(0)},{json:"rates",js:"rates",typ:f("Rates")},{json:"http.request_rate",js:"http.request_rate",typ:null},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:""},{json:"summaries",js:"summaries",typ:f("Histograms")},{json:"histograms",js:"histograms",typ:f("Histograms")}],!1)};var O=i(4438),H=i(1626),K=i(7473);let L=(()=>{var e;class t{constructor(v,M,U){this.firestore=v,this.http=M,this.notificationService=U,this.url="https://devprobeapi.onrender.com/create_load_test"}getLoadTestHistory(v,M,U){var R=this;return(0,n.A)(function*(){const x=(0,a.H9)(R.firestore,"teams",v,"products",M,"load_test",U),I=yield(0,a.x7)(x);if(I.exists()){let C=I.data();console.log(C);let E=Object.keys(C);console.log(E);for(let S of E)C[S]=l.toArtilleryData(C[S]);return C}return{}})()}sendLoadTest(v,M,U,R,x){var I=this;return(0,n.A)(function*(){try{const C=yield I.notificationService.getNotificationUser(x),E={team:v,product:M,service:U,target:`https://${R}`,sid:C};return yield I.http.post(I.url,E).toPromise()}catch{return{}}})()}getLoadTestHistoryByDate(v,M,U,R){var x=this;return(0,n.A)(function*(){const I=(0,a.H9)(x.firestore,"teams",v,"products",M,"load_test",U),C=yield(0,a.x7)(I);if(C.exists()){let E=C.data();console.log(E);let S=Object.keys(E);console.log(S);for(let d of S)E[d]=l.toArtilleryData(E[d]),E[d].date.split("-")[0]+"-"+E[d].date.split("-")[1]+"-"+E[d].date.split("-")[2]!==R&&delete E[d];return console.log("Filtered by Date: ",E),E}return{}})()}}return(e=t).\u0275fac=function(v){return new(v||e)(O.KVO(a._7),O.KVO(H.Qq),O.KVO(K.J))},e.\u0275prov=O.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),t})()},7473:(W,P,i)=>{i.d(P,{J:()=>_});var n=i(467),a=i(4262),l=i(4438),m=i(1626),h=i(5092);let _=(()=>{var y;class p{constructor(s,r,c){this.firestore=s,this.http=r,this.teamService=c}saveNotificationID(s,r){var c=this;return(0,n.A)(function*(){const g=(0,a.H9)(c.firestore,"users",s.uid),u=yield(0,a.x7)(g);if(u.exists()){const j=u.data();return j.notificationID=r,yield(0,a.BN)(g,j),!0}return console.log("No such document!"),!1})()}getNotificationUser(s){var r=this;return(0,n.A)(function*(){const c=(0,a.H9)(r.firestore,"users",s.uid),g=yield(0,a.x7)(c);if(g.exists()){const u=g.data();return u.notificationID?u.notificationID:""}return console.log("No such document!"),null})()}notifyIncidentToUser(s,r){var c=this;return(0,n.A)(function*(){try{const g=yield c.teamService.getTeamByOrganization(r),u=s.map(b=>b.member),j=g.filter(b=>u.includes(b.name));console.log("team",j);const f="https://devprobeapi.onrender.com/sendNotification";for(let b of j){let O=yield c.getNotificationUser(b);if(console.log("sid",O),""!==O){const K={sid:O,title:"New Incident",type:"new_incident",message:`Hey ${b.name}, you have been assigned a new incident your incident role is ${s.find(L=>L.member===b.name).role}`,target:"https://devprobe-89481.web.app/incident-manager-chooser"};yield c.http.post(f,K).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(g){console.log(g)}})()}notifyIncidentUpdateToTeam(s,r,c){var g=this;return(0,n.A)(function*(){try{const u=yield g.teamService.getTeamByOrganization(r),j=s.map(O=>O.member),f=u.filter(O=>j.includes(O.name));console.log("team",f);const b="https://devprobeapi.onrender.com/sendNotification";for(let O of f){let H=yield g.getNotificationUser(O);if(console.log("sid",H),""!==H){const L={sid:H,title:"Incident Update",type:"update_incident",message:`Hey ${O.name}, there are updates to your incident`,target:c};yield g.http.post(b,L).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(u){console.log(u)}})()}notifyTestToUser(s,r,c){var g=this;return(0,n.A)(function*(){try{console.log("Notify test to user");const u=yield g.teamService.getTeamByOrganization(r),j=s.member,f=u.filter(O=>O.name===j);console.log("team",f);const b="https://devprobeapi.onrender.com/sendNotification";for(let O of f){let H=yield g.getNotificationUser(O);if(console.log("sid",H),""!==H){const L={sid:H,title:"New Unit Test",type:"test",message:`Hey ${O.name}, you have been assigned a new test`,target:c};yield g.http.post(b,L).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(u){console.log(u)}})()}}return(y=p).\u0275fac=function(s){return new(s||y)(l.KVO(a._7),l.KVO(m.Qq),l.KVO(h.O))},y.\u0275prov=l.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),p})()},5092:(W,P,i)=>{i.d(P,{O:()=>h});var n=i(467),a=i(4262),l=i(4438),m=i(4796);let h=(()=>{var _;class y{constructor(o,s){this.firestore=o,this.authService=s}getTeamByOrganization(o){var s=this;return(0,n.A)(function*(){let r=(0,a.H9)(s.firestore,"teams",o);const u=(yield(0,a.x7)(r)).data();let j=[];for(let f=0;f<u.members.length;f++){r=(0,a.H9)(s.firestore,"users",u.members[f]);const O=(yield(0,a.x7)(r)).data();j.push(O)}return j})()}removeMember(o,s){var r=this;return(0,n.A)(function*(){try{let c=(0,a.H9)(r.firestore,"teams",o);const j=(yield(0,a.x7)(c)).data();let f=j.members.filter(O=>O!==s);return yield(0,a.BN)(c,{name:j.name,members:f}),c=(0,a.H9)(r.firestore,"users",s),yield(0,a.BN)(c,{}),yield r.authService,!0}catch{return!1}})()}addMember(o){var s=this;return(0,n.A)(function*(){try{const r=yield s.authService.addMember(o);if(!r)return!1;const c=(0,a.H9)(s.firestore,"teams",o.orgName),u=(yield(0,a.x7)(c)).data();console.log(u);const j=u;let f=j.members;return f.push(r.uid),console.log(f),yield(0,a.mZ)(c,{name:j.name,members:f}),r.uid}catch{return!1}})()}}return(_=y).\u0275fac=function(o){return new(o||_)(l.KVO(a._7),l.KVO(m.u))},_.\u0275prov=l.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),y})()}}]);