"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9878],{5553:(K,P,s)=>{s.d(P,{h:()=>f});var n=s(177),i=s(7863),c=s(4438);let f=(()=>{var m;class d{}return(m=d).\u0275fac=function(p){return new(p||m)},m.\u0275mod=c.$C({type:m}),m.\u0275inj=c.G2t({imports:[n.MD,i.bv]}),d})()},3241:(K,P,s)=>{s.d(P,{p:()=>f});var n=s(4438),i=s(177),c=s(7863);let f=(()=>{var m;class d{constructor(p){this.location=p,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(m=d).\u0275fac=function(p){return new(p||m)(n.rXU(i.aZ))},m.\u0275cmp=n.VBU({type:m,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(p,o){1&p&&(n.j41(0,"ion-header",0)(1,"ion-toolbar"),n.nrm(2,"ion-menu-button",1),n.j41(3,"ion-icon",2),n.bIt("click",function(){return o.goBack()}),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.k0s()()()),2&p&&(n.Y8G("translucent",!0),n.R7$(5),n.JRh(o.title))},dependencies:[c.eU,c.iq,c.MC,c.BC,c.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),d})()},8453:(K,P,s)=>{s.d(P,{W:()=>c});var n=s(4438),i=s(7863);let c=(()=>{var f;class m{constructor(){this.title="Title"}ngOnInit(){}}return(f=m).\u0275fac=function(h){return new(h||f)},f.\u0275cmp=n.VBU({type:f,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(h,p){1&h&&(n.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),n.EFF(3),n.k0s()()()),2&h&&(n.R7$(3),n.JRh(p.title))},dependencies:[i.hU,i.ln]}),m})()},4796:(K,P,s)=>{s.d(P,{u:()=>m});var n=s(467),i=s(8737),c=s(4262),f=s(4438);let m=(()=>{var d;class h{constructor(o,a){this.auth=o,this.firestore=a}registerUser(o){var a=this;return(0,n.A)(function*(){try{const r=yield(0,i.eJ)(a.auth,o.email,o.password);return r.user?(yield(0,c.BN)((0,c.H9)(a.firestore,"users",r.user.uid),{email:o.email,name:o.name,orgName:o.orgName,uid:r.user.uid}),yield(0,c.BN)((0,c.H9)(a.firestore,"teams",`${o.orgName}`),{name:o.orgName,members:[r.user.uid]}),r):null}catch{return null}})()}loginUser(o){var a=this;return(0,n.A)(function*(){try{var r;const u=yield(0,i.x9)(a.auth,o.email,o.password);if(null!==(r=u.user)&&void 0!==r&&r.uid){const O=yield(0,c.x7)((0,c.H9)(a.firestore,"users",u.user.uid));if(O.exists())return localStorage.setItem("user",JSON.stringify(O.data())),u}}catch(u){console.error(u)}return null})()}logoutUser(){var o=this;return(0,n.A)(function*(){yield o.auth.signOut()})()}addMember(o){var a=this;return(0,n.A)(function*(){try{const r=yield(0,i.eJ)(a.auth,o.email,o.password);if(!r.user)return!1;const u={email:o.email,name:o.name,orgName:o.orgName,uid:r.user.uid};return yield(0,c.BN)((0,c.H9)(a.firestore,"users",r.user.uid),u),u}catch{return!1}})()}}return(d=h).\u0275fac=function(o){return new(o||d)(f.KVO(i.Nj),f.KVO(c._7))},d.\u0275prov=f.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),h})()},4970:(K,P,s)=>{s.d(P,{s:()=>W});var n=s(467),i=s(4262);class c{static toArtilleryData(t){return function o(e,t){return p(e,t,d)}(JSON.parse(t),_("ArtilleryData"))}static artilleryDataToJson(t){return JSON.stringify(function a(e,t){return p(e,t,h)}(t,_("ArtilleryData")),null,2)}}function f(e,t,D,j=""){const M=m(e);throw Error(`Invalid value${D?` for key "${D}"`:""}${j?` on ${j}`:""}. Expected ${M} but got ${JSON.stringify(t)}`)}function m(e){return Array.isArray(e)?2===e.length&&void 0===e[0]?`an optional ${m(e[1])}`:`one of [${e.map(t=>m(t)).join(", ")}]`:"object"==typeof e&&void 0!==e.literal?e.literal:typeof e}function d(e){if(void 0===e.jsonToJS){const t={};e.props.forEach(D=>t[D.json]={key:D.js,typ:D.typ}),e.jsonToJS=t}return e.jsonToJS}function h(e){if(void 0===e.jsToJSON){const t={};e.props.forEach(D=>t[D.js]={key:D.json,typ:D.typ}),e.jsToJSON=t}return e.jsToJSON}function p(e,t,D,j="",M=""){if("any"===t)return e;if(null===t)return null===e?e:f(t,e,j,M);if(!1===t)return f(t,e,j,M);let S;for(;"object"==typeof t&&void 0!==t.ref;)S=t.ref,t=b[t.ref];return Array.isArray(t)?function B(l,v){return-1!==l.indexOf(v)?v:f(l.map(T=>r(T)),v,j,M)}(t,e):"object"==typeof t?t.hasOwnProperty("unionMembers")?function U(l,v){const T=l.length;for(let R=0;R<T;R++){const N=l[R];try{return p(v,N,D)}catch{}}return f(l,v,j,M)}(t.unionMembers,e):t.hasOwnProperty("arrayItems")?function H(l,v){return Array.isArray(v)?v.map(T=>p(T,l,D)):f(r("array"),v,j,M)}(t.arrayItems,e):t.hasOwnProperty("props")?function E(l,v,T){if(null===T||"object"!=typeof T||Array.isArray(T))return f(r(S||"object"),T,j,M);const R={};return Object.getOwnPropertyNames(l).forEach(N=>{const J=l[N],$=Object.prototype.hasOwnProperty.call(T,N)?T[N]:void 0;R[J.key]=void 0!==$?p($,J.typ,D,N,S):void 0}),Object.getOwnPropertyNames(T).forEach(N=>{Object.prototype.hasOwnProperty.call(l,N)||(R[N]=p(T[N],v,D,N,S))}),R}(D(t),t.additional,e):f(t,e,j,M):t===Date&&"number"!=typeof e?function C(l){if(null===l)return null;const v=new Date(l);return isNaN(v.valueOf())?f(r("Date"),l,j,M):v}(e):function I(l,v){return typeof l==typeof v?v:f(l,v,j,M)}(t,e)}function r(e){return{literal:e}}function g(e,t){return{props:e,additional:t}}function y(e){return{props:[],additional:e}}function _(e){return{ref:e}}const b={ArtilleryData:g([{json:"aggregate",js:"aggregate",typ:_("Aggregate")},{json:"intermediate",js:"intermediate",typ:function u(e){return{arrayItems:e}}(_("Intermediate"))},{json:"date",js:"date",typ:""}],!1),Aggregate:g([{json:"counters",js:"counters",typ:y(0)},{json:"rates",js:"rates",typ:_("Rates")},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:0},{json:"summaries",js:"summaries",typ:_("Histograms")},{json:"histograms",js:"histograms",typ:_("Histograms")}],!1),Histograms:g([{json:"http.response_time",js:"http.response_time",typ:y(3.14)},{json:"plugins.metrics-by-endpoint.response_time./",js:"plugins.metrics-by-endpoint.response_time./",typ:y(3.14)},{json:"vusers.session_length",js:"vusers.session_length",typ:function O(...e){return{unionMembers:e}}(void 0,y(3.14))}],!1),Rates:g([{json:"http.request_rate",js:"http.request_rate",typ:0}],!1),Intermediate:g([{json:"counters",js:"counters",typ:y(0)},{json:"rates",js:"rates",typ:_("Rates")},{json:"http.request_rate",js:"http.request_rate",typ:null},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:""},{json:"summaries",js:"summaries",typ:_("Histograms")},{json:"histograms",js:"histograms",typ:_("Histograms")}],!1)};var A=s(4438),L=s(1626),x=s(7473);let W=(()=>{var e;class t{constructor(j,M,I){this.firestore=j,this.http=M,this.notificationService=I,this.url="https://devprobeapi.onrender.com/create_load_test"}getLoadTestHistory(j,M,I){var U=this;return(0,n.A)(function*(){const B=(0,i.H9)(U.firestore,"teams",j,"products",M,"load_test",I),H=yield(0,i.x7)(B);if(H.exists()){let C=H.data();console.log(C);let E=Object.keys(C);console.log(E);for(let S of E)C[S]=c.toArtilleryData(C[S]);return C}return{}})()}sendLoadTest(j,M,I,U,B){var H=this;return(0,n.A)(function*(){try{const C=yield H.notificationService.getNotificationUser(B),E={team:j,product:M,service:I,target:`https://${U}`,sid:C};return yield H.http.post(H.url,E).toPromise()}catch{return{}}})()}getLoadTestHistoryByDate(j,M,I,U){var B=this;return(0,n.A)(function*(){const H=(0,i.H9)(B.firestore,"teams",j,"products",M,"load_test",I),C=yield(0,i.x7)(H);if(C.exists()){let E=C.data();console.log(E);let S=Object.keys(E);console.log(S);for(let l of S)E[l]=c.toArtilleryData(E[l]),E[l].date.split("-")[0]+"-"+E[l].date.split("-")[1]+"-"+E[l].date.split("-")[2]!==U&&delete E[l];return console.log("Filtered by Date: ",E),E}return{}})()}}return(e=t).\u0275fac=function(j){return new(j||e)(A.KVO(i._7),A.KVO(L.Qq),A.KVO(x.J))},e.\u0275prov=A.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),t})()},7473:(K,P,s)=>{s.d(P,{J:()=>d});var n=s(467),i=s(4262),c=s(4438),f=s(1626),m=s(5092);let d=(()=>{var h;class p{constructor(a,r,u){this.firestore=a,this.http=r,this.teamService=u}saveNotificationID(a,r){var u=this;return(0,n.A)(function*(){const O=(0,i.H9)(u.firestore,"users",a.uid),g=yield(0,i.x7)(O);if(g.exists()){const y=g.data();return y.notificationID=r,yield(0,i.BN)(O,y),!0}return console.log("No such document!"),!1})()}getNotificationUser(a){var r=this;return(0,n.A)(function*(){const u=(0,i.H9)(r.firestore,"users",a.uid),O=yield(0,i.x7)(u);if(O.exists()){const g=O.data();return g.notificationID?g.notificationID:""}return console.log("No such document!"),null})()}notifyIncidentToUser(a,r){var u=this;return(0,n.A)(function*(){try{const O=yield u.teamService.getTeamByOrganization(r),g=a.map(b=>b.member),y=O.filter(b=>g.includes(b.name));console.log("team",y);const _="https://devprobeapi.onrender.com/sendNotification";for(let b of y){let A=yield u.getNotificationUser(b);if(console.log("sid",A),""!==A){const x={sid:A,title:"New Incident",type:"new_incident",message:`Hey ${b.name}, you have been assigned a new incident your incident role is ${a.find(W=>W.member===b.name).role}`,target:"https://devprobe-89481.web.app/incident-manager-chooser"};yield u.http.post(_,x).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(O){console.log(O)}})()}notifyIncidentUpdateToTeam(a,r,u){var O=this;return(0,n.A)(function*(){try{const g=yield O.teamService.getTeamByOrganization(r),y=a.map(A=>A.member),_=g.filter(A=>y.includes(A.name));console.log("team",_);const b="https://devprobeapi.onrender.com/sendNotification";for(let A of _){let L=yield O.getNotificationUser(A);if(console.log("sid",L),""!==L){const W={sid:L,title:"Incident Update",type:"update_incident",message:`Hey ${A.name}, there are updates to your incident`,target:u};yield O.http.post(b,W).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(g){console.log(g)}})()}}return(h=p).\u0275fac=function(a){return new(a||h)(c.KVO(i._7),c.KVO(f.Qq),c.KVO(m.O))},h.\u0275prov=c.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),p})()},5092:(K,P,s)=>{s.d(P,{O:()=>m});var n=s(467),i=s(4262),c=s(4438),f=s(4796);let m=(()=>{var d;class h{constructor(o,a){this.firestore=o,this.authService=a}getTeamByOrganization(o){var a=this;return(0,n.A)(function*(){let r=(0,i.H9)(a.firestore,"teams",o);const g=(yield(0,i.x7)(r)).data();let y=[];for(let _=0;_<g.members.length;_++){r=(0,i.H9)(a.firestore,"users",g.members[_]);const A=(yield(0,i.x7)(r)).data();y.push(A)}return y})()}removeMember(o,a){var r=this;return(0,n.A)(function*(){try{let u=(0,i.H9)(r.firestore,"teams",o);const y=(yield(0,i.x7)(u)).data();let _=y.members.filter(A=>A!==a);return yield(0,i.BN)(u,{name:y.name,members:_}),u=(0,i.H9)(r.firestore,"users",a),yield(0,i.BN)(u,{}),yield r.authService,!0}catch{return!1}})()}addMember(o){var a=this;return(0,n.A)(function*(){try{const r=yield a.authService.addMember(o);if(!r)return!1;const u=(0,i.H9)(a.firestore,"teams",o.orgName),g=(yield(0,i.x7)(u)).data();console.log(g);const y=g;let _=y.members;return _.push(r.uid),console.log(_),yield(0,i.mZ)(u,{name:y.name,members:_}),r.uid}catch{return!1}})()}}return(d=h).\u0275fac=function(o){return new(o||d)(c.KVO(i._7),c.KVO(f.u))},d.\u0275prov=c.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),h})()}}]);