"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[246],{246:(x,h,i)=>{i.r(h),i.d(h,{ShowMapPageModule:()=>L});var g=i(177),m=i(4341),l=i(7863),p=i(305),s=i(467),c=i(8244),f=i(5841),e=i(4438),v=i(9640),y=i(3241);function M(o,n){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&o){const d=n.$implicit;e.R7$(),e.Lme("",d.countryFrom," : ",d.latency,"ms")}}const w=[{path:"",component:(()=>{var o;class n{constructor(t,a,r){this.ripeService=t,this.loadingCtrl=a,this.route=r,this.ripeData=[],this.orgName="",this.productObjective="",this.description=""}ngOnInit(){}ionViewDidEnter(){var t=this;return(0,s.A)(function*(){yield t.showLoading(),t.route.queryParams.subscribe(function(){var a=(0,s.A)(function*(r){t.description=r.description,t.productObjective=r.productObjective,t.orgName=r.orgName,console.log(t.orgName),console.log(t.productObjective),console.log(t.description),yield t.ripeService.getAllResultsByDescription(t.orgName,t.productObjective,t.description).then(u=>{t.ripeData=u}).then(()=>{t.leafletMap()})});return function(r){return a.apply(this,arguments)}}())})()}leafletMap(){var t=this;return(0,s.A)(function*(){t.map=c.map("mapId").setView([0,0],2.5),c.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"edupala.com \xa9 Angular LeafLet",minZoom:2.5,maxZoom:8}).addTo(t.map),setTimeout(()=>{t.map.invalidateSize(),t.addPaths()},1e3)})()}ngOnDestroy(){this.map.remove()}addPaths(){var t=this;return(0,s.A)(function*(){t.ripeData=t.ripeData.data,t.ripeData.sort((a,r)=>a.latency<r.latency?1:-1);for(let a of t.ripeData){(0,f.antPath)([[a.fromLatitude,a.fromLongitude],[a.toLatitude,a.toLongitude]],{color:"#FF0000",weight:5,opacity:.6}).addTo(t.map);let r=c.divIcon({className:"label-icon",html:`<div style="background-color: white; padding: 2px; border-radius: 3px; display: flex; justify-content: center; align-items: center; box-shadow: 0 0 5px 0 rgba(0,0,0,0.2);"><p style="color:black">Latency: ${a.latency} ms</p></div>`,iconSize:[200,20]});c.marker([(a.fromLatitude+a.toLatitude)/2,(a.fromLongitude+a.toLongitude)/2],{icon:r}).addTo(t.map)}yield t.hideLoading()})()}showLoading(){var t=this;return(0,s.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,s.A)(function*(){yield t.loadingCtrl.dismiss()})()}}return(o=n).\u0275fac=function(t){return new(t||o)(e.rXU(v.Q),e.rXU(l.Xi),e.rXU(p.nX))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-show-map"]],decls:10,vars:1,consts:[[3,"title"],[1,"relative"],["color","dark",1,"fixed-card","hidden","lg:block"],["color","black"],["id","mapId",2,"width","100%","height","100%"]],template:function(t,a){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-card",2)(3,"ion-card-header")(4,"ion-card-title",3),e.EFF(5,"Latency Higher to Lower"),e.k0s()(),e.j41(6,"ion-card-content"),e.Z7z(7,M,2,2,"p",null,e.fX1),e.k0s()(),e.nrm(9,"div",4),e.k0s()),2&t&&(e.Y8G("title","Show Map"),e.R7$(7),e.Dyx(a.ripeData))},dependencies:[l.b_,l.I9,l.ME,l.tN,l.W9,y.p],styles:[".fixed-card[_ngcontent-%COMP%]{position:absolute;top:10px;left:50px;z-index:1000;background-color:#fff;border-radius:10px;box-shadow:0 2px 10px #0003}"]}),n})()}];let P=(()=>{var o;class n{}return(o=n).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.iI.forChild(w),p.iI]}),n})();var S=i(5553);let L=(()=>{var o;class n{}return(o=n).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.MD,m.YN,l.bv,P,S.h]}),n})()}}]);