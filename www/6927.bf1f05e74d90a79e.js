"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6927],{6927:(L,m,u)=>{u.r(m),u.d(m,{ViewProductPageModule:()=>j});var g=u(177),h=u(4341),c=u(7863),a=u(305),s=u(467),e=u(4438),f=u(6241),P=u(385);function v(r,d){if(1&r){const n=e.RV6();e.j41(0,"ion-item"),e.nrm(1,"ion-input",12),e.j41(2,"ion-icon",13),e.bIt("click",function(){const o=e.eBV(n).$implicit,i=e.XpG();return e.Njj(i.deleteStep(o))}),e.k0s()()}if(2&r){const n=d.$implicit;e.R7$(),e.FS9("value",n)}}function y(r,d){if(1&r&&(e.j41(0,"ion-item"),e.nrm(1,"ion-input",12),e.k0s()),2&r){const n=d.$implicit;e.R7$(),e.FS9("value",n)}}function S(r,d){if(1&r&&(e.j41(0,"ion-item"),e.nrm(1,"ion-input",12),e.k0s()),2&r){const n=d.$implicit;e.R7$(),e.FS9("value",n)}}const w=[{path:"",component:(()=>{var r;class d{constructor(t,o,i,l,p){this.route=t,this.productService=o,this.alertCtrl=i,this.loadingCtrl=l,this.router=p,this.product={productObjective:"",productSteps:[],productServices:[],productSLOs:[]},this.orgName="orgName"}ngOnInit(){var t=this;return(0,s.A)(function*(){t.getProductFromParams(),t.getOrgName()})()}getOrgName(){const t=localStorage.getItem("user");if(!t)return;const o=JSON.parse(t);this.orgName=o.orgName}getProductFromParams(){this.route.queryParams.subscribe(t=>{this.product=JSON.parse(t.product)}),console.log(this.product)}upDateFields(){var t=this;return(0,s.A)(function*(){yield t.showLoading();const o=t.inputs.map(k=>k.value),i=t.product.productSteps.length,l=o.slice(0,i),p=o.slice(i,2*i),x=o.slice(2*i,3*i);t.product.productSteps=l,t.product.productServices=p,t.product.productSLOs=x,yield t.productService.addProduct(t.product,t.orgName),yield t.hideLoading(),yield t.showAlert("Product updated successfully")})()}deleteProduct(){var t=this;return(0,s.A)(function*(){yield t.showLoading(),yield t.productService.removeProduct(t.orgName,t.product.productObjective),yield t.hideLoading(),yield t.showAlert("Product deleted successfully"),yield t.router.navigate(["/model-product"])})()}deleteStep(t){var o=this;return(0,s.A)(function*(){yield o.showLoading();const i=o.product.productSteps.indexOf(t);o.product.productSteps.splice(i,1),o.product.productServices.splice(i,1),o.product.productSLOs.splice(i,1),yield o.productService.addProduct(o.product,o.orgName),yield o.hideLoading(),yield o.showAlert("Product step deleted successfully")})()}addStep(){var t=this;return(0,s.A)(function*(){var i;yield(yield t.alertCtrl.create({header:"Add Step",inputs:[{name:"step",type:"text",placeholder:"Step"},{name:"service",type:"text",placeholder:"Service"},{name:"slo",type:"text",placeholder:"SLO"}],buttons:[{text:"Cancel",role:"cancel"},{text:"Add",handler:(i=(0,s.A)(function*(l){yield t.showLoading(),t.product.productSteps.push(l.step),t.product.productServices.push(l.service),t.product.productSLOs.push(l.slo),yield t.productService.addProduct(t.product,t.orgName),yield t.hideLoading(),yield t.showAlert("Product step added successfully")}),function(p){return i.apply(this,arguments)})}]})).present()})()}showAlert(t){var o=this;return(0,s.A)(function*(){yield(yield o.alertCtrl.create({header:"Product Update",message:t,buttons:["OK"]})).present()})()}showLoading(){var t=this;return(0,s.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,s.A)(function*(){yield t.loadingCtrl.dismiss()})()}}return(r=d).\u0275fac=function(t){return new(t||r)(e.rXU(a.nX),e.rXU(f.b),e.rXU(c.hG),e.rXU(c.Xi),e.rXU(a.Ix))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-view-product"]],viewQuery:function(t,o){if(1&t&&e.GBs(c.$w,5),2&t){let i;e.mGM(i=e.lsd())&&(o.inputs=i)}},decls:39,vars:2,consts:[[3,"title"],[3,"fullscreen"],[1,"flex","flex-col","flex-grow","lg:flex-row","md:flex-row","min-w-full","h-full"],[1,"flex","flex-col","flex-grow"],[1,"flex","flex-row","justify-center"],[1,"flex","flex-row","justify-center","items-center","mt-auto"],["color","light"],[1,"flex","justify-center","items-center","min-w-full","p-4"],[1,"p-1"],["color","success",3,"click"],["color","primary",3,"click"],["color","danger",3,"click"],[3,"value"],["slot","end","name","trash",3,"click"]],template:function(t,o){1&t&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"div",2)(3,"ion-card",3)(4,"ion-card-header",4)(5,"ion-card-title"),e.EFF(6,"Product Steps"),e.k0s()(),e.j41(7,"ion-card-content")(8,"ion-list"),e.Z7z(9,v,3,1,"ion-item",null,e.fX1),e.k0s()()(),e.j41(11,"ion-card",3)(12,"ion-card-header",4)(13,"ion-card-title"),e.EFF(14,"Product Services"),e.k0s()(),e.j41(15,"ion-card-content")(16,"ion-list"),e.Z7z(17,y,2,1,"ion-item",null,e.fX1),e.k0s()()(),e.j41(19,"ion-card",3)(20,"ion-card-header",4)(21,"ion-card-title"),e.EFF(22,"Product SLOs"),e.k0s()(),e.j41(23,"ion-card-content")(24,"ion-list"),e.Z7z(25,S,2,1,"ion-item",null,e.fX1),e.k0s()()()(),e.j41(27,"div",5)(28,"ion-item-divider",6)(29,"div",7)(30,"div",8)(31,"ion-button",9),e.bIt("click",function(){return o.addStep()}),e.EFF(32,"Add Step"),e.k0s()(),e.j41(33,"div",8)(34,"ion-button",10),e.bIt("click",function(){return o.upDateFields()}),e.EFF(35,"Edit Product"),e.k0s()(),e.j41(36,"div",8)(37,"ion-button",11),e.bIt("click",function(){return o.deleteProduct()}),e.EFF(38,"Delete Product"),e.k0s()()()()()()),2&t&&(e.Y8G("title",o.product.productObjective),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(8),e.Dyx(o.product.productSteps),e.R7$(8),e.Dyx(o.product.productServices),e.R7$(8),e.Dyx(o.product.productSLOs))},dependencies:[c.Jm,c.b_,c.I9,c.ME,c.tN,c.W9,c.iq,c.$w,c.uz,c.Dg,c.nf,c.Gw,P.l]}),d})()}];let V=(()=>{var r;class d{}return(r=d).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[a.iI.forChild(w),a.iI]}),d})();var F=u(5553);let j=(()=>{var r;class d{}return(r=d).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[g.MD,h.YN,c.bv,V,F.h]}),d})()}}]);