"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7551],{3241:(y,_,c)=>{c.d(_,{p:()=>b});var l=c(4438),f=c(177),s=c(7863);let b=(()=>{var m;class p{constructor(g){this.location=g,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(m=p).\u0275fac=function(g){return new(g||m)(l.rXU(f.aZ))},m.\u0275cmp=l.VBU({type:m,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(g,u){1&g&&(l.j41(0,"ion-header",0)(1,"ion-toolbar"),l.nrm(2,"ion-menu-button",1),l.j41(3,"ion-icon",2),l.bIt("click",function(){return u.goBack()}),l.k0s(),l.j41(4,"ion-title"),l.EFF(5),l.k0s()()()),2&g&&(l.Y8G("translucent",!0),l.R7$(5),l.JRh(u.title))},dependencies:[s.eU,s.iq,s.MC,s.BC,s.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),p})()},7551:(y,_,c)=>{c.r(_),c.d(_,{NewIncidentPageModule:()=>x});var l=c(177),f=c(4341),s=c(7863),b=c(7650),m=c(467),p=c(2330),e=c(4438),g=c(5092),u=c(4262);let I=(()=>{var t;class r{constructor(n){this.firestore=n}saveIncident(n,i,d,a){var h=this;return(0,m.A)(function*(){try{console.log(a);const v=(0,u.H9)(h.firestore,"teams",n,"products",i,"incident",d),C=yield(0,u.x7)(v);if(C.exists()){const M=C.data();return M.incidents.push({...a}),yield(0,u.BN)(v,M),!0}return console.log("No such document!"),yield(0,u.BN)(v,{incidents:[a]}),!0}catch(v){return console.log(v),!1}})()}}return(t=r).\u0275fac=function(n){return new(n||t)(e.KVO(u._7))},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var w=c(8453),F=c(3241);function k(t,r){if(1&t&&(e.j41(0,"ion-select-option",27),e.EFF(1),e.k0s()),2&t){const o=e.XpG().$implicit;e.FS9("value",o.name),e.R7$(),e.JRh(o.name)}}function T(t,r){if(1&t&&e.DNE(0,k,2,2,"ion-select-option",27),2&t){const o=r.$implicit,n=e.XpG();e.vxM(0,o.name!==n.operationsLead&&o.name!==n.communicationsLead?0:-1)}}function L(t,r){if(1&t&&(e.j41(0,"ion-select-option",27),e.EFF(1),e.k0s()),2&t){const o=e.XpG().$implicit;e.FS9("value",o.name),e.R7$(),e.JRh(o.name)}}function N(t,r){if(1&t&&e.DNE(0,L,2,2,"ion-select-option",27),2&t){const o=r.$implicit,n=e.XpG();e.vxM(0,o.name!==n.operationsLead&&o.name!==n.incidentCommander?0:-1)}}function R(t,r){if(1&t&&(e.j41(0,"ion-select-option",27),e.EFF(1),e.k0s()),2&t){const o=e.XpG().$implicit;e.FS9("value",o.name),e.R7$(),e.JRh(o.name)}}function j(t,r){if(1&t&&e.DNE(0,R,2,2,"ion-select-option",27),2&t){const o=r.$implicit,n=e.XpG();e.vxM(0,o.name!==n.incidentCommander&&o.name!==n.communicationsLead?0:-1)}}function P(t,r){if(1&t&&(e.j41(0,"div",32),e.EFF(1),e.k0s()),2&t){const o=r.$implicit;e.R7$(),e.SpI(" ",o," ")}}function D(t,r){if(1&t){const o=e.RV6();e.j41(0,"div",28)(1,"h3",29),e.EFF(2),e.k0s(),e.j41(3,"div",30),e.bIt("cdkDropListDropped",function(i){e.eBV(o);const d=e.XpG();return e.Njj(d.dropOperationMember(i))}),e.DNE(4,P,2,1,"div",31),e.k0s()()}if(2&t){const o=r.$implicit;e.R7$(2),e.JRh(o.name),e.R7$(),e.Y8G("cdkDropListData",o.items),e.R7$(),e.Y8G("ngForOf",o.items)}}const E=[{path:"",component:(()=>{var t;class r{constructor(n,i,d,a,h){this.activatedRoute=n,this.loadingCtrl=i,this.teamService=d,this.alertCtrl=a,this.incidentService=h,this.productStep="",this.productObjective="",this.orgName="",this.teamMembers=[],this.incidentCommander="",this.operationsLead="",this.communicationsLead="",this.disableAssignee=!1,this.operationTeam=[{name:"Available Members",items:["No Members Available"]},{name:"Assigned Members",items:["No Members Assigned"]}],this.incidentTitle="",this.incidentDescription="",this.incidentUrgency="",this.orgImpact=""}ngOnInit(){}ionViewWillEnter(){var n=this;return(0,m.A)(function*(){yield n.showLoading(),n.getParams(),yield n.getAllTeamMembers(),n.availableMembers(),yield n.hideLoading()})()}getParams(){this.activatedRoute.params.subscribe(i=>{this.productObjective=i.productObjective,this.productStep=i.step});const n=JSON.parse(localStorage.getItem("user"));this.orgName=n.orgName,console.log(this.orgName),console.log(this.productObjective),console.log(this.productStep)}getAllTeamMembers(){var n=this;return(0,m.A)(function*(){n.teamMembers=yield n.teamService.getTeamByOrganization(n.orgName),console.log("Members",n.teamMembers)})()}onIncidentCommanderChange(n){this.incidentCommander=n.detail.value,console.log("Incident Commander",this.incidentCommander),this.availableMembers()}onCommunicationsLeadChange(n){this.communicationsLead=n.detail.value,console.log("Communications Lead",this.communicationsLead),this.availableMembers()}onOperationsLeadChange(n){this.operationsLead=n.detail.value,console.log("Operations Lead",this.operationsLead),this.availableMembers()}availableMembers(){this.operationTeam[0].items=[];for(let n=0;n<this.teamMembers.length;n++)this.teamMembers[n].name!==this.incidentCommander&&this.teamMembers[n].name!==this.operationsLead&&this.teamMembers[n].name!==this.communicationsLead&&this.operationTeam[0].items.push(this.teamMembers[n].name);console.log("Available Members",this.operationTeam)}dropOperationMember(n){var i=this;return(0,m.A)(function*(){""!==i.incidentCommander&&""!==i.operationsLead&&""!==i.communicationsLead?(i.disableAssignee=!0,"No Members Available"===i.operationTeam[0].items[0]&&i.operationTeam[0].items.shift(),"No Members Assigned"===i.operationTeam[1].items[0]&&i.operationTeam[1].items.shift(),n.previousContainer===n.container?(0,p.HD)(n.container.data,n.previousIndex,n.currentIndex):(0,p.eg)(n.previousContainer.data,n.container.data,n.previousIndex,n.currentIndex),0===i.operationTeam[0].items.length&&i.operationTeam[0].items.push("No Members Available"),0===i.operationTeam[1].items.length&&i.operationTeam[1].items.push("No Members Assigned")):yield i.showAlert("Please assign a Incident Commander and an Operations Lead and a Communications Lead before adding members","Error")})()}saveIncident(){var n=this;return(0,m.A)(function*(){if(""===n.incidentCommander||""===n.operationsLead||""===n.communicationsLead)return void(yield n.showAlert("Please assign a Incident Commander and an Operations Lead and a Communications Lead before saving the incident","Error"));if("No Members Assigned"===n.operationTeam[1].items[0])return void(yield n.showAlert("Please assign at least one member to the operations team","Error"));if(""===n.incidentTitle||""===n.incidentDescription||""===n.incidentUrgency||""===n.orgImpact)return void(yield n.showAlert("Please fill the incident title, description, urgency and org impact","Error"));yield n.showLoading();let i=new Date,d=i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds();console.log(d),yield n.incidentService.saveIncident(n.orgName,n.productObjective,n.productStep,{title:n.incidentTitle,description:n.incidentDescription,urgency:n.incidentUrgency,org_impact:n.orgImpact,operations_lead:n.operationsLead,communications_lead:n.communicationsLead,operation_team:n.operationTeam[1].items,date:d}).then(function(){var a=(0,m.A)(function*(h){h?(yield n.hideLoading(),yield n.showAlert("Incident saved successfully","Success"),window.history.back()):(yield n.hideLoading(),yield n.showAlert("Error saving Incident","Error"))});return function(h){return a.apply(this,arguments)}}())})()}showLoading(){var n=this;return(0,m.A)(function*(){yield(yield n.loadingCtrl.create({})).present()})()}hideLoading(){var n=this;return(0,m.A)(function*(){yield n.loadingCtrl.dismiss()})()}showAlert(n,i){var d=this;return(0,m.A)(function*(){yield(yield d.alertCtrl.create({header:i,message:n,buttons:["OK"]})).present()})()}}return(t=r).\u0275fac=function(n){return new(n||t)(e.rXU(b.nX),e.rXU(s.Xi),e.rXU(g.O),e.rXU(s.hG),e.rXU(I))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-new-incident"]],decls:105,vars:16,consts:[[3,"title"],[3,"fullscreen"],[1,"bg-gray-900","mt-10","ml-10","mr-10","rounded-l-lg","rounded-r-lg","rounded-t-lg","rounded-b-none"],[1,"lg:m-10","md:m-10"],["size","12","size-md","12","size-lg","12",1,""],[1,"flex","flex-row","justify-center","w-full"],[1,"text-4xl","lg:text-6xl","font-bold"],[1,"bg-gray-800","mb-10","ml-10","mr-10","rounded-l-lg","rounded-r-lg","rounded-t-none","rounded-b-lg"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-center"],["label","Incident Commander","placeholder","Select an Incident Commander","interface","popover",3,"ionChange","disabled"],["label","Communications Leader","placeholder","Select an Communications Leader","interface","popover",3,"ionChange","disabled"],["label","Incident Operations Lead","placeholder","Select an Operations Lead","interface","popover",3,"ionChange","disabled"],["cdkDropListGroup","",1,"kanban-board","min-w-full","min-h-full"],["class","kanban-column flex flex-col justify-center items-center",4,"ngFor","ngForOf"],["placeholder","Title","type","text",1,"p-2","m-2",3,"ngModelChange","ngModel"],["placeholder","Description",1,"w-full","h-96",3,"ngModelChange","ngModel"],["label","Incident Urgency","placeholder","Select an Incident Urgency","interface","popover",3,"ngModelChange","ngModel"],["value","Critical"],["value","High"],["value","Medium"],["value","Low"],["label","Organization Impact","placeholder","Select an Organization Impact","interface","popover",3,"ngModelChange","ngModel"],["value","Extensive/Widespread"],["value","Significant/Large"],["value","Moderate/Limited"],["value","Minor/Localized"],["color","success",1,"w-full",3,"click"],[3,"value"],[1,"kanban-column","flex","flex-col","justify-center","items-center"],[1,"m-2"],["cdkDropList","",1,"kanban-list","min-w-full",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","","class","kanban-item",4,"ngFor","ngForOf"],["cdkDrag","",1,"kanban-item"]],template:function(n,i){1&n&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-grid",2)(3,"ion-row",3)(4,"ion-col",4)(5,"div",5)(6,"h1",6),e.EFF(7,"Incident Assignees"),e.k0s()()()()(),e.j41(8,"ion-grid",7),e.nrm(9,"app-title",0),e.j41(10,"ion-row",3)(11,"ion-col",8)(12,"p"),e.EFF(13,"The incident commander holds the high-level state about the incident. They structure the incident response task force, assigning responsibilities according to need and priority. The commander holds all positions that they have not delegated. If appropriate, they can remove roadblocks that prevent Ops from working most effectively."),e.k0s()()(),e.j41(14,"ion-row",3)(15,"ion-col",4)(16,"ion-card")(17,"ion-card-content")(18,"ion-select",9),e.bIt("ionChange",function(a){return i.onIncidentCommanderChange(a)}),e.Z7z(19,T,1,1,null,null,e.fX1),e.k0s()()()()(),e.nrm(21,"app-title",0),e.j41(22,"ion-row",3)(23,"ion-col",8)(24,"p"),e.EFF(25,"This person is the public face of the incident response task force. Their duties most definitely include issuing periodic updates to the incident response team and stakeholders (usually via email), and may extend to tasks such as keeping the incident document accurate and up to date."),e.k0s()()(),e.j41(26,"ion-row",3)(27,"ion-col",4)(28,"ion-card")(29,"ion-card-content")(30,"ion-select",10),e.bIt("ionChange",function(a){return i.onCommunicationsLeadChange(a)}),e.Z7z(31,N,1,1,null,null,e.fX1),e.k0s()()()()(),e.nrm(33,"app-title",0),e.j41(34,"ion-row",3)(35,"ion-col",8)(36,"p"),e.EFF(37,"The Ops lead works with the incident commander to respond to the incident by applying operational tools to the task at hand. The operations team should be the only group modifying the system during an incident."),e.k0s()()(),e.j41(38,"ion-row",3)(39,"ion-col",4)(40,"ion-card")(41,"ion-card-content")(42,"ion-select",11),e.bIt("ionChange",function(a){return i.onOperationsLeadChange(a)}),e.Z7z(43,j,1,1,null,null,e.fX1),e.k0s()()()()(),e.j41(45,"ion-row",3)(46,"ion-col",8)(47,"div",12),e.DNE(48,D,5,3,"div",13),e.k0s()()()(),e.j41(49,"ion-grid",2)(50,"ion-row",3)(51,"ion-col",4)(52,"div",5)(53,"h1",6),e.EFF(54,"Incident Report"),e.k0s()()()()(),e.j41(55,"ion-grid",7),e.nrm(56,"app-title",0),e.j41(57,"ion-row",3)(58,"ion-col",4)(59,"p"),e.EFF(60,"Summarize the incident in a title that is clear and concise. The title should be the first thing the incident commander reads."),e.k0s()(),e.j41(61,"ion-col",4)(62,"ion-card")(63,"ion-card-content")(64,"ion-input",14),e.mxI("ngModelChange",function(a){return e.DH7(i.incidentTitle,a)||(i.incidentTitle=a),a}),e.k0s()()()()(),e.nrm(65,"app-title",0),e.j41(66,"ion-row",3)(67,"ion-col",4)(68,"p"),e.EFF(69,"Describe the incident in detail and how it occurred."),e.k0s()()(),e.j41(70,"ion-row",3)(71,"ion-col",4)(72,"ion-card")(73,"ion-card-content")(74,"ion-textarea",15),e.mxI("ngModelChange",function(a){return e.DH7(i.incidentDescription,a)||(i.incidentDescription=a),a}),e.k0s()()()()(),e.nrm(75,"app-title",0),e.j41(76,"ion-row",3)(77,"ion-col",4)(78,"ion-card")(79,"ion-card-content")(80,"ion-select",16),e.mxI("ngModelChange",function(a){return e.DH7(i.incidentUrgency,a)||(i.incidentUrgency=a),a}),e.j41(81,"ion-select-option",17),e.EFF(82,"Critical"),e.k0s(),e.j41(83,"ion-select-option",18),e.EFF(84,"High"),e.k0s(),e.j41(85,"ion-select-option",19),e.EFF(86,"Medium"),e.k0s(),e.j41(87,"ion-select-option",20),e.EFF(88,"Low"),e.k0s()()()(),e.j41(89,"ion-card")(90,"ion-card-content")(91,"ion-select",21),e.mxI("ngModelChange",function(a){return e.DH7(i.orgImpact,a)||(i.orgImpact=a),a}),e.j41(92,"ion-select-option",22),e.EFF(93,"Extensive/Widespread"),e.k0s(),e.j41(94,"ion-select-option",23),e.EFF(95,"Significant/Large"),e.k0s(),e.j41(96,"ion-select-option",24),e.EFF(97,"Moderate/Limited"),e.k0s(),e.j41(98,"ion-select-option",25),e.EFF(99,"Minor/Localized"),e.k0s()()()()()()(),e.j41(100,"ion-grid")(101,"ion-row",3)(102,"ion-col",4)(103,"ion-button",26),e.bIt("click",function(){return i.saveIncident()}),e.EFF(104,"Save Incident"),e.k0s()()()()()),2&n&&(e.Y8G("title","New Incident"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(8),e.Y8G("title","Assign An Incident Commander"),e.R7$(9),e.Y8G("disabled",i.disableAssignee),e.R7$(),e.Dyx(i.teamMembers),e.R7$(2),e.Y8G("title","Assign An Communication Leader"),e.R7$(9),e.Y8G("disabled",i.disableAssignee),e.R7$(),e.Dyx(i.teamMembers),e.R7$(2),e.Y8G("title","Assign An Operations Lead and Team"),e.R7$(9),e.Y8G("disabled",i.disableAssignee),e.R7$(),e.Dyx(i.teamMembers),e.R7$(5),e.Y8G("ngForOf",i.operationTeam),e.R7$(8),e.Y8G("title","Incident Title"),e.R7$(8),e.R50("ngModel",i.incidentTitle),e.R7$(),e.Y8G("title","Incident Description"),e.R7$(9),e.R50("ngModel",i.incidentDescription),e.R7$(),e.Y8G("title","Incident Urgency"),e.R7$(5),e.R50("ngModel",i.incidentUrgency),e.R7$(11),e.R50("ngModel",i.orgImpact))},dependencies:[l.Sq,f.BC,f.vS,s.Jm,s.b_,s.I9,s.hU,s.W9,s.lO,s.$w,s.ln,s.Nm,s.Ip,s.nc,s.Je,s.Gw,w.W,F.p,p.T1,p.O7,p.RK],styles:[".kanban-board[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.kanban-column[_ngcontent-%COMP%]{width:50%;background-color:#3e3e3e;padding:10px;margin:10px;border-radius:5px;display:flex;flex-direction:column}.kanban-list[_ngcontent-%COMP%]{min-height:100px;padding:10px;background-color:#555;border-radius:5px;flex-grow:1}.kanban-item[_ngcontent-%COMP%]{padding:10px;margin:5px 0;background-color:#000;border-radius:5px;box-shadow:0 2px 5px #0003;cursor:move}"]}),r})()}];let A=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[b.iI.forChild(E),b.iI]}),r})();var O=c(5553);let x=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[l.MD,f.YN,s.bv,A,O.h]}),r})()}}]);