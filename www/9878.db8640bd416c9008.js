"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9878],{5553:(K,P,s)=>{s.d(P,{h:()=>f});var n=s(177),i=s(7863),u=s(4438);let f=(()=>{var m;class d{}return(m=d).\u0275fac=function(h){return new(h||m)},m.\u0275mod=u.$C({type:m}),m.\u0275inj=u.G2t({imports:[n.MD,i.bv]}),d})()},3241:(K,P,s)=>{s.d(P,{p:()=>f});var n=s(4438),i=s(177),u=s(7863);let f=(()=>{var m;class d{constructor(h){this.location=h,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(m=d).\u0275fac=function(h){return new(h||m)(n.rXU(i.aZ))},m.\u0275cmp=n.VBU({type:m,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(h,o){1&h&&(n.j41(0,"ion-header",0)(1,"ion-toolbar"),n.nrm(2,"ion-menu-button",1),n.j41(3,"ion-icon",2),n.bIt("click",function(){return o.goBack()}),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.k0s()()()),2&h&&(n.Y8G("translucent",!0),n.R7$(5),n.JRh(o.title))},dependencies:[u.eU,u.iq,u.MC,u.BC,u.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),d})()},8453:(K,P,s)=>{s.d(P,{W:()=>u});var n=s(4438),i=s(7863);let u=(()=>{var f;class m{constructor(){this.title="Title"}ngOnInit(){}}return(f=m).\u0275fac=function(_){return new(_||f)},f.\u0275cmp=n.VBU({type:f,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(_,h){1&_&&(n.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),n.EFF(3),n.k0s()()()),2&_&&(n.R7$(3),n.JRh(h.title))},dependencies:[i.hU,i.ln]}),m})()},4796:(K,P,s)=>{s.d(P,{u:()=>m});var n=s(467),i=s(8737),u=s(4262),f=s(4438);let m=(()=>{var d;class _{constructor(o,a){this.auth=o,this.firestore=a}registerUser(o){var a=this;return(0,n.A)(function*(){try{const r=yield(0,i.eJ)(a.auth,o.email,o.password);return r.user?(yield(0,u.BN)((0,u.H9)(a.firestore,"users",r.user.uid),{email:o.email,name:o.name,orgName:o.orgName,uid:r.user.uid}),yield(0,u.BN)((0,u.H9)(a.firestore,"teams",`${o.orgName}`),{name:o.orgName,members:[r.user.uid]}),r):null}catch{return null}})()}loginUser(o){var a=this;return(0,n.A)(function*(){try{var r;const c=yield(0,i.x9)(a.auth,o.email,o.password);if(null!==(r=c.user)&&void 0!==r&&r.uid){const O=yield(0,u.x7)((0,u.H9)(a.firestore,"users",c.user.uid));if(O.exists())return localStorage.setItem("user",JSON.stringify(O.data())),c}}catch(c){console.error(c)}return null})()}logoutUser(){var o=this;return(0,n.A)(function*(){yield o.auth.signOut()})()}addMember(o){var a=this;return(0,n.A)(function*(){try{const r=yield(0,i.eJ)(a.auth,o.email,o.password);if(!r.user)return!1;const c={email:o.email,name:o.name,orgName:o.orgName,uid:r.user.uid};return yield(0,u.BN)((0,u.H9)(a.firestore,"users",r.user.uid),c),c}catch{return!1}})()}}return(d=_).\u0275fac=function(o){return new(o||d)(f.KVO(i.Nj),f.KVO(u._7))},d.\u0275prov=f.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),_})()},4970:(K,P,s)=>{s.d(P,{s:()=>J});var n=s(467),i=s(4262);class u{static toArtilleryData(t){return function o(e,t){return h(e,t,d)}(JSON.parse(t),p("ArtilleryData"))}static artilleryDataToJson(t){return JSON.stringify(function a(e,t){return h(e,t,_)}(t,p("ArtilleryData")),null,2)}}function f(e,t,D,j=""){const A=m(e);throw Error(`Invalid value${D?` for key "${D}"`:""}${j?` on ${j}`:""}. Expected ${A} but got ${JSON.stringify(t)}`)}function m(e){return Array.isArray(e)?2===e.length&&void 0===e[0]?`an optional ${m(e[1])}`:`one of [${e.map(t=>m(t)).join(", ")}]`:"object"==typeof e&&void 0!==e.literal?e.literal:typeof e}function d(e){if(void 0===e.jsonToJS){const t={};e.props.forEach(D=>t[D.json]={key:D.js,typ:D.typ}),e.jsonToJS=t}return e.jsonToJS}function _(e){if(void 0===e.jsToJSON){const t={};e.props.forEach(D=>t[D.js]={key:D.json,typ:D.typ}),e.jsToJSON=t}return e.jsToJSON}function h(e,t,D,j="",A=""){if("any"===t)return e;if(null===t)return null===e?e:f(t,e,j,A);if(!1===t)return f(t,e,j,A);let S;for(;"object"==typeof t&&void 0!==t.ref;)S=t.ref,t=M[t.ref];return Array.isArray(t)?function B(l,v){return-1!==l.indexOf(v)?v:f(l.map(b=>r(b)),v,j,A)}(t,e):"object"==typeof t?t.hasOwnProperty("unionMembers")?function U(l,v){const b=l.length;for(let R=0;R<b;R++){const N=l[R];try{return h(v,N,D)}catch{}}return f(l,v,j,A)}(t.unionMembers,e):t.hasOwnProperty("arrayItems")?function H(l,v){return Array.isArray(v)?v.map(b=>h(b,l,D)):f(r("array"),v,j,A)}(t.arrayItems,e):t.hasOwnProperty("props")?function E(l,v,b){if(null===b||"object"!=typeof b||Array.isArray(b))return f(r(S||"object"),b,j,A);const R={};return Object.getOwnPropertyNames(l).forEach(N=>{const x=l[N],$=Object.prototype.hasOwnProperty.call(b,N)?b[N]:void 0;R[x.key]=void 0!==$?h($,x.typ,D,N,S):void 0}),Object.getOwnPropertyNames(b).forEach(N=>{Object.prototype.hasOwnProperty.call(l,N)||(R[N]=h(b[N],v,D,N,S))}),R}(D(t),t.additional,e):f(t,e,j,A):t===Date&&"number"!=typeof e?function C(l){if(null===l)return null;const v=new Date(l);return isNaN(v.valueOf())?f(r("Date"),l,j,A):v}(e):function I(l,v){return typeof l==typeof v?v:f(l,v,j,A)}(t,e)}function r(e){return{literal:e}}function y(e,t){return{props:e,additional:t}}function g(e){return{props:[],additional:e}}function p(e){return{ref:e}}const M={ArtilleryData:y([{json:"aggregate",js:"aggregate",typ:p("Aggregate")},{json:"intermediate",js:"intermediate",typ:function c(e){return{arrayItems:e}}(p("Intermediate"))},{json:"date",js:"date",typ:""}],!1),Aggregate:y([{json:"counters",js:"counters",typ:g(0)},{json:"rates",js:"rates",typ:p("Rates")},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:0},{json:"summaries",js:"summaries",typ:p("Histograms")},{json:"histograms",js:"histograms",typ:p("Histograms")}],!1),Histograms:y([{json:"http.response_time",js:"http.response_time",typ:g(3.14)},{json:"plugins.metrics-by-endpoint.response_time./",js:"plugins.metrics-by-endpoint.response_time./",typ:g(3.14)},{json:"vusers.session_length",js:"vusers.session_length",typ:function O(...e){return{unionMembers:e}}(void 0,g(3.14))}],!1),Rates:y([{json:"http.request_rate",js:"http.request_rate",typ:0}],!1),Intermediate:y([{json:"counters",js:"counters",typ:g(0)},{json:"rates",js:"rates",typ:p("Rates")},{json:"http.request_rate",js:"http.request_rate",typ:null},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:""},{json:"summaries",js:"summaries",typ:p("Histograms")},{json:"histograms",js:"histograms",typ:p("Histograms")}],!1)};var T=s(4438),W=s(1626),L=s(7473);let J=(()=>{var e;class t{constructor(j,A,I){this.firestore=j,this.http=A,this.notificationService=I,this.url="https://devprobeapi.onrender.com/create_load_test"}getLoadTestHistory(j,A,I){var U=this;return(0,n.A)(function*(){const B=(0,i.H9)(U.firestore,"teams",j,"products",A,"load_test",I),H=yield(0,i.x7)(B);if(H.exists()){let C=H.data();console.log(C);let E=Object.keys(C);console.log(E);for(let S of E)C[S]=u.toArtilleryData(C[S]);return C}return{}})()}sendLoadTest(j,A,I,U,B){var H=this;return(0,n.A)(function*(){try{const C=yield H.notificationService.getNotificationUser(B),E={team:j,product:A,service:I,target:`https://${U}`,sid:C};return yield H.http.post(H.url,E).toPromise()}catch{return{}}})()}getLoadTestHistoryByDate(j,A,I,U){var B=this;return(0,n.A)(function*(){const H=(0,i.H9)(B.firestore,"teams",j,"products",A,"load_test",I),C=yield(0,i.x7)(H);if(C.exists()){let E=C.data();console.log(E);let S=Object.keys(E);console.log(S);for(let l of S)E[l]=u.toArtilleryData(E[l]),E[l].date.split("-")[0]+"-"+E[l].date.split("-")[1]+"-"+E[l].date.split("-")[2]!==U&&delete E[l];return console.log("Filtered by Date: ",E),E}return{}})()}}return(e=t).\u0275fac=function(j){return new(j||e)(T.KVO(i._7),T.KVO(W.Qq),T.KVO(L.J))},e.\u0275prov=T.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),t})()},7473:(K,P,s)=>{s.d(P,{J:()=>d});var n=s(467),i=s(4262),u=s(4438),f=s(1626),m=s(5092);let d=(()=>{var _;class h{constructor(a,r,c){this.firestore=a,this.http=r,this.teamService=c}saveNotificationID(a,r){var c=this;return(0,n.A)(function*(){const O=(0,i.H9)(c.firestore,"users",a.uid),y=yield(0,i.x7)(O);if(y.exists()){const g=y.data();return g.notificationID=r,yield(0,i.BN)(O,g),!0}return console.log("No such document!"),!1})()}getNotificationUser(a){var r=this;return(0,n.A)(function*(){const c=(0,i.H9)(r.firestore,"users",a.uid),O=yield(0,i.x7)(c);if(O.exists()){const y=O.data();return y.notificationID?y.notificationID:""}return console.log("No such document!"),null})()}notifyIncidentToUser(a,r){var c=this;return(0,n.A)(function*(){try{const O=yield c.teamService.getTeamByOrganization(r),y=a.map(M=>M.member),g=O.filter(M=>y.includes(M.name));console.log("team",g);const p="https://devprobeapi.onrender.com/sendNotification";for(let M of g){let T=yield c.getNotificationUser(M);if(console.log("sid",T),""!==T){const L={sid:T,title:"New Incident",type:"new_incident",message:`Hey ${M.name}, you have been assigned a new incident your incident role is ${a.find(J=>J.member===M.name).role}`,target:"https://devprobe-89481.web.app/incident-manager-chooser"};yield c.http.post(p,L).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(O){console.log(O)}})()}notifyIncidentUpdateToTeam(a,r){var c=this;return(0,n.A)(function*(){try{const O=yield c.teamService.getTeamByOrganization(r),y=a.map(M=>M.member),g=O.filter(M=>y.includes(M.name));console.log("team",g);const p="https://devprobeapi.onrender.com/sendNotification";for(let M of g){let T=yield c.getNotificationUser(M);if(console.log("sid",T),""!==T){const L={sid:T,title:"Incident Update",type:"update_incident",message:`Hey ${M.name}, there are updates to your incident`,target:"https://devprobe-89481.web.app/incident-manager-chooser"};yield c.http.post(p,L).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(O){console.log(O)}})()}}return(_=h).\u0275fac=function(a){return new(a||_)(u.KVO(i._7),u.KVO(f.Qq),u.KVO(m.O))},_.\u0275prov=u.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),h})()},5092:(K,P,s)=>{s.d(P,{O:()=>m});var n=s(467),i=s(4262),u=s(4438),f=s(4796);let m=(()=>{var d;class _{constructor(o,a){this.firestore=o,this.authService=a}getTeamByOrganization(o){var a=this;return(0,n.A)(function*(){let r=(0,i.H9)(a.firestore,"teams",o);const y=(yield(0,i.x7)(r)).data();let g=[];for(let p=0;p<y.members.length;p++){r=(0,i.H9)(a.firestore,"users",y.members[p]);const T=(yield(0,i.x7)(r)).data();g.push(T)}return g})()}removeMember(o,a){var r=this;return(0,n.A)(function*(){try{let c=(0,i.H9)(r.firestore,"teams",o);const g=(yield(0,i.x7)(c)).data();let p=g.members.filter(T=>T!==a);return yield(0,i.BN)(c,{name:g.name,members:p}),c=(0,i.H9)(r.firestore,"users",a),yield(0,i.BN)(c,{}),yield r.authService,!0}catch{return!1}})()}addMember(o){var a=this;return(0,n.A)(function*(){try{const r=yield a.authService.addMember(o);if(!r)return!1;const c=(0,i.H9)(a.firestore,"teams",o.orgName),y=(yield(0,i.x7)(c)).data();console.log(y);const g=y;let p=g.members;return p.push(r.uid),console.log(p),yield(0,i.mZ)(c,{name:g.name,members:p}),r.uid}catch{return!1}})()}}return(d=_).\u0275fac=function(o){return new(o||d)(u.KVO(i._7),u.KVO(f.u))},d.\u0275prov=u.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),_})()}}]);