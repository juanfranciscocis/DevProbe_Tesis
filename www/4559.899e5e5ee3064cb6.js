"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4559],{5553:(k,C,c)=>{c.d(C,{h:()=>_});var u=c(177),R=c(7863),d=c(4438);let _=(()=>{var p;class e{}return(p=e).\u0275fac=function(b){return new(b||p)},p.\u0275mod=d.$C({type:p}),p.\u0275inj=d.G2t({imports:[u.MD,R.bv]}),e})()},3241:(k,C,c)=>{c.d(C,{p:()=>_});var u=c(4438),R=c(177),d=c(7863);let _=(()=>{var p;class e{constructor(b){this.location=b,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(p=e).\u0275fac=function(b){return new(b||p)(u.rXU(R.aZ))},p.\u0275cmp=u.VBU({type:p,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(b,O){1&b&&(u.j41(0,"ion-header",0)(1,"ion-toolbar"),u.nrm(2,"ion-menu-button",1),u.j41(3,"ion-icon",2),u.bIt("click",function(){return O.goBack()}),u.k0s(),u.j41(4,"ion-title"),u.EFF(5),u.k0s()()()),2&b&&(u.Y8G("translucent",!0),u.R7$(5),u.JRh(O.title))},dependencies:[d.eU,d.iq,d.MC,d.BC,d.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},8453:(k,C,c)=>{c.d(C,{W:()=>d});var u=c(4438),R=c(7863);let d=(()=>{var _;class p{constructor(){this.title="Title"}ngOnInit(){}}return(_=p).\u0275fac=function(j){return new(j||_)},_.\u0275cmp=u.VBU({type:_,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(j,b){1&j&&(u.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),u.EFF(3),u.k0s()()()),2&j&&(u.R7$(3),u.JRh(b.title))},dependencies:[R.hU,R.ln]}),p})()},4559:(k,C,c)=>{c.r(C),c.d(C,{LoadTestPageModule:()=>G});var u=c(177),R=c(4341),d=c(7863),_=c(7650),p=c(467),e=c(4438),j=c(9032),b=c(4970),O=c(8453),M=c(3241),L=c(2820),P=c(9549);const E=["messagesContainer"];function A(l,T){if(1&l){const g=e.RV6();e.j41(0,"ion-item",38),e.bIt("click",function(){const t=e.eBV(g).$implicit,n=e.XpG();return e.Njj(n.viewHistory(t))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s(),e.nrm(3,"ion-icon",39),e.k0s()}if(2&l){const g=T.$implicit;e.R7$(2),e.JRh(g)}}function F(l,T){if(1&l){const g=e.RV6();e.j41(0,"ion-fab",40),e.bIt("click",function(){e.eBV(g);const t=e.XpG();return e.Njj(t.toggleAiModal())}),e.j41(1,"ion-avatar",41),e.nrm(2,"ion-icon",42),e.k0s()()}}function I(l,T){if(1&l&&(e.j41(0,"div",46)(1,"markdown",47),e.EFF(2),e.k0s()()),2&l){const g=e.XpG().$implicit;e.R7$(2),e.JRh(g.message)}}function D(l,T){if(1&l&&(e.j41(0,"div",48)(1,"markdown",49),e.EFF(2),e.k0s()()),2&l){const g=e.XpG().$implicit;e.R7$(),e.Mz_("id","mk-",g.id,""),e.R7$(),e.JRh(g.message)}}function N(l,T){if(1&l&&(e.j41(0,"div",43),e.DNE(1,I,3,1,"div",44)(2,D,3,3,"div",45),e.k0s()),2&l){const g=T.$implicit;e.R7$(),e.Y8G("ngIf","User"===g.from),e.R7$(),e.Y8G("ngIf","AI"===g.from)}}const S=[{path:"",component:(()=>{var l;class T{constructor(o,t,n,i,s){this.router=o,this.activatedRoute=t,this.loadTestService=n,this.loadingCtrl=i,this.alertCtrl=s,this.productStep="",this.productObjective="",this.orgName="",this.target="",this.description="",this.loadTestResults={},this.totalNumberOfRequests=0,this.statusCodesOptions={tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]},this.responseTimeOptions={tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]},this.listOfDates=[],this.aiModal=!1,this.message="",this.vertexAI=(0,e.WQX)(j.L9),this.model=(0,j.oc)(this.vertexAI,{model:"gemini-1.5-flash"}),this.chat=this.model.startChat({history:[{role:"user",parts:[{text:"Hola, desde ahora en adelante quiero que seas un modelo experto en Software Quality Assurance y analista de datos, tu nombre es DevProbeAI, nunca lo puedes olvidar"}]},{role:"model",parts:[{text:"Soy un modelo experto en Software Quality Assurance, de igual forma tengo un masterado en anla\xedtica de datos \xbfEn qu\xe9 puedo ayudarte?"}]},{role:"user",parts:[{text:"Gracias, te voy a entregar un json con datos en unos minutos, necesito que lo analices y me des un resumen de los datos, este json contiene datos de un load test,tu analisis tiene que ser detallado, si encuentras inconsistencias en los datos, por favor mencionalas, en caso de que creas que puede haber un problema o que se encuentre el recurso no disponible por favor mencionalo, si encuentras algo interesante, por favor mencionalo, en resumen, necesito un analisis detallado de los datos"}]},{role:"model",parts:[{text:"Claro, env\xedame el json y yo me encargo de analizarlo"}]}]}),this.messages=[],this.hasBeenOpened=!1}ngOnInit(){}ionViewWillEnter(){var o=this;return(0,p.A)(function*(){yield o.showLoading(),o.getParams(),yield o.getHistoryResults().then(()=>{o.plotCodes(),o.totalRequests(),o.responseTime()}),yield o.hideLoading()})()}getParams(){this.activatedRoute.params.subscribe(t=>{this.productObjective=t.productObjective,this.productStep=t.step});const o=JSON.parse(localStorage.getItem("user"));this.orgName=o.orgName,console.log(this.orgName),console.log(this.productObjective),console.log(this.productStep)}sendRequest(){var o=this;return(0,p.A)(function*(){if(yield o.showLoading(),o.target.startsWith("http://")||o.target.startsWith("https://")||o.target.endsWith("/"))return yield o.hideLoading(),void(yield o.showAlert("No http or https is needed, check for slashes at the end of the domain","Please enter a valid host"));yield o.loadTestService.sendLoadTest(o.orgName,o.productObjective,o.productStep,o.target).then(function(){var t=(0,p.A)(function*(n){yield o.hideLoading(),console.log("data",n),n&&(yield o.showAlert("Test sent, please wait a few seconds to GET RESULTS","Success"))});return function(n){return t.apply(this,arguments)}}()),yield o.hideLoading()})()}getHistoryResults(){var o=this;return(0,p.A)(function*(){o.loadTestResults=yield o.loadTestService.getLoadTestHistory(o.orgName,o.productObjective,o.productStep)})()}totalRequests(){let o=Object.keys(this.loadTestResults),t={},n=0;for(let i of o){let s=this.loadTestResults[i].aggregate.counters,v=this.loadTestResults[i].date,m=Object.keys(s).filter(y=>y.startsWith("http.responses"));for(let y of m)t[v]||(t[v]={}),t[v][y]=(t[v][y]||0)+s[y]}for(let i of Object.keys(t))n+=t[i]["http.responses"];this.totalNumberOfRequests=n}byCodes(){let o=Object.keys(this.loadTestResults),t={};for(let n of o){let i=this.loadTestResults[n].aggregate.counters,s=this.loadTestResults[n].date.split("-").slice(0,3).join("-"),v=Object.keys(i).filter(m=>m.startsWith("http.codes."));t[s]||(t[s]={});for(let m of v)t[s][m]=(t[s][m]||0)+i[m]}return t=this.ordenarDiccionarioPorFechas(t),console.log("codessss",t),t}normalizarFecha(o){const[t,n,i]=o.split("-").map(m=>parseInt(m,10));return`${t}-${n<10?`0${n}`:n.toString()}-${i<10?`0${i}`:i.toString()}`}ordenarDiccionarioPorFechas(o){const n=Object.keys(o).sort((s,v)=>{const m=new Date(this.normalizarFecha(s)),y=new Date(this.normalizarFecha(v));return m.getTime()-y.getTime()}),i={};return n.forEach(s=>{i[s]=o[s]}),i}plotCodes(){var o=this;return(0,p.A)(function*(){let t=o.byCodes();console.log(t);let n=Object.keys(t);o.listOfDates=n;let i=new Set;for(let y of n){let a=Object.keys(t[y]);for(let r of a)i.add(r)}let s={};for(let y in t){let h=t[y];for(let a of i)s[a]||(s[a]=[]),s[a].push(h[a]||0)}let v=["#36b311","#306fc6","#ed3b3b","#f4ba20"];for(let y in s){let a,h=y.split(".").pop();null!=h&&h.startsWith("2")&&(a=v[0]),null!=h&&h.startsWith("3")&&(a=v[1]),null!=h&&h.startsWith("4")&&(a=v[2]),null!=h&&h.startsWith("5")&&(a=v[3]),a||(a="#000000"),o.statusCodesOptions.series.push({name:y,type:"line",data:s[y],lineStyle:{color:a},itemStyle:{color:a}})}o.statusCodesOptions.xAxis={type:"category",boundaryGap:!1,data:n},o.statusCodesOptions={...o.statusCodesOptions};let m=document.getElementById("httpCodesChart");console.log(m),m.style.width="100%",m.style.height="25em"})()}responseTime(){let o=Object.keys(this.loadTestResults),t={};for(let a of o){let r=this.loadTestResults[a].aggregate.histograms,x=this.loadTestResults[a].date,f=Object.keys(r).filter(w=>w.startsWith("http.response_time"));for(let w of f)t[x]=r[w]}let n=Object.entries(t).reduce((a,[r,x])=>{const f=r.split("-").slice(0,3).join("-");return a[f]=a[f]||[],a[f].push(x),a},{}),i=Object.keys(n).sort((a,r)=>new Date(a).getTime()-new Date(r).getTime()),s={count:0,max:0,min:0,mean:0,median:0,p50:0,p90:0,p95:0,p99:0,p999:0},v={};i.forEach(a=>{let r={count:0,max:0,min:0,mean:0,median:0,p50:0,p90:0,p95:0,p99:0,p999:0},x=0;n[a].forEach(f=>{r.count+=f.count,r.max+=f.max,r.min+=f.min,r.mean+=f.mean,r.median+=f.median,r.p50+=f.p50,r.p90+=f.p90,r.p95+=f.p95,r.p99+=f.p99,r.p999+=f.p999,x++});for(let f in r)"count"!==f&&x>0&&(r[f]=r[f]/x);v[a]=r,s.count+=r.count,s.max+=r.max,s.min+=r.min,s.mean+=r.mean,s.median+=r.median,s.p50+=r.p50,s.p90+=r.p90,s.p95+=r.p95,s.p99+=r.p99,s.p999+=r.p999});let m=i.length;m>0&&(s.mean/=m,s.median/=m,s.p50/=m,s.p90/=m,s.p95/=m,s.p99/=m,s.p999/=m,s.max/=m,s.min/=m);let y={};for(let a in s)"count"===a||"p90"===a||"p50"===a||"p999"===a||(y[a]=s[a],this.responseTimeOptions.series.push({name:a,type:"bar",data:[s[a]],label:{show:!0,formatter:r=>`${r.value.toFixed(2)} ms`}}));this.responseTimeOptions.xAxis={type:"category",boundaryGap:!1,data:["Category"]},this.responseTimeOptions={...this.responseTimeOptions};let h=document.getElementById("httpResponseTimeChart");return console.log(h),h.style.width="100%",h.style.height="25em",y}showLoading(){var o=this;return(0,p.A)(function*(){yield(yield o.loadingCtrl.create({})).present()})()}hideLoading(){var o=this;return(0,p.A)(function*(){yield o.loadingCtrl.dismiss()})()}showAlert(o,t){var n=this;return(0,p.A)(function*(){const i=yield n.alertCtrl.create({header:t,message:o,buttons:["OK"]});return yield i.present(),yield i.onDidDismiss(),!0})()}viewHistory(o){this.router.navigate(["/load-test-history",{productObjective:this.productObjective,productStep:this.productStep,day:o}])}toggleAiModal(o){var t=this;return(0,p.A)(function*(){if(yield t.showLoading(),t.aiModal=!t.aiModal,t.hasBeenOpened=!0,"httpCodesOptions"===o&&(t.message="En este caso el json tiene codigos de respuesta HTTP, por ejemplo, 404, 500, etc y cuantos requests devolvieron esos codigos:"+JSON.stringify(t.byCodes())),"httpResponseTimeOptions"===o&&(t.message="En este caso el json tiene tiempos de respuesta de los requests, por ejemplo, 500ms, 1000ms, etc: "+JSON.stringify(t.responseTime())),""===t.message)return console.log("Message is empty"),void(yield t.hideLoading());let n=t.messages.length;n>0&&t.messages.push({message:t.message,from:"User",id:n.toString()});const i=yield t.chat.sendMessage(t.message);n=t.messages.length,t.messages.push({message:i.response.text(),from:"AI",id:n.toString()}),t.message="",yield t.hideLoading()})()}sendMessage(){var o=this;let t=this.messages.length;this.messages.push({message:this.message,from:"User",id:t.toString()}),this.chat.sendMessage(this.message).then(function(){var n=(0,p.A)(function*(i){yield o.showLoading(),t=o.messages.length,o.messages.push({message:i.response.text(),from:"AI",id:t.toString()}),yield o.hideLoading()});return function(i){return n.apply(this,arguments)}}()),this.message=""}}return(l=T).\u0275fac=function(o){return new(o||l)(e.rXU(_.Ix),e.rXU(_.nX),e.rXU(b.s),e.rXU(d.Xi),e.rXU(d.hG))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-load-test"]],viewQuery:function(o,t){if(1&o&&e.GBs(E,5),2&o){let n;e.mGM(n=e.lsd())&&(t.messagesContainer=n.first)}},decls:71,vars:18,consts:[["messagesContainer",""],[3,"title"],[3,"fullscreen"],[1,"lg:m-10","md:m-10"],["size","12"],["label","Target","placeholder","Enter a target","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end"],["color","primary","size","small",1,"",3,"click"],["name","add"],[1,"w-full","flex","flex-col","justify-center","items-center"],[1,"text-3xl"],[1,"text-2xl","text-white"],["size","12",1,"relative","flex","flex-row","justify-center"],[1,"absolute","z-10","w-full","flex","flex-row","justify-end"],[1,"h-12","w-12","bg-purple-400","p-2",3,"click"],["name","color-wand-outline",1,"w-full","h-full"],[1,"w-full","p-6","flex","flex-col","justify-center","items-center"],[1,"h-[25em]","w-full"],["id","httpCodesChart","echarts","",1,"demo-chart","h-full","w-full",3,"options"],["id","httpResponseTimeChart","echarts","",1,"demo-chart","h-full","w-full",3,"options"],["size","12",1,"w-full"],[1,"w-full"],["class","w-full",3,"click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",1,"m-2","z-10"],["id","ai-modal",1,"fixed","bottom-0","right-0","h-full","w-full","bg-black","bg-opacity-60","z-10","r"],[1,"h-full","md:h-3/4","lg:h-3/4","w-full","bg-gray-900","p-4","absolute","right-0","bottom-0","z-50","flex","flex-col","rounded-tl-2xl","rounded-tr-2xl"],[1,"w-full","bg-gray-500","flex","flex-row","justify-center","items-center","p-2","mb-2","rounded-3xl"],[1,"flex","flex-row","p-2","items-center","bg-gray-800","w-full","rounded-3xl","h-full"],[1,"text-white"],[1,"m-2"],[1,"flex","flex-row","justify-center","items-center","bg-gray-800","hover:bg-gray-600","w-1/6","h-full","rounded-3xl",3,"click"],["name","close-outline"],[1,"flex-grow","overflow-y-auto","bg-gray-400","p-2","rounded-3xl"],["class","flex flex-col",4,"ngFor","ngForOf"],[1,"flex","flex-row","mt-2","p-2"],["placeholder","Ask...",1,"flex-grow","bg-gray-700","rounded-2xl",3,"ngModelChange","ngModel"],[1,"m-1"],[1,"w-1/3","bg-gray-500","rounded-3xl","flex","flex-row","justify-center","items-center","hover:bg-gray-300",3,"click"],[1,"w-full",3,"click"],["name","arrow-forward","color","primary"],["vertical","bottom","horizontal","end","slot","fixed",1,"m-2","z-10",3,"click"],[1,"bg-purple-300","p-1","lg:p-4","md:p-4"],["name","chatbubble-outline",1,"w-full","h-full"],[1,"flex","flex-col"],["class","rounded-3xl bg-gray-800 w-2/3 m-1 ml-auto p-2",4,"ngIf"],["class","rounded-3xl bg-gray-500 w-2/3 m-1 p-2 pr-2",4,"ngIf"],[1,"rounded-3xl","bg-gray-800","w-2/3","m-1","ml-auto","p-2"],[1,"text-white","p-4","m-2"],[1,"rounded-3xl","bg-gray-500","w-2/3","m-1","p-2","pr-2"],[1,"text-white","p-4","m-2",3,"id"]],template:function(o,t){if(1&o){const n=e.RV6();e.nrm(0,"app-header-return",1),e.j41(1,"ion-content",2)(2,"ion-grid"),e.nrm(3,"app-title",1),e.j41(4,"ion-row",3)(5,"ion-col",4)(6,"ion-card")(7,"ion-card-content")(8,"ion-input",5),e.mxI("ngModelChange",function(s){return e.eBV(n),e.DH7(t.target,s)||(t.target=s),e.Njj(s)}),e.k0s()()()()(),e.j41(9,"ion-row",3)(10,"ion-col",6)(11,"ion-button",7),e.bIt("click",function(){return e.eBV(n),e.Njj(t.sendRequest())}),e.EFF(12,"Load Target "),e.nrm(13,"ion-icon",8),e.k0s()()(),e.nrm(14,"app-title",1),e.j41(15,"ion-row",3)(16,"ion-col",6)(17,"ion-card",9)(18,"ion-card-header")(19,"ion-card-title",10),e.EFF(20,"Total Number of Requests"),e.k0s()(),e.j41(21,"ion-card-content")(22,"h1",11),e.EFF(23),e.nI1(24,"number"),e.k0s()()()()(),e.j41(25,"ion-row",3)(26,"ion-col",12)(27,"div",13)(28,"ion-avatar",14),e.bIt("click",function(){return e.eBV(n),e.Njj(t.toggleAiModal("httpCodesOptions"))}),e.nrm(29,"ion-icon",15),e.k0s()(),e.j41(30,"ion-card",16)(31,"ion-card-header")(32,"ion-card-title",10),e.EFF(33,"HTTP Status Codes"),e.k0s()(),e.j41(34,"ion-card-content",17),e.nrm(35,"div",18),e.k0s()()()(),e.j41(36,"ion-row",3)(37,"ion-col",12)(38,"div",13)(39,"ion-avatar",14),e.bIt("click",function(){return e.eBV(n),e.Njj(t.toggleAiModal("httpResponseTimeOptions"))}),e.nrm(40,"ion-icon",15),e.k0s()(),e.j41(41,"ion-card",16)(42,"ion-card-header")(43,"ion-card-title",10),e.EFF(44,"HTTP Response Time"),e.k0s()(),e.j41(45,"ion-card-content",17),e.nrm(46,"div",19),e.k0s()()()(),e.nrm(47,"app-title",1),e.j41(48,"ion-row",3)(49,"ion-col",20)(50,"ion-list",21),e.DNE(51,A,4,1,"ion-item",22),e.k0s()()()(),e.DNE(52,F,3,0,"ion-fab",23),e.k0s(),e.j41(53,"div",24)(54,"div",25)(55,"div",26)(56,"div",27)(57,"h1",28),e.EFF(58,"DevProbe AI"),e.k0s()(),e.nrm(59,"div",29),e.j41(60,"div",30),e.bIt("click",function(){return e.eBV(n),e.Njj(t.toggleAiModal())}),e.nrm(61,"ion-icon",31),e.k0s()(),e.j41(62,"div",32,0),e.DNE(64,N,3,2,"div",33),e.k0s(),e.j41(65,"div",34)(66,"ion-textarea",35),e.mxI("ngModelChange",function(s){return e.eBV(n),e.DH7(t.message,s)||(t.message=s),e.Njj(s)}),e.k0s(),e.nrm(67,"div",36),e.j41(68,"div",37),e.bIt("click",function(){return e.eBV(n),e.Njj(t.sendMessage())}),e.j41(69,"span",28),e.EFF(70,"Send"),e.k0s()()()()()}2&o&&(e.Y8G("title","Load Test  For "+t.productStep),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","New Load Test"),e.R7$(5),e.R50("ngModel",t.target),e.R7$(6),e.Y8G("title","Analytics For "+t.productStep),e.R7$(9),e.JRh(e.i5U(24,15,t.totalNumberOfRequests,"1.0-0")),e.R7$(12),e.Y8G("options",t.statusCodesOptions),e.R7$(11),e.Y8G("options",t.responseTimeOptions),e.R7$(),e.Y8G("title","Results for date: "),e.R7$(4),e.Y8G("ngForOf",t.listOfDates),e.R7$(),e.vxM(52,t.hasBeenOpened?52:-1),e.R7$(),e.AVh("hidden",!t.aiModal),e.R7$(11),e.Y8G("ngForOf",t.messages),e.R7$(2),e.R50("ngModel",t.message))},dependencies:[u.Sq,u.bT,R.BC,R.vS,d.mC,d.Jm,d.b_,d.I9,d.ME,d.tN,d.hU,d.W9,d.Q8,d.lO,d.iq,d.$w,d.uz,d.he,d.nf,d.ln,d.nc,d.Gw,O.W,M.p,L.$P,P.NN,u.QX]}),T})()}];let $=(()=>{var l;class T{}return(l=T).\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=e.G2t({imports:[_.iI.forChild(S),_.iI]}),T})();var B=c(5553);let G=(()=>{var l;class T{}return(l=T).\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=e.G2t({imports:[u.MD,R.YN,d.bv,$,B.h,P.NN]}),T})()}}]);