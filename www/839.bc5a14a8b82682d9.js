"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[839],{839:(S,y,s)=>{s.r(y),s.d(y,{MyteamPageModule:()=>j});var v=s(177),M=s(4341),l=s(7863),b=s(305),c=s(467),e=s(4438),o=s(4262),P=s(4796);let w=(()=>{var a;class i{constructor(t,r){this.firestore=t,this.authService=r}getTeamByOrganization(t){var r=this;return(0,c.A)(function*(){let n=(0,o.H9)(r.firestore,"teams",t);const h=(yield(0,o.x7)(n)).data();let g=[];for(let u=0;u<h.members.length;u++){n=(0,o.H9)(r.firestore,"users",h.members[u]);const f=(yield(0,o.x7)(n)).data();g.push(f)}return g})()}removeMember(t,r){var n=this;return(0,c.A)(function*(){try{let m=(0,o.H9)(n.firestore,"teams",t);const g=(yield(0,o.x7)(m)).data();let u=g.members.filter(f=>f!==r);return yield(0,o.BN)(m,{name:g.name,members:u}),m=(0,o.H9)(n.firestore,"users",r),yield(0,o.BN)(m,{}),yield n.authService,!0}catch{return!1}})()}addMember(t){var r=this;return(0,c.A)(function*(){try{const n=yield r.authService.addMember(t);if(!n)return!1;const m=(0,o.H9)(r.firestore,"teams",t.orgName),h=(yield(0,o.x7)(m)).data();console.log(h);const g=h;let u=g.members;return u.push(n.uid),console.log(u),yield(0,o.mZ)(m,{name:g.name,members:u}),n.uid}catch{return!1}})()}}return(a=i).\u0275fac=function(t){return new(t||a)(e.KVO(o._7),e.KVO(P.u))},a.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),i})();var T=s(385),N=s(8453);function C(a,i){if(1&a){const d=e.RV6();e.j41(0,"ion-col",3)(1,"div",12)(2,"ion-card-header")(3,"h1",13),e.EFF(4),e.k0s()(),e.j41(5,"ion-card-content",14)(6,"ion-button",15),e.bIt("click",function(){const r=e.eBV(d).$implicit,n=e.XpG();return e.Njj(n.removeMember(r.uid))}),e.EFF(7,"Remove"),e.k0s()()()()}if(2&a){const d=i.$implicit;e.R7$(4),e.JRh(d.name)}}const R=[{path:"",component:(()=>{var a;class i{constructor(t,r,n){this.teamsService=t,this.loadingCtrl=r,this.alertCtrl=n,this.members=[],this.orgName="",this.teamMemberName="",this.teamMemberEmail="",this.teamMemberPassword=""}ngOnInit(){var t=this;return(0,c.A)(function*(){yield t.getTeam()})()}getTeam(){var t=this;return(0,c.A)(function*(){yield t.showLoading();const r=localStorage.getItem("user");if(!r)return;const n=JSON.parse(r),m=yield t.teamsService.getTeamByOrganization(n.orgName);t.orgName=n.orgName,m&&(t.members=m),yield t.hideLoading()})()}removeMember(t){var r=this;return(0,c.A)(function*(){yield r.showLoading(),(yield r.teamsService.removeMember(r.orgName,t))?r.members=r.members.filter(m=>m.uid!==t):yield r.showAlert("There was an error removing the member"),yield r.hideLoading()})()}addMember(){var t=this;return(0,c.A)(function*(){yield t.showLoading();const r={name:t.teamMemberName,email:t.teamMemberEmail,password:t.teamMemberPassword,orgName:t.orgName};if(!r.name||!r.email||!r.password)return yield t.hideLoading(),void(yield t.showAlert("Please fill all the fields"));const n=yield t.teamsService.addMember(r);"string"==typeof n?(r.uid=n,t.members.push(r),t.teamMemberName="",t.teamMemberEmail="",t.teamMemberPassword=""):yield t.showAlert("There was an error adding the member"),yield t.hideLoading()})()}showAlert(t){var r=this;return(0,c.A)(function*(){yield(yield r.alertCtrl.create({header:"Login Failed!",message:t,buttons:["OK"]})).present()})()}showLoading(){var t=this;return(0,c.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,c.A)(function*(){yield t.loadingCtrl.dismiss()})()}}return(a=i).\u0275fac=function(t){return new(t||a)(e.rXU(w),e.rXU(l.Xi),e.rXU(l.hG))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-myteam"]],inputs:{teamMemberName:"teamMemberName",teamMemberEmail:"teamMemberEmail",teamMemberPassword:"teamMemberPassword"},decls:19,vars:7,consts:[[3,"title"],[3,"fullscreen"],[1,"lg:m-10"],["size","6","size-md","4","size-lg","4",1,""],[1,"lg:m-10","md:m-10"],["size","12","size-md","4","size-lg","4",1,""],["label","Team Member Name","placeholder","Enter a name","type","text","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","4","size-lg","4"],["label","Team Member Email","placeholder","Enter an email","type","email","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["label","Team Member Password","placeholder","Enter a password for the account","type","password","labelPlacement","stacked",1,"",3,"ngModelChange","ngModel"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-end"],["color","primary",1,"",3,"click"],[1,"flex","flex-col","h-full","justify-between","bg-gray-600","rounded-2xl"],[1,"text-2xl"],[1,"flex","flex-col"],["color","danger",1,"m-4",3,"click"]],template:function(t,r){1&t&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"ion-grid"),e.nrm(3,"app-title",0),e.j41(4,"ion-row",2),e.Z7z(5,C,8,1,"ion-col",3,e.fX1),e.k0s(),e.nrm(7,"app-title",0),e.j41(8,"ion-row",4)(9,"ion-col",5)(10,"ion-input",6),e.mxI("ngModelChange",function(m){return e.DH7(r.teamMemberName,m)||(r.teamMemberName=m),m}),e.k0s()(),e.j41(11,"ion-col",7)(12,"ion-input",8),e.mxI("ngModelChange",function(m){return e.DH7(r.teamMemberEmail,m)||(r.teamMemberEmail=m),m}),e.k0s()(),e.j41(13,"ion-col",7)(14,"ion-input",9),e.mxI("ngModelChange",function(m){return e.DH7(r.teamMemberPassword,m)||(r.teamMemberPassword=m),m}),e.k0s()()(),e.j41(15,"ion-row",4)(16,"ion-col",10)(17,"ion-button",11),e.bIt("click",function(){return r.addMember()}),e.EFF(18,"Add Member"),e.k0s()()()()()),2&t&&(e.Y8G("title","My Team"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("title","Team Members"),e.R7$(2),e.Dyx(r.members),e.R7$(2),e.Y8G("title","Add Team Member"),e.R7$(3),e.R50("ngModel",r.teamMemberName),e.R7$(2),e.R50("ngModel",r.teamMemberEmail),e.R7$(2),e.R50("ngModel",r.teamMemberPassword))},dependencies:[M.BC,M.vS,l.Jm,l.I9,l.ME,l.hU,l.W9,l.lO,l.$w,l.ln,l.Gw,T.l,N.W]}),i})()}];let A=(()=>{var a;class i{}return(a=i).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[b.iI.forChild(R),b.iI]}),i})();var E=s(5553);let j=(()=>{var a;class i{}return(a=i).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[v.MD,M.YN,l.bv,A,E.h]}),i})()}}]);