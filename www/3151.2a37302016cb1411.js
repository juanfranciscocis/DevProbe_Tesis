"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3151],{5553:(O,v,n)=>{n.d(v,{h:()=>C});var r=n(177),G=n(7863),t=n(4438);let C=(()=>{var s;class e{}return(s=e).\u0275fac=function(p){return new(p||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({imports:[r.MD,G.bv]}),e})()},3241:(O,v,n)=>{n.d(v,{p:()=>C});var r=n(4438),G=n(177),t=n(7863);let C=(()=>{var s;class e{constructor(p){this.location=p,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(s=e).\u0275fac=function(p){return new(p||s)(r.rXU(G.aZ))},s.\u0275cmp=r.VBU({type:s,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(p,R){1&p&&(r.j41(0,"ion-header",0)(1,"ion-toolbar"),r.nrm(2,"ion-menu-button",1),r.j41(3,"ion-icon",2),r.bIt("click",function(){return R.goBack()}),r.k0s(),r.j41(4,"ion-title"),r.EFF(5),r.k0s()()()),2&p&&(r.Y8G("translucent",!0),r.R7$(5),r.JRh(R.title))},dependencies:[t.eU,t.iq,t.MC,t.BC,t.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},3151:(O,v,n)=>{n.r(v),n.d(v,{FlameGraphComparePageModule:()=>k});var r=n(177),G=n(4341),t=n(7863),C=n(4848),s=n(467),e=n(4438),F=n(6560),p=n(8453),R=n(3241),_=n(7616),T=n(2814);function b(a,c){if(1&a&&(e.j41(0,"ion-col",8)(1,"ion-card",9),e.qex(2),e.j41(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),e.EFF(6),e.k0s()(),e.nrm(7,"ngx-flamegraph",10),e.k0s(),e.bVm(),e.k0s()()),2&a){const l=c.$implicit,o=e.XpG(2);e.R7$(6),e.SpI("Data for: ",l,""),e.R7$(),e.Y8G("config",o.configurations[l])}}function $(a,c){if(1&a&&(e.j41(0,"ion-row",3),e.DNE(1,b,8,2,"ion-col",7),e.k0s()),2&a){const l=e.XpG();e.R7$(),e.Y8G("ngForOf",l.datesForComparison)}}function j(a,c){if(1&a&&(e.j41(0,"ion-col",12)(1,"ion-card",9),e.qex(2),e.j41(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),e.EFF(6),e.k0s()(),e.nrm(7,"ngx-flamegraph",10),e.k0s(),e.bVm(),e.k0s()()),2&a){const l=c.$implicit,o=e.XpG(2);e.R7$(6),e.SpI("Data for: ",l,""),e.R7$(),e.Y8G("config",o.configurations[l])}}function A(a,c){if(1&a&&(e.j41(0,"ion-row",3),e.DNE(1,j,8,2,"ion-col",11),e.k0s()),2&a){const l=e.XpG();e.R7$(),e.Y8G("ngForOf",l.datesForComparison)}}const U=[{path:"",component:(()=>{var a;class c{constructor(o,i,g){this.flameGraphService=o,this.loadingCtrl=i,this.route=g,this.product={},this.datesForComparison=[],this.lenDates=0,this.configurations={},this.aiAnalytic="# holaaaa"}ngOnInit(){}ionViewWillEnter(){this.getProductAndDatesFromParams(),this.getFlameGraph()}getFlameGraph(){var o=this;return(0,s.A)(function*(){try{yield o.showLoading();const i=localStorage.getItem("user");if(!i)return;const m=JSON.parse(i).orgName;console.log(m),o.configurations={};for(const u of o.datesForComparison){const h=yield o.flameGraphService.getFlameGraphByDate(m,o.product.productObjective,u);console.log(h);let d=[],f=[];for(let P in h){const D=null==h?void 0:h[P];f=Object.keys(D),console.log("keys",f);const x=100/f.length;for(let M in f){const E=[];for(let y=0;y<D[f[M]].length;y++)E[y]=o.transformToRawData(D[f[M]][y]);console.log("server1",E);const B={label:f[M],value:x,children:[...E]};d.push(B)}console.log("server",d)}d=[{label:"root",value:100,children:d}],o.configurations[u]={data:d}}console.log("Final configurations",o.configurations),yield o.hideLoading()}catch(i){console.log(i),yield o.hideLoading()}})()}getProductAndDatesFromParams(){this.route.queryParams.subscribe(o=>{this.product=JSON.parse(o.product),this.datesForComparison=JSON.parse(o.dates)}),this.lenDates=this.datesForComparison.length,console.log(this.product.productObjective),console.log(this.datesForComparison)}doRefresh(o){}showLoading(){var o=this;return(0,s.A)(function*(){yield(yield o.loadingCtrl.create({})).present()})()}hideLoading(){var o=this;return(0,s.A)(function*(){yield o.loadingCtrl.dismiss()})()}average(o){const i=o.map(Number);return i.reduce((m,u)=>m+u,0)/i.length}transformToRawData(o){const i=o.cpu_usage?this.average(o.cpu_usage):0,g=[];for(const m in o){if("id"===m||"cpu_usage"===m)continue;const u=o[m];if("object"!=typeof u||Array.isArray(u))"object"!=typeof u&&g.push({label:m,value:0,children:[]});else if("sub_services"===m)for(const h in u){const d=u[h],P={label:h,value:d.cpu_usage?this.average(d.cpu_usage):0,children:this.transformToRawData(d).children};g.push(P)}else{const d={label:m,value:u.cpu_usage?this.average(u.cpu_usage):0,children:this.transformToRawData(u).children};g.push(d)}}return{label:o.id,value:i,children:g}}}return(a=c).\u0275fac=function(o){return new(o||a)(e.rXU(F.x),e.rXU(t.Xi),e.rXU(C.nX))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-flame-graph-compare"]],decls:16,vars:6,consts:[[3,"title"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"lg:m-10","md:m-10"],["size","12","size-md","12","size-lg","12",1,"flex","flex-row","justify-center"],[1,"min-w-full"],[1,"text-white"],["size","12","size-md","4","size-lg","4","class","",4,"ngFor","ngForOf"],["size","12","size-md","4","size-lg","4",1,""],[1,"w-full"],[3,"config"],["size","12","size-md","6","size-lg","6","class","",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","6",1,""]],template:function(o,i){1&o&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"ion-refresher",2),e.bIt("ionRefresh",function(m){return i.doRefresh(m)}),e.nrm(3,"ion-refresher-content"),e.k0s(),e.nrm(4,"app-title",0),e.DNE(5,$,2,1,"ion-row",3)(6,A,2,1,"ion-row",3),e.j41(7,"ion-row",3)(8,"ion-col",4)(9,"ion-card",5)(10,"ion-card-header")(11,"ion-card-title"),e.EFF(12,"DevProbe AI Analytic"),e.k0s()(),e.j41(13,"ion-card-content")(14,"markdown",6),e.EFF(15),e.k0s()()()()()()),2&o&&(e.Y8G("title","Compare Flame Graphs"),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(3),e.Y8G("title","Compare Flame Graphs"),e.R7$(),e.vxM(5,i.lenDates>=3?5:-1),e.R7$(),e.vxM(6,i.lenDates<3?6:-1),e.R7$(9),e.JRh(i.aiAnalytic))},dependencies:[r.Sq,t.b_,t.I9,t.ME,t.tN,t.hU,t.W9,t.To,t.Ki,t.ln,p.W,R.p,_.E,T.NN]}),c})()}];let z=(()=>{var a;class c{}return(a=c).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[C.iI.forChild(U),C.iI]}),c})();var N=n(5553);let k=(()=>{var a;class c{}return(a=c).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[r.MD,G.YN,t.bv,z,N.h,_.n,T.NN]}),c})()}}]);