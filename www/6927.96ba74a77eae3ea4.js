"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6927],{6927:(A,h,l)=>{l.r(h),l.d(h,{ViewProductPageModule:()=>k});var P=l(177),v=l(4341),c=l(7863),g=l(305),a=l(467),e=l(4438),y=l(6241),S=l(9640),w=l(3241);function V(o,d){if(1&o){const n=e.RV6();e.j41(0,"ion-item"),e.nrm(1,"ion-input",13),e.j41(2,"ion-icon",14),e.bIt("click",function(){const r=e.eBV(n).$implicit,i=e.XpG();return e.Njj(i.deleteStep(r))}),e.k0s()()}if(2&o){const n=d.$implicit;e.R7$(),e.FS9("value",n)}}function F(o,d){if(1&o&&(e.j41(0,"ion-item"),e.nrm(1,"ion-input",13),e.k0s()),2&o){const n=d.$implicit;e.R7$(),e.FS9("value",n)}}function j(o,d){if(1&o&&(e.j41(0,"ion-item"),e.nrm(1,"ion-input",13),e.k0s()),2&o){const n=d.$implicit;e.R7$(),e.FS9("value",n)}}const O=[{path:"",component:(()=>{var o;class d{constructor(t,r,i,u,p,s){this.route=t,this.productService=r,this.alertCtrl=i,this.loadingCtrl=u,this.router=p,this.ripeService=s,this.product={productObjective:"",productSteps:[],productServices:[],productSLOs:[]},this.orgName="orgName"}ngOnInit(){var t=this;return(0,a.A)(function*(){t.getProductFromParams(),t.getOrgName()})()}getOrgName(){const t=localStorage.getItem("user");if(!t)return;const r=JSON.parse(t);this.orgName=r.orgName}getProductFromParams(){this.route.queryParams.subscribe(t=>{this.product=JSON.parse(t.product)}),console.log(this.product)}upDateFields(){var t=this;return(0,a.A)(function*(){yield t.showLoading();const r=t.inputs.map(m=>m.value),i=t.product.productSteps.length,u=r.slice(0,i),p=r.slice(i,2*i),s=r.slice(2*i,3*i);t.product.productSteps=u,t.product.productServices=p,t.product.productSLOs=s,yield t.productService.addProduct(t.product,t.orgName),yield t.hideLoading(),yield t.showAlert("Product updated successfully")})()}deleteProduct(){var t=this;return(0,a.A)(function*(){yield t.showLoading(),yield t.productService.removeProduct(t.orgName,t.product.productObjective),yield t.hideLoading(),yield t.showAlert("Product deleted successfully"),yield t.router.navigate(["/model-product"])})()}deleteStep(t){var r=this;return(0,a.A)(function*(){yield r.showLoading();const i=r.product.productSteps.indexOf(t);r.product.productSteps.splice(i,1),r.product.productServices.splice(i,1),r.product.productSLOs.splice(i,1),yield r.productService.addProduct(r.product,r.orgName);let u=[];r.ripeService.getHistoryResults(r.orgName,r.product.productObjective).then(p=>{console.log(t);for(let s=0;s<p.length;s++)u.push(p[s].id);for(let s=0;s<u.length;s++){let f=u[s].split("-")[1];f==t&&(console.log("Deleting step: "+f),r.ripeService.deleteHistory(r.orgName,r.product.productObjective,u[s]))}}),yield r.hideLoading(),yield r.showAlert("Product step deleted successfully")})()}addStep(){var t=this;return(0,a.A)(function*(){var i;yield(yield t.alertCtrl.create({header:"Add Step",inputs:[{name:"step",type:"text",placeholder:"Step"},{name:"service",type:"text",placeholder:"Service"},{name:"slo",type:"text",placeholder:"SLO"}],buttons:[{text:"Cancel",role:"cancel"},{text:"Add",handler:(i=(0,a.A)(function*(u){yield t.showLoading(),t.product.productSteps.push(u.step),t.product.productServices.push(u.service),t.product.productSLOs.push(u.slo),yield t.productService.addProduct(t.product,t.orgName),yield t.hideLoading(),yield t.showAlert("Product step added successfully")}),function(p){return i.apply(this,arguments)})}]})).present()})()}showAlert(t){var r=this;return(0,a.A)(function*(){yield(yield r.alertCtrl.create({header:"Product Update",message:t,buttons:["OK"]})).present()})()}showLoading(){var t=this;return(0,a.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,a.A)(function*(){yield t.loadingCtrl.dismiss()})()}}return(o=d).\u0275fac=function(t){return new(t||o)(e.rXU(g.nX),e.rXU(y.b),e.rXU(c.hG),e.rXU(c.Xi),e.rXU(g.Ix),e.rXU(S.Q))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-product"]],viewQuery:function(t,r){if(1&t&&e.GBs(c.$w,5),2&t){let i;e.mGM(i=e.lsd())&&(r.inputs=i)}},decls:39,vars:2,consts:[[3,"title"],[3,"fullscreen"],[1,"flex","flex-col","flex-grow","lg:flex-row","md:flex-row","min-w-full","h-full"],[1,"flex","flex-col","flex-grow"],[1,"flex","flex-row","justify-center"],[1,"scrollable-content"],[1,"flex","flex-row","justify-center","items-center","mt-auto"],["color","light"],[1,"flex","justify-center","items-center","min-w-full","p-4"],[1,"p-1"],["color","success",3,"click"],["color","primary",3,"click"],["color","danger",3,"click"],[3,"value"],["slot","end","name","trash",3,"click"]],template:function(t,r){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"div",2)(3,"ion-card",3)(4,"ion-card-header",4)(5,"ion-card-title"),e.EFF(6,"Product Steps"),e.k0s()(),e.j41(7,"ion-card-content",5)(8,"ion-list"),e.Z7z(9,V,3,1,"ion-item",null,e.fX1),e.k0s()()(),e.j41(11,"ion-card",3)(12,"ion-card-header",4)(13,"ion-card-title"),e.EFF(14,"Product Services"),e.k0s()(),e.j41(15,"ion-card-content",5)(16,"ion-list"),e.Z7z(17,F,2,1,"ion-item",null,e.fX1),e.k0s()()(),e.j41(19,"ion-card",3)(20,"ion-card-header",4)(21,"ion-card-title"),e.EFF(22,"Product SLOs"),e.k0s()(),e.j41(23,"ion-card-content",5)(24,"ion-list"),e.Z7z(25,j,2,1,"ion-item",null,e.fX1),e.k0s()()()(),e.j41(27,"div",6)(28,"ion-item-divider",7)(29,"div",8)(30,"div",9)(31,"ion-button",10),e.bIt("click",function(){return r.addStep()}),e.EFF(32,"Add Step"),e.k0s()(),e.j41(33,"div",9)(34,"ion-button",11),e.bIt("click",function(){return r.upDateFields()}),e.EFF(35,"Edit Product"),e.k0s()(),e.j41(36,"div",9)(37,"ion-button",12),e.bIt("click",function(){return r.deleteProduct()}),e.EFF(38,"Delete Product"),e.k0s()()()()()()),2&t&&(e.Y8G("title",r.product.productObjective),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(8),e.Dyx(r.product.productSteps),e.R7$(8),e.Dyx(r.product.productServices),e.R7$(8),e.Dyx(r.product.productSLOs))},dependencies:[c.Jm,c.b_,c.I9,c.ME,c.tN,c.W9,c.iq,c.$w,c.uz,c.Dg,c.nf,c.Gw,w.p],styles:[".scrollable-content[_ngcontent-%COMP%]{height:200px;overflow-y:auto}"]}),d})()}];let x=(()=>{var o;class d{}return(o=d).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild(O),g.iI]}),d})();var L=l(5553);let k=(()=>{var o;class d{}return(o=d).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[P.MD,v.YN,c.bv,x,L.h]}),d})()}}]);