"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6927],{5553:(_,P,n)=>{n.d(P,{h:()=>g});var l=n(177),v=n(7863),i=n(4438);let g=(()=>{var c;class e{}return(c=e).\u0275fac=function(m){return new(m||c)},c.\u0275mod=i.$C({type:c}),c.\u0275inj=i.G2t({imports:[l.MD,v.bv]}),e})()},3241:(_,P,n)=>{n.d(P,{p:()=>g});var l=n(4438),v=n(177),i=n(7863);let g=(()=>{var c;class e{constructor(m){this.location=m,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(c=e).\u0275fac=function(m){return new(m||c)(l.rXU(v.aZ))},c.\u0275cmp=l.VBU({type:c,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(m,y){1&m&&(l.j41(0,"ion-header",0)(1,"ion-toolbar"),l.nrm(2,"ion-menu-button",1),l.j41(3,"ion-icon",2),l.bIt("click",function(){return y.goBack()}),l.k0s(),l.j41(4,"ion-title"),l.EFF(5),l.k0s()()()),2&m&&(l.Y8G("translucent",!0),l.R7$(5),l.JRh(y.title))},dependencies:[i.eU,i.iq,i.MC,i.BC,i.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),e})()},6927:(_,P,n)=>{n.r(P),n.d(P,{ViewProductPageModule:()=>E});var l=n(177),v=n(4341),i=n(7863),g=n(7650),c=n(467),e=n(4438),f=n(6241),m=n(9640),y=n(3241);function S(r,s){if(1&r){const u=e.RV6();e.j41(0,"ion-item"),e.nrm(1,"ion-input",13),e.j41(2,"ion-icon",14),e.bIt("click",function(){const o=e.eBV(u).$implicit,d=e.XpG();return e.Njj(d.deleteStep(o))}),e.k0s()()}if(2&r){const u=s.$implicit;e.R7$(),e.FS9("value",u)}}function C(r,s){if(1&r&&(e.j41(0,"ion-item"),e.nrm(1,"ion-input",13),e.k0s()),2&r){const u=s.$implicit;e.R7$(),e.FS9("value",u)}}function M(r,s){if(1&r&&(e.j41(0,"ion-item"),e.nrm(1,"ion-input",13),e.k0s()),2&r){const u=s.$implicit;e.R7$(),e.FS9("value",u)}}const F=[{path:"",component:(()=>{var r;class s{constructor(t,o,d,a,h,p){this.route=t,this.productService=o,this.alertCtrl=d,this.loadingCtrl=a,this.router=h,this.ripeService=p,this.product={productObjective:"",productSteps:[],productServices:[],productSLOs:[]},this.orgName="orgName"}ngOnInit(){var t=this;return(0,c.A)(function*(){t.getProductFromParams(),t.getOrgName()})()}getOrgName(){const t=localStorage.getItem("user");if(!t)return;const o=JSON.parse(t);this.orgName=o.orgName}getProductFromParams(){this.route.queryParams.subscribe(t=>{this.product=JSON.parse(t.product)}),console.log(this.product)}upDateFields(){var t=this;return(0,c.A)(function*(){yield t.showLoading();const o=t.inputs.map(w=>w.value),d=t.product.productSteps.length,a=o.slice(0,d),h=o.slice(d,2*d),p=o.slice(2*d,3*d);t.product.productSteps=a,t.product.productServices=h,t.product.productSLOs=p,yield t.productService.addProduct(t.product,t.orgName),yield t.hideLoading(),yield t.showAlert("Product updated successfully")})()}deleteProduct(){var t=this;return(0,c.A)(function*(){yield t.showLoading(),yield t.productService.removeProduct(t.orgName,t.product.productObjective),yield t.hideLoading(),yield t.showAlert("Product deleted successfully"),yield t.router.navigate(["/model-product"])})()}deleteStep(t){var o=this;return(0,c.A)(function*(){yield o.showLoading();const d=o.product.productSteps.indexOf(t);o.product.productSteps.splice(d,1),o.product.productServices.splice(d,1),o.product.productSLOs.splice(d,1),yield o.productService.addProduct(o.product,o.orgName);let a=[];o.ripeService.getHistoryResults(o.orgName,o.product.productObjective).then(h=>{console.log(t);for(let p=0;p<h.length;p++)a.push(h[p].id);for(let p=0;p<a.length;p++){let O=a[p].split("-")[1];O==t&&(console.log("Deleting step: "+O),o.ripeService.deleteHistory(o.orgName,o.product.productObjective,a[p]))}}),yield o.hideLoading(),yield o.showAlert("Product step deleted successfully")})()}addStep(){var t=this;return(0,c.A)(function*(){var d;yield(yield t.alertCtrl.create({header:"Add Step",inputs:[{name:"step",type:"text",placeholder:"Step"},{name:"service",type:"text",placeholder:"Service"},{name:"slo",type:"text",placeholder:"SLO"}],buttons:[{text:"Cancel",role:"cancel"},{text:"Add",handler:(d=(0,c.A)(function*(a){yield t.showLoading(),t.product.productSteps.push(a.step),t.product.productServices.push(a.service),t.product.productSLOs.push(a.slo),yield t.productService.addProduct(t.product,t.orgName),yield t.hideLoading(),yield t.showAlert("Product step added successfully")}),function(h){return d.apply(this,arguments)})}]})).present()})()}showAlert(t){var o=this;return(0,c.A)(function*(){yield(yield o.alertCtrl.create({header:"Product Update",message:t,buttons:["OK"]})).present()})()}showLoading(){var t=this;return(0,c.A)(function*(){yield(yield t.loadingCtrl.create({})).present()})()}hideLoading(){var t=this;return(0,c.A)(function*(){yield t.loadingCtrl.dismiss()})()}}return(r=s).\u0275fac=function(t){return new(t||r)(e.rXU(g.nX),e.rXU(f.b),e.rXU(i.hG),e.rXU(i.Xi),e.rXU(g.Ix),e.rXU(m.Q))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-view-product"]],viewQuery:function(t,o){if(1&t&&e.GBs(i.$w,5),2&t){let d;e.mGM(d=e.lsd())&&(o.inputs=d)}},decls:39,vars:2,consts:[[3,"title"],[3,"fullscreen"],[1,"flex","flex-col","flex-grow","lg:flex-row","md:flex-row","min-w-full","h-full"],[1,"flex","flex-col","flex-grow"],[1,"flex","flex-row","justify-center"],[1,"scrollable-content"],[1,"flex","flex-row","justify-center","items-center","mt-auto"],["color","light"],[1,"flex","justify-center","items-center","min-w-full","p-4"],[1,"p-1"],["color","success",3,"click"],["color","primary",3,"click"],["color","danger",3,"click"],[3,"value"],["slot","end","name","trash",3,"click"]],template:function(t,o){1&t&&(e.nrm(0,"app-header-return",0),e.j41(1,"ion-content",1)(2,"div",2)(3,"ion-card",3)(4,"ion-card-header",4)(5,"ion-card-title"),e.EFF(6,"Product Steps"),e.k0s()(),e.j41(7,"ion-card-content",5)(8,"ion-list"),e.Z7z(9,S,3,1,"ion-item",null,e.fX1),e.k0s()()(),e.j41(11,"ion-card",3)(12,"ion-card-header",4)(13,"ion-card-title"),e.EFF(14,"Product Services"),e.k0s()(),e.j41(15,"ion-card-content",5)(16,"ion-list"),e.Z7z(17,C,2,1,"ion-item",null,e.fX1),e.k0s()()(),e.j41(19,"ion-card",3)(20,"ion-card-header",4)(21,"ion-card-title"),e.EFF(22,"Product SLOs"),e.k0s()(),e.j41(23,"ion-card-content",5)(24,"ion-list"),e.Z7z(25,M,2,1,"ion-item",null,e.fX1),e.k0s()()()(),e.j41(27,"div",6)(28,"ion-item-divider",7)(29,"div",8)(30,"div",9)(31,"ion-button",10),e.bIt("click",function(){return o.addStep()}),e.EFF(32,"Add Step"),e.k0s()(),e.j41(33,"div",9)(34,"ion-button",11),e.bIt("click",function(){return o.upDateFields()}),e.EFF(35,"Edit Product"),e.k0s()(),e.j41(36,"div",9)(37,"ion-button",12),e.bIt("click",function(){return o.deleteProduct()}),e.EFF(38,"Delete Product"),e.k0s()()()()()()),2&t&&(e.Y8G("title",o.product.productObjective),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(8),e.Dyx(o.product.productSteps),e.R7$(8),e.Dyx(o.product.productServices),e.R7$(8),e.Dyx(o.product.productSLOs))},dependencies:[i.Jm,i.b_,i.I9,i.ME,i.tN,i.W9,i.iq,i.$w,i.uz,i.Dg,i.nf,i.Gw,y.p],styles:[".scrollable-content[_ngcontent-%COMP%]{height:200px;overflow-y:auto}"]}),s})()}];let j=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[g.iI.forChild(F),g.iI]}),s})();var V=n(5553);let E=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[l.MD,v.YN,i.bv,j,V.h]}),s})()}}]);