"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9878],{5553:(K,T,s)=>{s.d(T,{h:()=>f});var o=s(177),i=s(7863),c=s(4438);let f=(()=>{var m;class d{}return(m=d).\u0275fac=function(g){return new(g||m)},m.\u0275mod=c.$C({type:m}),m.\u0275inj=c.G2t({imports:[o.MD,i.bv]}),d})()},3241:(K,T,s)=>{s.d(T,{p:()=>f});var o=s(4438),i=s(177),c=s(7863);let f=(()=>{var m;class d{constructor(g){this.location=g,this.title="Header Title"}ngOnInit(){}goBack(){this.location.back()}}return(m=d).\u0275fac=function(g){return new(g||m)(o.rXU(i.aZ))},m.\u0275cmp=o.VBU({type:m,selectors:[["app-header-return"]],inputs:{title:"title"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","menu","menu-id"],["name","arrow-back","slot","start",1,"p-4","bigger-icon",3,"click"]],template:function(g,n){1&g&&(o.j41(0,"ion-header",0)(1,"ion-toolbar"),o.nrm(2,"ion-menu-button",1),o.j41(3,"ion-icon",2),o.bIt("click",function(){return n.goBack()}),o.k0s(),o.j41(4,"ion-title"),o.EFF(5),o.k0s()()()),2&g&&(o.Y8G("translucent",!0),o.R7$(5),o.JRh(n.title))},dependencies:[c.eU,c.iq,c.MC,c.BC,c.ai],styles:[".bigger-icon[_ngcontent-%COMP%]{font-size:1.5em}"]}),d})()},8453:(K,T,s)=>{s.d(T,{W:()=>c});var o=s(4438),i=s(7863);let c=(()=>{var f;class m{constructor(){this.title="Title"}ngOnInit(){}}return(f=m).\u0275fac=function(h){return new(h||f)},f.\u0275cmp=o.VBU({type:f,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[1,"lg:m-10"],["size","12","size-md","6","size-lg","6"],[1,"text-4xl","lg:text-6xl","font-bold"]],template:function(h,g){1&h&&(o.j41(0,"ion-row",0)(1,"ion-col",1)(2,"h1",2),o.EFF(3),o.k0s()()()),2&h&&(o.R7$(3),o.JRh(g.title))},dependencies:[i.hU,i.ln]}),m})()},4796:(K,T,s)=>{s.d(T,{u:()=>m});var o=s(467),i=s(8737),c=s(4262),f=s(4438);let m=(()=>{var d;class h{constructor(n,a){this.auth=n,this.firestore=a}registerUser(n){var a=this;return(0,o.A)(function*(){try{const r=yield(0,i.eJ)(a.auth,n.email,n.password);return r.user?(yield(0,c.BN)((0,c.H9)(a.firestore,"users",r.user.uid),{email:n.email,name:n.name,orgName:n.orgName,uid:r.user.uid}),yield(0,c.BN)((0,c.H9)(a.firestore,"teams",`${n.orgName}`),{name:n.orgName,members:[r.user.uid]}),r):null}catch{return null}})()}loginUser(n){var a=this;return(0,o.A)(function*(){try{var r;const u=yield(0,i.x9)(a.auth,n.email,n.password);if(null!==(r=u.user)&&void 0!==r&&r.uid){const D=yield(0,c.x7)((0,c.H9)(a.firestore,"users",u.user.uid));if(D.exists())return localStorage.setItem("user",JSON.stringify(D.data())),u}}catch(u){console.error(u)}return null})()}logoutUser(){var n=this;return(0,o.A)(function*(){yield n.auth.signOut()})()}addMember(n){var a=this;return(0,o.A)(function*(){try{const r=yield(0,i.eJ)(a.auth,n.email,n.password);if(!r.user)return!1;const u={email:n.email,name:n.name,orgName:n.orgName,uid:r.user.uid};return yield(0,c.BN)((0,c.H9)(a.firestore,"users",r.user.uid),u),u}catch{return!1}})()}}return(d=h).\u0275fac=function(n){return new(n||d)(f.KVO(i.Nj),f.KVO(c._7))},d.\u0275prov=f.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),h})()},4970:(K,T,s)=>{s.d(T,{s:()=>V});var o=s(467),i=s(4262);class c{static toArtilleryData(t){return function n(e,t){return g(e,t,d)}(JSON.parse(t),_("ArtilleryData"))}static artilleryDataToJson(t){return JSON.stringify(function a(e,t){return g(e,t,h)}(t,_("ArtilleryData")),null,2)}}function f(e,t,A,p=""){const v=m(e);throw Error(`Invalid value${A?` for key "${A}"`:""}${p?` on ${p}`:""}. Expected ${v} but got ${JSON.stringify(t)}`)}function m(e){return Array.isArray(e)?2===e.length&&void 0===e[0]?`an optional ${m(e[1])}`:`one of [${e.map(t=>m(t)).join(", ")}]`:"object"==typeof e&&void 0!==e.literal?e.literal:typeof e}function d(e){if(void 0===e.jsonToJS){const t={};e.props.forEach(A=>t[A.json]={key:A.js,typ:A.typ}),e.jsonToJS=t}return e.jsonToJS}function h(e){if(void 0===e.jsToJSON){const t={};e.props.forEach(A=>t[A.js]={key:A.json,typ:A.typ}),e.jsToJSON=t}return e.jsToJSON}function g(e,t,A,p="",v=""){if("any"===t)return e;if(null===t)return null===e?e:f(t,e,p,v);if(!1===t)return f(t,e,p,v);let I;for(;"object"==typeof t&&void 0!==t.ref;)I=t.ref,t=U[t.ref];return Array.isArray(t)?function B(l,j){return-1!==l.indexOf(j)?j:f(l.map(E=>r(E)),j,p,v)}(t,e):"object"==typeof t?t.hasOwnProperty("unionMembers")?function S(l,j){const E=l.length;for(let R=0;R<E;R++){const P=l[R];try{return g(j,P,A)}catch{}}return f(l,j,p,v)}(t.unionMembers,e):t.hasOwnProperty("arrayItems")?function H(l,j){return Array.isArray(j)?j.map(E=>g(E,l,A)):f(r("array"),j,p,v)}(t.arrayItems,e):t.hasOwnProperty("props")?function M(l,j,E){if(null===E||"object"!=typeof E||Array.isArray(E))return f(r(I||"object"),E,p,v);const R={};return Object.getOwnPropertyNames(l).forEach(P=>{const L=l[P],W=Object.prototype.hasOwnProperty.call(E,P)?E[P]:void 0;R[L.key]=void 0!==W?g(W,L.typ,A,P,I):void 0}),Object.getOwnPropertyNames(E).forEach(P=>{Object.prototype.hasOwnProperty.call(l,P)||(R[P]=g(E[P],j,A,P,I))}),R}(A(t),t.additional,e):f(t,e,p,v):t===Date&&"number"!=typeof e?function C(l){if(null===l)return null;const j=new Date(l);return isNaN(j.valueOf())?f(r("Date"),l,p,v):j}(e):function b(l,j){return typeof l==typeof j?j:f(l,j,p,v)}(t,e)}function r(e){return{literal:e}}function y(e,t){return{props:e,additional:t}}function O(e){return{props:[],additional:e}}function _(e){return{ref:e}}const U={ArtilleryData:y([{json:"aggregate",js:"aggregate",typ:_("Aggregate")},{json:"intermediate",js:"intermediate",typ:function u(e){return{arrayItems:e}}(_("Intermediate"))},{json:"date",js:"date",typ:""}],!1),Aggregate:y([{json:"counters",js:"counters",typ:O(0)},{json:"rates",js:"rates",typ:_("Rates")},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:0},{json:"summaries",js:"summaries",typ:_("Histograms")},{json:"histograms",js:"histograms",typ:_("Histograms")}],!1),Histograms:y([{json:"http.response_time",js:"http.response_time",typ:O(3.14)},{json:"plugins.metrics-by-endpoint.response_time./",js:"plugins.metrics-by-endpoint.response_time./",typ:O(3.14)},{json:"vusers.session_length",js:"vusers.session_length",typ:function D(...e){return{unionMembers:e}}(void 0,O(3.14))}],!1),Rates:y([{json:"http.request_rate",js:"http.request_rate",typ:0}],!1),Intermediate:y([{json:"counters",js:"counters",typ:O(0)},{json:"rates",js:"rates",typ:_("Rates")},{json:"http.request_rate",js:"http.request_rate",typ:null},{json:"firstCounterAt",js:"firstCounterAt",typ:0},{json:"firstHistogramAt",js:"firstHistogramAt",typ:0},{json:"lastCounterAt",js:"lastCounterAt",typ:0},{json:"lastHistogramAt",js:"lastHistogramAt",typ:0},{json:"firstMetricAt",js:"firstMetricAt",typ:0},{json:"lastMetricAt",js:"lastMetricAt",typ:0},{json:"period",js:"period",typ:""},{json:"summaries",js:"summaries",typ:_("Histograms")},{json:"histograms",js:"histograms",typ:_("Histograms")}],!1)};var N=s(4438),x=s(1626),J=s(7473);let V=(()=>{var e;class t{constructor(p,v,b){this.firestore=p,this.http=v,this.notificationService=b,this.url="https://devprobeapi.onrender.com/create_load_test"}getLoadTestHistory(p,v,b){var S=this;return(0,o.A)(function*(){const B=(0,i.H9)(S.firestore,"teams",p,"products",v,"load_test",b),H=yield(0,i.x7)(B);if(H.exists()){let C=H.data();console.log(C);let M=Object.keys(C);console.log(M);for(let I of M)C[I]=c.toArtilleryData(C[I]);return C}return{}})()}sendLoadTest(p,v,b,S,B){var H=this;return(0,o.A)(function*(){try{const C=yield H.notificationService.getNotificationUser(B),M={team:p,product:v,service:b,target:`https://${S}`,sid:C};return yield H.http.post(H.url,M).toPromise()}catch{return{}}})()}getLoadTestHistoryByDate(p,v,b,S){var B=this;return(0,o.A)(function*(){const H=(0,i.H9)(B.firestore,"teams",p,"products",v,"load_test",b),C=yield(0,i.x7)(H);if(C.exists()){let M=C.data();console.log(M);let I=Object.keys(M);console.log(I);for(let l of I)M[l]=c.toArtilleryData(M[l]),M[l].date.split("-")[0]+"-"+M[l].date.split("-")[1]+"-"+M[l].date.split("-")[2]!==S&&delete M[l];return console.log("Filtered by Date: ",M),M}return{}})()}}return(e=t).\u0275fac=function(p){return new(p||e)(N.KVO(i._7),N.KVO(x.Qq),N.KVO(J.J))},e.\u0275prov=N.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),t})()},7473:(K,T,s)=>{s.d(T,{J:()=>d});var o=s(467),i=s(4262),c=s(4438),f=s(1626),m=s(5092);let d=(()=>{var h;class g{constructor(a,r,u){this.firestore=a,this.http=r,this.teamService=u}saveNotificationID(a,r){var u=this;return(0,o.A)(function*(){const D=(0,i.H9)(u.firestore,"users",a.uid),y=yield(0,i.x7)(D);if(y.exists()){const O=y.data();return O.notificationID=r,yield(0,i.BN)(D,O),!0}return console.log("No such document!"),!1})()}getNotificationUser(a){var r=this;return(0,o.A)(function*(){const u=(0,i.H9)(r.firestore,"users",a.uid),D=yield(0,i.x7)(u);if(D.exists()){const y=D.data();return y.notificationID?y.notificationID:""}return console.log("No such document!"),null})()}notifyIncidentToUser(a,r){var u=this;return(0,o.A)(function*(){try{const y=(yield u.teamService.getTeamByOrganization(r)).filter(_=>a.includes(_.name));console.log("team",y);const O="https://devprobeapi.onrender.com/sendNotification";for(let _ of y){let U=yield u.getNotificationUser(_);if(console.log("sid",U),""!==U){const x={sid:U,title:"New Incident",type:"new_incident",message:`Hey ${_.name}, you have been assigned a new incident`,target:"https://devprobe-89481.web.app/incident-manager-chooser"};yield u.http.post(O,x).toPromise(),console.log("Notification sent successfully")}else console.log("no sid")}}catch(D){console.log(D)}})()}}return(h=g).\u0275fac=function(a){return new(a||h)(c.KVO(i._7),c.KVO(f.Qq),c.KVO(m.O))},h.\u0275prov=c.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),g})()},5092:(K,T,s)=>{s.d(T,{O:()=>m});var o=s(467),i=s(4262),c=s(4438),f=s(4796);let m=(()=>{var d;class h{constructor(n,a){this.firestore=n,this.authService=a}getTeamByOrganization(n){var a=this;return(0,o.A)(function*(){let r=(0,i.H9)(a.firestore,"teams",n);const y=(yield(0,i.x7)(r)).data();let O=[];for(let _=0;_<y.members.length;_++){r=(0,i.H9)(a.firestore,"users",y.members[_]);const N=(yield(0,i.x7)(r)).data();O.push(N)}return O})()}removeMember(n,a){var r=this;return(0,o.A)(function*(){try{let u=(0,i.H9)(r.firestore,"teams",n);const O=(yield(0,i.x7)(u)).data();let _=O.members.filter(N=>N!==a);return yield(0,i.BN)(u,{name:O.name,members:_}),u=(0,i.H9)(r.firestore,"users",a),yield(0,i.BN)(u,{}),yield r.authService,!0}catch{return!1}})()}addMember(n){var a=this;return(0,o.A)(function*(){try{const r=yield a.authService.addMember(n);if(!r)return!1;const u=(0,i.H9)(a.firestore,"teams",n.orgName),y=(yield(0,i.x7)(u)).data();console.log(y);const O=y;let _=O.members;return _.push(r.uid),console.log(_),yield(0,i.mZ)(u,{name:O.name,members:_}),r.uid}catch{return!1}})()}}return(d=h).\u0275fac=function(n){return new(n||d)(c.KVO(i._7),c.KVO(f.u))},d.\u0275prov=c.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),h})()}}]);